"use strict";(self.webpackChunkgithub_like_card_project=self.webpackChunkgithub_like_card_project||[]).push([[179],{2011:(gt,xe,k)=>{k.d(xe,{Dh:()=>Ee,GT:()=>oe,cc:()=>Ae,hO:()=>Ge,on:()=>$,pX:()=>se,xv:()=>pe});var h=k(4650),Q=k(9260),P=k(4976);gt=k.hmd(gt);const ie=["ngOnDestroy"],se=(Ne,Oe,je,Pe={})=>new Proxy(Ne,{get:(Ie,De)=>je.runOutsideAngular(()=>{var qe;if(Ne[De])return!(null===(qe=Pe?.spy)||void 0===qe)&&qe.get&&Pe.spy.get(De,Ne[De]),Ne[De];if(ie.indexOf(De)>-1)return()=>{};const Fe=Oe.toPromise().then(nt=>{const ne=nt&&nt[De];return"function"==typeof ne?ne.bind(nt):ne&&ne.then?ne.then(Dt=>je.run(()=>Dt)):je.run(()=>ne)});return new Proxy(()=>{},{get:(nt,ne)=>Fe[ne],apply:(nt,ne,Dt)=>Fe.then(Xe=>{var Ut;const it=Xe&&Xe(...Dt);return!(null===(Ut=Pe?.spy)||void 0===Ut)&&Ut.apply&&Pe.spy.apply(De,Dt,it),it})})})}),oe=(Ne,Oe)=>{Oe.forEach(je=>{Object.getOwnPropertyNames(je.prototype||je).forEach(Pe=>{Object.defineProperty(Ne.prototype,Pe,Object.getOwnPropertyDescriptor(je.prototype||je,Pe))})})};class me{constructor(Oe){return Oe}}const Ee=new h.OlP("angularfire2.app.options"),pe=new h.OlP("angularfire2.app.name");function $(Ne,Oe,je){const Ie="object"==typeof je&&je||{};Ie.name=Ie.name||"string"==typeof je&&je||"[DEFAULT]";const qe=Q.Z.apps.filter(Fe=>Fe&&Fe.name===Ie.name)[0]||Oe.runOutsideAngular(()=>Q.Z.initializeApp(Ne,Ie));try{JSON.stringify(Ne)!==JSON.stringify(qe.options)&&B("error",`${qe.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(qe)}const B=(Ne,...Oe)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Ne](...Oe)},q={provide:me,useFactory:$,deps:[Ee,h.R0b,[new h.FiY,pe]]};let Ge=(()=>{class Ne{constructor(je){Q.Z.registerVersion("angularfire",P.q4.full,"core"),Q.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Q.Z.registerVersion("angular",h.q4F.full,je.toString())}static initializeApp(je,Pe){return{ngModule:Ne,providers:[{provide:Ee,useValue:je},{provide:pe,useValue:Pe}]}}}return Ne.\u0275fac=function(je){return new(je||Ne)(h.LFG(h.Lbi))},Ne.\u0275mod=h.oAB({type:Ne}),Ne.\u0275inj=h.cJS({providers:[q]}),Ne})();function Ae(Ne,Oe,je,Pe,Ie){const[,De,qe]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===Ne)||[];if(De)return function We(Ne,Oe){try{return Ne.toString()===Oe.toString()}catch{return Ne===Oe}}(Ie,qe)||(ge("error",`${Oe} was already initialized on the ${je} Firebase App with different settings.${ot?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ie,was:qe})),De;{const Fe=Pe();return globalThis.\u0275AngularfireInstanceCache.push([Ne,Fe,Ie]),Fe}}const ot=!!gt.hot,ge=(Ne,...Oe)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Ne](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(gt,xe,k)=>{k.d(xe,{q4:()=>Sd,iC:()=>Nd,HU:()=>tn,vb:()=>Qi,JM:()=>Yt});var h=k(4650),Q=k(259),P=k(5861),ie=k(6881),se=k(2090),oe=k(4859),me=k(1877);const Ee=(E,D)=>D.some(S=>E instanceof S);let pe,$;const Ge=new WeakMap,Ae=new WeakMap,We=new WeakMap,ot=new WeakMap,ge=new WeakMap;let je={get(E,D,S){if(E instanceof IDBTransaction){if("done"===D)return Ae.get(E);if("objectStoreNames"===D)return E.objectStoreNames||We.get(E);if("store"===D)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return qe(E[D])},set:(E,D,S)=>(E[D]=S,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function De(E){return"function"==typeof E?function Ie(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function q(){return $||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Fe(this),D),qe(Ge.get(this))}:function(...D){return qe(E.apply(Fe(this),D))}:function(D,...S){const O=E.call(Fe(this),D,...S);return We.set(O,D.sort?D.sort():[D]),qe(O)}}(E):(E instanceof IDBTransaction&&function Oe(E){if(Ae.has(E))return;const D=new Promise((S,O)=>{const j=()=>{E.removeEventListener("complete",W),E.removeEventListener("error",te),E.removeEventListener("abort",te)},W=()=>{S(),j()},te=()=>{O(E.error||new DOMException("AbortError","AbortError")),j()};E.addEventListener("complete",W),E.addEventListener("error",te),E.addEventListener("abort",te)});Ae.set(E,D)}(E),Ee(E,function B(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,je):E)}function qe(E){if(E instanceof IDBRequest)return function Ne(E){const D=new Promise((S,O)=>{const j=()=>{E.removeEventListener("success",W),E.removeEventListener("error",te)},W=()=>{S(qe(E.result)),j()},te=()=>{O(E.error),j()};E.addEventListener("success",W),E.addEventListener("error",te)});return D.then(S=>{S instanceof IDBCursor&&Ge.set(S,E)}).catch(()=>{}),ge.set(D,E),D}(E);if(ot.has(E))return ot.get(E);const D=De(E);return D!==E&&(ot.set(E,D),ge.set(D,E)),D}const Fe=E=>ge.get(E),Dt=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],Ut=new Map;function it(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(Ut.get(D))return Ut.get(D);const S=D.replace(/FromIndex$/,""),O=D!==S,j=Xe.includes(S);if(!(S in(O?IDBIndex:IDBObjectStore).prototype)||!j&&!Dt.includes(S))return;const W=function(){var te=(0,P.Z)(function*($e,...He){const st=this.transaction($e,j?"readwrite":"readonly");let Mt=st.store;return O&&(Mt=Mt.index(He.shift())),(yield Promise.all([Mt[S](...He),j&&st.done]))[0]});return function(He){return te.apply(this,arguments)}}();return Ut.set(D,W),W}!function Pe(E){je=E(je)}(E=>({...E,get:(D,S,O)=>it(D,S)||E.get(D,S,O),has:(D,S)=>!!it(D,S)||E.has(D,S)}));const Ss="@firebase/installations",Zr="0.6.4",Zs=1e4,Bi=`w:${Zr}`,ue="FIS_v2",le="https://firebaseinstallations.googleapis.com/v1",fe=36e5,lt=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function at(E){return E instanceof se.ZR&&E.code.includes("request-failed")}function fn({projectId:E}){return`${le}/projects/${E}/installations`}function ht(E){return{token:E.token,requestStatus:2,expiresIn:wr(E.expiresIn),creationTime:Date.now()}}function Gt(E,D){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,P.Z)(function*(E,D){const O=(yield D.json()).error;return lt.create("request-failed",{requestName:E,serverCode:O.code,serverMessage:O.message,serverStatus:O.status})})).apply(this,arguments)}function ui({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function xn(E){return En.apply(this,arguments)}function En(){return(En=(0,P.Z)(function*(E){const D=yield E();return D.status>=500&&D.status<600?E():D})).apply(this,arguments)}function wr(E){return Number(E.replace("s","000"))}function ft(){return(ft=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:D},{fid:S}){const O=fn(E),j=ui(E),W=D.getImmediate({optional:!0});if(W){const st=yield W.getHeartbeatsHeader();st&&j.append("x-firebase-client",st)}const $e={method:"POST",headers:j,body:JSON.stringify({fid:S,authVersion:ue,appId:E.appId,sdkVersion:Bi})},He=yield xn(()=>fetch(O,$e));if(He.ok){const st=yield He.json();return{fid:st.fid||S,registrationStatus:2,refreshToken:st.refreshToken,authToken:ht(st.authToken)}}throw yield Gt("Create Installation",He)})).apply(this,arguments)}function Kr(E){return new Promise(D=>{setTimeout(D,E)})}const Er=/^[cdef][\w-]{21}$/,Vr="";function ji(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const S=function Jt(E){return function Pc(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Er.test(S)?S:Vr}catch{return Vr}}function on(E){return`${E.appName}!${E.appId}`}const rt=new Map;function At(E,D){const S=on(E);dr(S,D),function Ur(E,D){const S=function Qr(){return!Mn&&"BroadcastChannel"in self&&(Mn=new BroadcastChannel("[Firebase] FID Change"),Mn.onmessage=E=>{dr(E.data.key,E.data.fid)}),Mn}();S&&S.postMessage({key:E,fid:D}),function pn(){0===rt.size&&Mn&&(Mn.close(),Mn=null)}()}(S,D)}function dr(E,D){const S=rt.get(E);if(S)for(const O of S)O(D)}let Mn=null;const As="firebase-installations-database",zt=1,$i="firebase-installations-store";let an=null;function li(){return an||(an=function nt(E,D,{blocked:S,upgrade:O,blocking:j,terminated:W}={}){const te=indexedDB.open(E,D),$e=qe(te);return O&&te.addEventListener("upgradeneeded",He=>{O(qe(te.result),He.oldVersion,He.newVersion,qe(te.transaction))}),S&&te.addEventListener("blocked",()=>S()),$e.then(He=>{W&&He.addEventListener("close",()=>W()),j&&He.addEventListener("versionchange",()=>j())}).catch(()=>{}),$e}(As,zt,{upgrade:(E,D)=>{0===D&&E.createObjectStore($i)}})),an}function Ln(E,D){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,P.Z)(function*(E,D){const S=on(E),j=(yield li()).transaction($i,"readwrite"),W=j.objectStore($i),te=yield W.get(S);return yield W.put(D,S),yield j.done,(!te||te.fid!==D.fid)&&At(E,D.fid),D})).apply(this,arguments)}function Ii(E){return In.apply(this,arguments)}function In(){return(In=(0,P.Z)(function*(E){const D=on(E),O=(yield li()).transaction($i,"readwrite");yield O.objectStore($i).delete(D),yield O.done})).apply(this,arguments)}function Di(E,D){return Br.apply(this,arguments)}function Br(){return(Br=(0,P.Z)(function*(E,D){const S=on(E),j=(yield li()).transaction($i,"readwrite"),W=j.objectStore($i),te=yield W.get(S),$e=D(te);return void 0===$e?yield W.delete(S):yield W.put($e,S),yield j.done,$e&&(!te||te.fid!==$e.fid)&&At(E,$e.fid),$e})).apply(this,arguments)}function V(E){return L.apply(this,arguments)}function L(){return L=(0,P.Z)(function*(E){let D;const S=yield Di(E.appConfig,O=>{const j=function z(E){return bn(E||{fid:ji(),registrationStatus:0})}(O),W=function ve(E,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(lt.create("app-offline"))};const S={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},O=function J(E,D){return Le.apply(this,arguments)}(E,S);return{installationEntry:S,registrationPromise:O}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Ct(E)}:{installationEntry:D}}(E,j);return D=W.registrationPromise,W.installationEntry});return S.fid===Vr?{installationEntry:yield D}:{installationEntry:S,registrationPromise:D}}),L.apply(this,arguments)}function Le(){return Le=(0,P.Z)(function*(E,D){try{const S=yield function Tr(E,D){return ft.apply(this,arguments)}(E,D);return Ln(E.appConfig,S)}catch(S){throw at(S)&&409===S.customData.serverCode?yield Ii(E.appConfig):yield Ln(E.appConfig,{fid:D.fid,registrationStatus:0}),S}}),Le.apply(this,arguments)}function Ct(E){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,P.Z)(function*(E){let D=yield jn(E.appConfig);for(;1===D.registrationStatus;)yield Kr(100),D=yield jn(E.appConfig);if(0===D.registrationStatus){const{installationEntry:S,registrationPromise:O}=yield V(E);return O||S}return D})).apply(this,arguments)}function jn(E){return Di(E,D=>{if(!D)throw lt.create("installation-not-found");return bn(D)})}function bn(E){return function ln(E){return 1===E.registrationStatus&&E.registrationTime+Zs<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Sr(){return(Sr=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:D},S){const O=function Ci(E,{fid:D}){return`${fn(E)}/${D}/authTokens:generate`}(E,S),j=function Wt(E,{refreshToken:D}){const S=ui(E);return S.append("Authorization",function br(E){return`${ue} ${E}`}(D)),S}(E,S),W=D.getImmediate({optional:!0});if(W){const st=yield W.getHeartbeatsHeader();st&&j.append("x-firebase-client",st)}const $e={method:"POST",headers:j,body:JSON.stringify({installation:{sdkVersion:Bi,appId:E.appId}})},He=yield xn(()=>fetch(O,$e));if(He.ok)return ht(yield He.json());throw yield Gt("Generate Auth Token",He)})).apply(this,arguments)}function Hi(E){return la.apply(this,arguments)}function la(){return la=(0,P.Z)(function*(E,D=!1){let S;const O=yield Di(E.appConfig,W=>{if(!Vt(W))throw lt.create("not-registered");const te=W.authToken;if(!D&&function pt(E){return 2===E.requestStatus&&!function Xt(E){const D=Date.now();return D<E.creationTime||E.creationTime+E.expiresIn<D+fe}(E)}(te))return W;if(1===te.requestStatus)return S=function de(E,D){return X.apply(this,arguments)}(E,D),W;{if(!navigator.onLine)throw lt.create("app-offline");const $e=function Kt(E){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:D})}(W);return S=function dt(E,D){return wt.apply(this,arguments)}(E,$e),$e}});return S?yield S:O.authToken}),la.apply(this,arguments)}function X(){return(X=(0,P.Z)(function*(E,D){let S=yield ke(E.appConfig);for(;1===S.authToken.requestStatus;)yield Kr(100),S=yield ke(E.appConfig);const O=S.authToken;return 0===O.requestStatus?Hi(E,D):O})).apply(this,arguments)}function ke(E){return Di(E,D=>{if(!Vt(D))throw lt.create("not-registered");return function hr(E){return 1===E.requestStatus&&E.requestTime+Zs<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function wt(){return wt=(0,P.Z)(function*(E,D){try{const S=yield function jt(E,D){return Sr.apply(this,arguments)}(E,D),O=Object.assign(Object.assign({},D),{authToken:S});return yield Ln(E.appConfig,O),S}catch(S){if(!at(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const O=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Ln(E.appConfig,O)}else yield Ii(E.appConfig);throw S}}),wt.apply(this,arguments)}function Vt(E){return void 0!==E&&2===E.registrationStatus}function hu(){return(hu=(0,P.Z)(function*(E){const D=E,{installationEntry:S,registrationPromise:O}=yield V(D);return O?O.catch(console.error):Hi(D).catch(console.error),S.fid})).apply(this,arguments)}function No(){return No=(0,P.Z)(function*(E,D=!1){const S=E;return yield function di(E){return Ze.apply(this,arguments)}(S),(yield Hi(S,D)).token}),No.apply(this,arguments)}function Ze(){return(Ze=(0,P.Z)(function*(E){const{registrationPromise:D}=yield V(E);D&&(yield D)})).apply(this,arguments)}function Ks(E){return lt.create("missing-app-config-values",{valueName:E})}const Lt="installations",Ys=E=>{const D=E.getProvider("app").getImmediate(),S=function da(E){if(!E||!E.options)throw Ks("App Configuration");if(!E.name)throw Ks("App Name");const D=["projectId","apiKey","appId"];for(const S of D)if(!E.options[S])throw Ks(S);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(D);return{app:D,appConfig:S,heartbeatServiceProvider:(0,ie._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},cs=E=>{const D=E.getProvider("app").getImmediate(),S=(0,ie._getProvider)(D,Lt).getImmediate();return{getId:()=>function Yn(E){return hu.apply(this,arguments)}(S),getToken:j=>function df(E){return No.apply(this,arguments)}(S,j)}};(function Qs(){(0,ie._registerComponent)(new oe.wA(Lt,Ys,"PUBLIC")),(0,ie._registerComponent)(new oe.wA("installations-internal",cs,"PRIVATE"))})(),(0,ie.registerVersion)(Ss,Zr),(0,ie.registerVersion)(Ss,Zr,"esm2017");const $n="@firebase/remote-config",Ir=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ds{constructor(D,S,O,j){this.client=D,this.storage=S,this.storageCache=O,this.logger=j}isCachedDataFresh(D,S){if(!S)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const O=Date.now()-S,j=O<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${O}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${j}.`),j}fetch(D){var S=this;return(0,P.Z)(function*(){const[O,j]=yield Promise.all([S.storage.getLastSuccessfulFetchTimestampMillis(),S.storage.getLastSuccessfulFetchResponse()]);if(j&&S.isCachedDataFresh(D.cacheMaxAgeMillis,O))return j;D.eTag=j&&j.eTag;const W=yield S.client.fetch(D),te=[S.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===W.status&&te.push(S.storage.setLastSuccessfulFetchResponse(W)),yield Promise.all(te),W})()}}function Cg(E=navigator){return E.languages&&E.languages[0]||E.language}class Lc{constructor(D,S,O,j,W,te){this.firebaseInstallations=D,this.sdkVersion=S,this.namespace=O,this.projectId=j,this.apiKey=W,this.appId=te}fetch(D){var S=this;return(0,P.Z)(function*(){const[O,j]=yield Promise.all([S.firebaseInstallations.getId(),S.firebaseInstallations.getToken()]),te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${S.projectId}/namespaces/${S.namespace}:fetch?key=${S.apiKey}`,$e={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},He={sdk_version:S.sdkVersion,app_instance_id:O,app_instance_id_token:j,app_id:S.appId,language_code:Cg()},st={method:"POST",headers:$e,body:JSON.stringify(He)},Mt=fetch(te,st),Tt=new Promise((vi,Mi)=>{D.signal.addEventListener(()=>{const nc=new Error("The operation was aborted.");nc.name="AbortError",Mi(nc)})});let yi;try{yield Promise.race([Mt,Tt]),yi=yield Mt}catch(vi){let Mi="fetch-client-network";throw"AbortError"===vi?.name&&(Mi="fetch-timeout"),Ir.create(Mi,{originalErrorMessage:vi?.message})}let Gn=yi.status;const Ji=yi.headers.get("ETag")||void 0;let Va,Xi;if(200===yi.status){let vi;try{vi=yield yi.json()}catch(Mi){throw Ir.create("fetch-client-parse",{originalErrorMessage:Mi?.message})}Va=vi.entries,Xi=vi.state}if("INSTANCE_STATE_UNSPECIFIED"===Xi?Gn=500:"NO_CHANGE"===Xi?Gn=304:("NO_TEMPLATE"===Xi||"EMPTY_CONFIG"===Xi)&&(Va={}),304!==Gn&&200!==Gn)throw Ir.create("fetch-status",{httpStatus:Gn});return{status:Gn,eTag:Ji,config:Va}})()}}class Tg{constructor(D,S){this.client=D,this.storage=S}fetch(D){var S=this;return(0,P.Z)(function*(){const O=(yield S.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return S.attemptFetch(D,O)})()}attemptFetch(D,{throttleEndTimeMillis:S,backoffCount:O}){var j=this;return(0,P.Z)(function*(){yield function bg(E,D){return new Promise((S,O)=>{const j=Math.max(D-Date.now(),0),W=setTimeout(S,j);E.addEventListener(()=>{clearTimeout(W),O(Ir.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,S);try{const W=yield j.client.fetch(D);return yield j.storage.deleteThrottleMetadata(),W}catch(W){if(!function id(E){if(!(E instanceof se.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(W))throw W;const te={throttleEndTimeMillis:Date.now()+(0,se.$s)(O),backoffCount:O+1};return yield j.storage.setThrottleMetadata(te),j.attemptFetch(D,te)}})()}}class rv{constructor(D,S,O,j,W){this.app=D,this._client=S,this._storageCache=O,this._storage=j,this._logger=W,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function mu(E,D){const S=E.target.error||void 0;return Ir.create(D,{originalErrorMessage:S&&S?.message})}const pi="app_namespace_store";class iv{constructor(D,S,O,j=function Vo(){return new Promise((E,D)=>{try{const S=indexedDB.open("firebase_remote_config",1);S.onerror=O=>{D(mu(O,"storage-open"))},S.onsuccess=O=>{E(O.target.result)},S.onupgradeneeded=O=>{0===O.oldVersion&&O.target.result.createObjectStore(pi,{keyPath:"compositeKey"})}}catch(S){D(Ir.create("storage-open",{originalErrorMessage:S?.message}))}})}()){this.appId=D,this.appName=S,this.namespace=O,this.openDbPromise=j}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var S=this;return(0,P.Z)(function*(){const O=yield S.openDbPromise;return new Promise((j,W)=>{const $e=O.transaction([pi],"readonly").objectStore(pi),He=S.createCompositeKey(D);try{const st=$e.get(He);st.onerror=Mt=>{W(mu(Mt,"storage-get"))},st.onsuccess=Mt=>{const Tt=Mt.target.result;j(Tt?Tt.value:void 0)}}catch(st){W(Ir.create("storage-get",{originalErrorMessage:st?.message}))}})})()}set(D,S){var O=this;return(0,P.Z)(function*(){const j=yield O.openDbPromise;return new Promise((W,te)=>{const He=j.transaction([pi],"readwrite").objectStore(pi),st=O.createCompositeKey(D);try{const Mt=He.put({compositeKey:st,value:S});Mt.onerror=Tt=>{te(mu(Tt,"storage-set"))},Mt.onsuccess=()=>{W()}}catch(Mt){te(Ir.create("storage-set",{originalErrorMessage:Mt?.message}))}})})()}delete(D){var S=this;return(0,P.Z)(function*(){const O=yield S.openDbPromise;return new Promise((j,W)=>{const $e=O.transaction([pi],"readwrite").objectStore(pi),He=S.createCompositeKey(D);try{const st=$e.delete(He);st.onerror=Mt=>{W(mu(Mt,"storage-delete"))},st.onsuccess=()=>{j()}}catch(st){W(Ir.create("storage-delete",{originalErrorMessage:st?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class pf{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,P.Z)(function*(){const S=D.storage.getLastFetchStatus(),O=D.storage.getLastSuccessfulFetchTimestampMillis(),j=D.storage.getActiveConfig(),W=yield S;W&&(D.lastFetchStatus=W);const te=yield O;te&&(D.lastSuccessfulFetchTimestampMillis=te);const $e=yield j;$e&&(D.activeConfig=$e)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Vc(){return ga.apply(this,arguments)}function ga(){return(ga=(0,P.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function hs(){(0,ie._registerComponent)(new oe.wA("remote-config",function E(D,{instanceIdentifier:S}){const O=D.getProvider("app").getImmediate(),j=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ir.create("registration-window");if(!(0,se.hl)())throw Ir.create("indexed-db-unavailable");const{projectId:W,apiKey:te,appId:$e}=O.options;if(!W)throw Ir.create("registration-project-id");if(!te)throw Ir.create("registration-api-key");if(!$e)throw Ir.create("registration-app-id");const He=new iv($e,O.name,S=S||"firebase"),st=new pf(He),Mt=new me.Yd($n);Mt.logLevel=me.in.ERROR;const Tt=new Lc(j,ie.SDK_VERSION,S,W,te,$e),yi=new Tg(Tt,He),Gn=new ds(yi,He,st,Mt),Ji=new rv(O,Gn,st,He,Mt);return function Xr(E){const D=(0,se.m9)(E);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Ji),Ji},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)($n,"0.4.4"),(0,ie.registerVersion)($n,"0.4.4","esm2017")}();const ad=(E,D)=>D.some(S=>E instanceof S);let Uc,Ms;const vu=new WeakMap,Rs=new WeakMap,jr=new WeakMap,Ar=new WeakMap,ma=new WeakMap;let fs={get(E,D,S){if(E instanceof IDBTransaction){if("done"===D)return Rs.get(E);if("objectStoreNames"===D)return E.objectStoreNames||jr.get(E);if("store"===D)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return xr(E[D])},set:(E,D,S)=>(E[D]=S,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function cd(E){return"function"==typeof E?function ud(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function yu(){return Ms||(Ms=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(ir(this),D),xr(vu.get(this))}:function(...D){return xr(E.apply(ir(this),D))}:function(D,...S){const O=E.call(ir(this),D,...S);return jr.set(O,D.sort?D.sort():[D]),xr(O)}}(E):(E instanceof IDBTransaction&&function Uo(E){if(Rs.has(E))return;const D=new Promise((S,O)=>{const j=()=>{E.removeEventListener("complete",W),E.removeEventListener("error",te),E.removeEventListener("abort",te)},W=()=>{S(),j()},te=()=>{O(E.error||new DOMException("AbortError","AbortError")),j()};E.addEventListener("complete",W),E.addEventListener("error",te),E.addEventListener("abort",te)});Rs.set(E,D)}(E),ad(E,function gf(){return Uc||(Uc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,fs):E)}function xr(E){if(E instanceof IDBRequest)return function pr(E){const D=new Promise((S,O)=>{const j=()=>{E.removeEventListener("success",W),E.removeEventListener("error",te)},W=()=>{S(xr(E.result)),j()},te=()=>{O(E.error),j()};E.addEventListener("success",W),E.addEventListener("error",te)});return D.then(S=>{S instanceof IDBCursor&&vu.set(S,E)}).catch(()=>{}),ma.set(D,E),D}(E);if(Ar.has(E))return Ar.get(E);const D=cd(E);return D!==E&&(Ar.set(E,D),ma.set(D,E)),D}const ir=E=>ma.get(E);function _u(E,D,{blocked:S,upgrade:O,blocking:j,terminated:W}={}){const te=indexedDB.open(E,D),$e=xr(te);return O&&te.addEventListener("upgradeneeded",He=>{O(xr(te.result),He.oldVersion,He.newVersion,xr(te.transaction))}),S&&te.addEventListener("blocked",()=>S()),$e.then(He=>{W&&He.addEventListener("close",()=>W()),j&&He.addEventListener("versionchange",()=>j())}).catch(()=>{}),$e}function ps(E,{blocked:D}={}){const S=indexedDB.deleteDatabase(E);return D&&S.addEventListener("blocked",()=>D()),xr(S).then(()=>{})}const Bc=["get","getKey","getAll","getAllKeys","count"],Ns=["put","add","delete","clear"],Bo=new Map;function ya(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(Bo.get(D))return Bo.get(D);const S=D.replace(/FromIndex$/,""),O=D!==S,j=Ns.includes(S);if(!(S in(O?IDBIndex:IDBObjectStore).prototype)||!j&&!Bc.includes(S))return;const W=function(){var te=(0,P.Z)(function*($e,...He){const st=this.transaction($e,j?"readwrite":"readonly");let Mt=st.store;return O&&(Mt=Mt.index(He.shift())),(yield Promise.all([Mt[S](...He),j&&st.done]))[0]});return function(He){return te.apply(this,arguments)}}();return Bo.set(D,W),W}!function gr(E){fs=E(fs)}(E=>({...E,get:(D,S,O)=>ya(D,S)||E.get(D,S,O),has:(D,S)=>!!ya(D,S)||E.has(D,S)}));const xt="/firebase-messaging-sw.js",va="/firebase-cloud-messaging-push-scope",ld="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",dd="https://fcmregistrations.googleapis.com/v1",wu="google.c.a.c_id",hd="google.c.a.c_l",Eu="google.c.a.ts",Sg="google.c.a.e";var he=(()=>{return(E=he||(he={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",he;var E})();function kt(E){const D=new Uint8Array(E);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _a(E){const S=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),O=atob(S),j=new Uint8Array(O.length);for(let W=0;W<O.length;++W)j[W]=O.charCodeAt(W);return j}const wa="fcm_token_details_db",sr=5,eo="fcm_token_object_Store";function $r(){return $r=(0,P.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(W=>W.name).includes(wa))return null;let D=null;return(yield _u(wa,sr,{upgrade:(O=(0,P.Z)(function*(j,W,te,$e){var He;if(W<2||!j.objectStoreNames.contains(eo))return;const st=$e.objectStore(eo),Mt=yield st.index("fcmSenderId").get(E);if(yield st.clear(),Mt)if(2===W){const Tt=Mt;if(!Tt.auth||!Tt.p256dh||!Tt.endpoint)return;D={token:Tt.fcmToken,createTime:null!==(He=Tt.createTime)&&void 0!==He?He:Date.now(),subscriptionOptions:{auth:Tt.auth,p256dh:Tt.p256dh,endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:"string"==typeof Tt.vapidKey?Tt.vapidKey:kt(Tt.vapidKey)}}}else if(3===W){const Tt=Mt;D={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:kt(Tt.auth),p256dh:kt(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:kt(Tt.vapidKey)}}}else if(4===W){const Tt=Mt;D={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:kt(Tt.auth),p256dh:kt(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:kt(Tt.vapidKey)}}}}),function(W,te,$e,He){return O.apply(this,arguments)})})).close(),yield ps(wa),yield ps("fcm_vapid_details_db"),yield ps("undefined"),function pd(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:D}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var O}),$r.apply(this,arguments)}const Du="firebase-messaging-database",Ag=1,gs="firebase-messaging-store";let Ea=null;function Jn(){return Ea||(Ea=_u(Du,Ag,{upgrade:(E,D)=>{0===D&&E.createObjectStore(gs)}})),Ea}function gi(E){return qi.apply(this,arguments)}function qi(){return qi=(0,P.Z)(function*(E){const D=Cu(E),O=yield(yield Jn()).transaction(gs).objectStore(gs).get(D);if(O)return O;{const j=yield function Iu(E){return $r.apply(this,arguments)}(E.appConfig.senderId);if(j)return yield to(E,j),j}}),qi.apply(this,arguments)}function to(E,D){return mi.apply(this,arguments)}function mi(){return(mi=(0,P.Z)(function*(E,D){const S=Cu(E),j=(yield Jn()).transaction(gs,"readwrite");return yield j.objectStore(gs).put(D,S),yield j.done,D})).apply(this,arguments)}function Ia(){return(Ia=(0,P.Z)(function*(E){const D=Cu(E),O=(yield Jn()).transaction(gs,"readwrite");yield O.objectStore(gs).delete(D),yield O.done})).apply(this,arguments)}function Cu({appConfig:E}){return E.appId}const Xn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function jo(E,D){return jc.apply(this,arguments)}function jc(){return(jc=(0,P.Z)(function*(E,D){const S=yield $c(E),O=yd(D),j={method:"POST",headers:S,body:JSON.stringify(O)};let W;try{W=yield(yield fetch(Da(E.appConfig),j)).json()}catch(te){throw Xn.create("token-subscribe-failed",{errorInfo:te?.toString()})}if(W.error)throw Xn.create("token-subscribe-failed",{errorInfo:W.error.message});if(!W.token)throw Xn.create("token-subscribe-no-token");return W.token})).apply(this,arguments)}function md(){return(md=(0,P.Z)(function*(E,D){const S=yield $c(E),O=yd(D.subscriptionOptions),j={method:"PATCH",headers:S,body:JSON.stringify(O)};let W;try{W=yield(yield fetch(`${Da(E.appConfig)}/${D.token}`,j)).json()}catch(te){throw Xn.create("token-update-failed",{errorInfo:te?.toString()})}if(W.error)throw Xn.create("token-update-failed",{errorInfo:W.error.message});if(!W.token)throw Xn.create("token-update-no-token");return W.token})).apply(this,arguments)}function Tu(E,D){return Su.apply(this,arguments)}function Su(){return(Su=(0,P.Z)(function*(E,D){const O={method:"DELETE",headers:yield $c(E)};try{const W=yield(yield fetch(`${Da(E.appConfig)}/${D}`,O)).json();if(W.error)throw Xn.create("token-unsubscribe-failed",{errorInfo:W.error.message})}catch(j){throw Xn.create("token-unsubscribe-failed",{errorInfo:j?.toString()})}})).apply(this,arguments)}function Da({projectId:E}){return`${dd}/projects/${E}/registrations`}function $c(E){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,P.Z)(function*({appConfig:E,installations:D}){const S=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${S}`})})).apply(this,arguments)}function yd({p256dh:E,auth:D,endpoint:S,vapidKey:O}){const j={web:{endpoint:S,auth:D,p256dh:E}};return O!==ld&&(j.web.applicationPubKey=O),j}const Au=6048e5;function xu(){return xu=(0,P.Z)(function*(E){const D=yield function vf(E,D){return vd.apply(this,arguments)}(E.swRegistration,E.vapidKey),S={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:D.endpoint,auth:kt(D.getKey("auth")),p256dh:kt(D.getKey("p256dh"))},O=yield gi(E.firebaseDependencies);if(O){if(function Mg(E,D){return D.vapidKey===E.vapidKey&&D.endpoint===E.endpoint&&D.auth===E.auth&&D.p256dh===E.p256dh}(O.subscriptionOptions,S))return Date.now()>=O.createTime+Au?function Tn(E,D){return ba.apply(this,arguments)}(E,{token:O.token,createTime:Date.now(),subscriptionOptions:S}):O.token;try{yield Tu(E.firebaseDependencies,O.token)}catch(j){console.warn(j)}return yf(E.firebaseDependencies,S)}return yf(E.firebaseDependencies,S)}),xu.apply(this,arguments)}function ms(){return ms=(0,P.Z)(function*(E){const D=yield gi(E.firebaseDependencies);D&&(yield Tu(E.firebaseDependencies,D.token),yield function gd(E){return Ia.apply(this,arguments)}(E.firebaseDependencies));const S=yield E.swRegistration.pushManager.getSubscription();return!S||S.unsubscribe()}),ms.apply(this,arguments)}function ba(){return ba=(0,P.Z)(function*(E,D){try{const S=yield function bu(E,D){return md.apply(this,arguments)}(E.firebaseDependencies,D),O=Object.assign(Object.assign({},D),{token:S,createTime:Date.now()});return yield to(E.firebaseDependencies,O),S}catch(S){throw yield function Dr(E){return ms.apply(this,arguments)}(E),S}}),ba.apply(this,arguments)}function yf(E,D){return Os.apply(this,arguments)}function Os(){return(Os=(0,P.Z)(function*(E,D){const O={token:yield jo(E,D),createTime:Date.now(),subscriptionOptions:D};return yield to(E,O),O.token})).apply(this,arguments)}function vd(){return(vd=(0,P.Z)(function*(E,D){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_a(D)})})).apply(this,arguments)}function Mu(E){const D={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function Hc(E,D){if(!D.notification)return;E.notification={};const S=D.notification.title;S&&(E.notification.title=S);const O=D.notification.body;O&&(E.notification.body=O);const j=D.notification.image;j&&(E.notification.image=j);const W=D.notification.icon;W&&(E.notification.icon=W)}(D,E),function Gc(E,D){D.data&&(E.data=D.data)}(D,E),function _d(E,D){var S,O,j,W,te;if(!(D.fcmOptions||null!==(S=D.notification)&&void 0!==S&&S.click_action))return;E.fcmOptions={};const $e=null!==(j=null===(O=D.fcmOptions)||void 0===O?void 0:O.link)&&void 0!==j?j:null===(W=D.notification)||void 0===W?void 0:W.click_action;$e&&(E.fcmOptions.link=$e);const He=null===(te=D.fcmOptions)||void 0===te?void 0:te.analytics_label;He&&(E.fcmOptions.analyticsLabel=He)}(D,E),D}function $o(E,D){const S=[];for(let O=0;O<E.length;O++)S.push(E.charAt(O)),O<D.length&&S.push(D.charAt(O));return S.join("")}function ys(E){return Xn.create("missing-app-config-values",{valueName:E})}$o("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),$o("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Rg{constructor(D,S,O){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const j=function Ho(E){if(!E||!E.options)throw ys("App Configuration Object");if(!E.name)throw ys("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:S}=E;for(const O of D)if(!S[O])throw ys(O);return{appName:E.name,projectId:S.projectId,apiKey:S.apiKey,appId:S.appId,senderId:S.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:j,installations:S,analyticsProvider:O}}_delete(){return Promise.resolve()}}function _f(E){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,P.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(xt,{scope:va}),E.swRegistration.update().catch(()=>{})}catch(D){throw Xn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Ta(){return(Ta=(0,P.Z)(function*(E,D){if(!D&&!E.swRegistration&&(yield _f(E)),D||!E.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Xn.create("invalid-sw-registration");E.swRegistration=D}})).apply(this,arguments)}function ro(){return(ro=(0,P.Z)(function*(E,D){D?E.vapidKey=D:E.vapidKey||(E.vapidKey=ld)})).apply(this,arguments)}function Go(){return Go=(0,P.Z)(function*(E,D){if(!navigator)throw Xn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Xn.create("permission-blocked");return yield function no(E,D){return ro.apply(this,arguments)}(E,D?.vapidKey),yield function sv(E,D){return Ta.apply(this,arguments)}(E,D?.serviceWorkerRegistration),function mf(E){return xu.apply(this,arguments)}(E)}),Go.apply(this,arguments)}function io(){return(io=(0,P.Z)(function*(E,D,S){const O=function so(E){switch(E){case he.NOTIFICATION_CLICKED:return"notification_open";case he.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(O,{message_id:S[wu],message_name:S[hd],message_time:S[Eu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function oo(){return oo=(0,P.Z)(function*(E,D){const S=D.data;if(!S.isFirebaseMessaging)return;E.onMessageHandler&&S.messageType===he.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Mu(S)):E.onMessageHandler.next(Mu(S)));const O=S.data;(function zc(E){return"object"==typeof E&&!!E&&wu in E})(O)&&"1"===O[Sg]&&(yield function qc(E,D,S){return io.apply(this,arguments)}(E,S.messageType,O))}),oo.apply(this,arguments)}const Ps="@firebase/messaging",ao=E=>{const D=new Rg(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",S=>function Ou(E,D){return oo.apply(this,arguments)}(D,S)),D},Pu=E=>{const D=E.getProvider("messaging").getImmediate();return{getToken:O=>function Nu(E,D){return Go.apply(this,arguments)}(D,O)}};function wf(){return ku.apply(this,arguments)}function ku(){return(ku=(0,P.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Sa(){(0,ie._registerComponent)(new oe.wA("messaging",ao,"PUBLIC")),(0,ie._registerComponent)(new oe.wA("messaging-internal",Pu,"PRIVATE")),(0,ie.registerVersion)(Ps,"0.12.4"),(0,ie.registerVersion)(Ps,"0.12.4","esm2017")}();const gn="analytics",Dd="firebase_id",Fu="origin",Zc=6e4,Lu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vu="https://www.googletagmanager.com/gtag/js",or=new me.Yd("@firebase/analytics"),Hn=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Kc(E){if(!E.startsWith(Vu)){const D=Hn.create("invalid-gtag-resource",{gtagURL:E});return or.warn(D.message),""}return E}function Aa(E){return Promise.all(E.map(D=>D.catch(S=>S)))}function lo(){return(lo=(0,P.Z)(function*(E,D,S,O,j,W){const te=O[j];try{if(te)yield D[te];else{const He=(yield Aa(S)).find(st=>st.measurementId===j);He&&(yield D[He.appId])}}catch($e){or.error($e)}E("config",j,W)})).apply(this,arguments)}function Ma(){return(Ma=(0,P.Z)(function*(E,D,S,O,j){try{let W=[];if(j&&j.send_to){let te=j.send_to;Array.isArray(te)||(te=[te]);const $e=yield Aa(S);for(const He of te){const st=$e.find(Tt=>Tt.measurementId===He),Mt=st&&D[st.appId];if(!Mt){W=[];break}W.push(Mt)}}0===W.length&&(W=Object.values(D)),yield Promise.all(W),E("event",O,j||{})}catch(W){or.error(W)}})).apply(this,arguments)}const Ra=30,fo=new class ho{constructor(D={},S=1e3){this.throttleMetadata=D,this.intervalMillis=S}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,S){this.throttleMetadata[D]=S}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Df(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function qt(){return(qt=(0,P.Z)(function*(E){var D;const{appId:S,apiKey:O}=E,j={method:"GET",headers:Df(O)},W=Lu.replace("{app-id}",S),te=yield fetch(W,j);if(200!==te.status&&304!==te.status){let $e="";try{const He=yield te.json();null!==(D=He.error)&&void 0!==D&&D.message&&($e=He.error.message)}catch{}throw Hn.create("config-fetch-failed",{httpStatus:te.status,responseMessage:$e})}return te.json()})).apply(this,arguments)}function Na(){return(Na=(0,P.Z)(function*(E,D=fo,S){const{appId:O,apiKey:j,measurementId:W}=E.options;if(!O)throw Hn.create("no-app-id");if(!j){if(W)return{measurementId:W,appId:O};throw Hn.create("no-api-key")}const te=D.getThrottleMetadata(O)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new av;return setTimeout((0,P.Z)(function*(){$e.abort()}),void 0!==S?S:Zc),Qc({appId:O,apiKey:j,measurementId:W},te,$e,D)})).apply(this,arguments)}function Qc(E,D,S){return Jc.apply(this,arguments)}function Jc(){return Jc=(0,P.Z)(function*(E,{throttleEndTimeMillis:D,backoffCount:S},O,j=fo){var W;const{appId:te,measurementId:$e}=E;try{yield function ov(E,D){return new Promise((S,O)=>{const j=Math.max(D-Date.now(),0),W=setTimeout(S,j);E.addEventListener(()=>{clearTimeout(W),O(Hn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(O,D)}catch(He){if($e)return or.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${$e} provided in the "measurementId" field in the local Firebase config. [${He?.message}]`),{appId:te,measurementId:$e};throw He}try{const He=yield function Cd(E){return qt.apply(this,arguments)}(E);return j.deleteThrottleMetadata(te),He}catch(He){const st=He;if(!function Cf(E){if(!(E instanceof se.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(st)){if(j.deleteThrottleMetadata(te),$e)return or.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${$e} provided in the "measurementId" field in the local Firebase config. [${st?.message}]`),{appId:te,measurementId:$e};throw He}const Mt=503===Number(null===(W=st?.customData)||void 0===W?void 0:W.httpStatus)?(0,se.$s)(S,j.intervalMillis,Ra):(0,se.$s)(S,j.intervalMillis),Tt={throttleEndTimeMillis:Date.now()+Mt,backoffCount:S+1};return j.setThrottleMetadata(te,Tt),or.debug(`Calling attemptFetch again in ${Mt} millis`),Qc(E,Tt,O,j)}}),Jc.apply(this,arguments)}class av{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let po,Sf;function bf(){return(bf=(0,P.Z)(function*(E,D,S,O,j){if(j&&j.global)E("event",S,O);else{const W=yield D;E("event",S,Object.assign(Object.assign({},O),{send_to:W}))}})).apply(this,arguments)}function Mr(){return(Mr=(0,P.Z)(function*(){if(!(0,se.hl)())return or.warn(Hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(E){return or.warn(Hn.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ai(){return Ai=(0,P.Z)(function*(E,D,S,O,j,W,te){var $e;const He=function Ng(E){return Na.apply(this,arguments)}(E);He.then(Gn=>{S[Gn.measurementId]=Gn.appId,E.options.measurementId&&Gn.measurementId!==E.options.measurementId&&or.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${Gn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Gn=>or.error(Gn)),D.push(He);const st=function Hr(){return Mr.apply(this,arguments)}().then(Gn=>{if(Gn)return O.getId()}),[Mt,Tt]=yield Promise.all([He,st]);(function Zo(E){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(Vu)&&S.src.includes(E))return S;return null})(W)||function _s(E,D){const S=function xa(E,D){let S;return window.trustedTypes&&(S=window.trustedTypes.createPolicy(E,D)),S}("firebase-js-sdk-policy",{createScriptURL:Kc}),O=document.createElement("script"),j=`${Vu}?l=${E}&id=${D}`;O.src=S?S?.createScriptURL(j):j,O.async=!0,document.head.appendChild(O)}(W,Mt.measurementId),Sf&&(j("consent","default",Sf),function el(E){Sf=E}(void 0)),j("js",new Date);const yi=null!==($e=te?.config)&&void 0!==$e?$e:{};return yi[Fu]="firebase",yi.update=!0,null!=Tt&&(yi[Dd]=Tt),j("config",Mt.measurementId,yi),po&&(j("set",po),function Hu(E){po=E}(void 0)),Mt.measurementId}),Ai.apply(this,arguments)}class en{constructor(D){this.app=D}_delete(){return delete et[this.app.options.appId],Promise.resolve()}}let et={},Zi=[];const bd={};let mr,mn,mo="dataLayer",yo="gtag",Sn=!1;function Gu(E,D,S){!function Pa(){const E=[];if((0,se.ru)()&&E.push("This is a browser extension environment."),(0,se.zI)()||E.push("Cookies are not available."),E.length>0){const D=E.map((O,j)=>`(${j+1}) ${O}`).join(" "),S=Hn.create("invalid-analytics-context",{errorInfo:D});or.warn(S.message)}}();const O=E.options.appId;if(!O)throw Hn.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Hn.create("no-api-key");or.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=et[O])throw Hn.create("already-exists",{id:O});if(!Sn){!function Ef(E){let D=[];Array.isArray(window[E])?D=window[E]:window[E]=D}(mo);const{wrappedGtag:W,gtagCore:te}=function ks(E,D,S,O,j){let W=function(...te){window[O].push(arguments)};return window[j]&&"function"==typeof window[j]&&(W=window[j]),window[j]=function Wo(E,D,S,O){function W(){return W=(0,P.Z)(function*(te,...$e){try{if("event"===te){const[He,st]=$e;yield function Yc(E,D,S,O,j){return Ma.apply(this,arguments)}(E,D,S,He,st)}else if("config"===te){const[He,st]=$e;yield function Uu(E,D,S,O,j,W){return lo.apply(this,arguments)}(E,D,S,O,He,st)}else if("consent"===te){const[He]=$e;E("consent","update",He)}else if("get"===te){const[He,st,Mt]=$e;E("get",He,st,Mt)}else if("set"===te){const[He]=$e;E("set",He)}else E(te,...$e)}catch(He){or.error(He)}}),W.apply(this,arguments)}return function j(te){return W.apply(this,arguments)}}(W,E,D,S),{gtagCore:W,wrappedGtag:window[j]}}(et,Zi,bd,mo,yo);mn=W,mr=te,Sn=!0}return et[O]=function Rr(E,D,S,O,j,W,te){return Ai.apply(this,arguments)}(E,Zi,bd,D,mr,mo,S),new en(E)}function Wu(){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,P.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const Yu="@firebase/analytics";!function ur(){(0,ie._registerComponent)(new oe.wA(gn,(D,{options:S})=>Gu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,ie._registerComponent)(new oe.wA("analytics-internal",function E(D){try{const S=D.getProvider(gn).getImmediate();return{logEvent:(O,j,W)=>function Yi(E,D,S,O){E=(0,se.m9)(E),function uv(E,D,S,O,j){return bf.apply(this,arguments)}(mn,et[E.app.options.appId],D,S,O).catch(j=>or.error(j))}(S,O,j,W)}}catch(S){throw Hn.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,ie.registerVersion)(Yu,"0.10.0"),(0,ie.registerVersion)(Yu,"0.10.0","esm2017")}();var Qu=k(4408),Xu=k(7565);const Af=new class nl extends Xu.v{}(class Ju extends Qu.o{constructor(D,S){super(D,S),this.scheduler=D,this.work=S}schedule(D,S=0){return S>0?super.schedule(D,S):(this.delay=S,this.state=D,this.scheduler.flush(this),this)}execute(D,S){return S>0||this.closed?super.execute(D,S):this._execute(D,S)}requestAsyncId(D,S,O=0){return null!=O&&O>0||null==O&&this.delay>0?super.requestAsyncId(D,S,O):(D.flush(this),0)}});var xf=k(4986),Mf=k(8505),Td=k(9468),ec=k(5363);const Sd=new h.GfV("7.5.0"),Fa="__angularfire_symbol__analyticsIsSupportedValue",il="__angularfire_symbol__analyticsIsSupported",Rf="__angularfire_symbol__remoteConfigIsSupportedValue",La="__angularfire_symbol__remoteConfigIsSupported",Ad="__angularfire_symbol__messagingIsSupportedValue",xd="__angularfire_symbol__messagingIsSupported";function Yt(E,D,S){if(D){if(1===D.length)return D[0];const W=D.filter(te=>te.app===S);if(1===W.length)return W[0]}return S.container.getProvider(E).getImmediate({optional:!0})}globalThis[il]||(globalThis[il]=Wu().then(E=>globalThis[Fa]=E).catch(()=>globalThis[Fa]=!1)),globalThis[xd]||(globalThis[xd]=wf().then(E=>globalThis[Ad]=E).catch(()=>globalThis[Ad]=!1)),globalThis[La]||(globalThis[La]=Vc().then(E=>globalThis[Rf]=E).catch(()=>globalThis[Rf]=!1));const Qi=(E,D)=>{const S=D?[D]:(0,Q.C6)(),O=[];return S.forEach(j=>{j.container.getProvider(E).instances.forEach(te=>{O.includes(te)||O.push(te)})}),O};function xi(){}class tc{constructor(D,S=Af){this.zone=D,this.delegate=S}now(){return this.delegate.now()}schedule(D,S,O){const j=this.zone;return this.delegate.schedule(function(te){j.runGuarded(()=>{D.apply(this,[te])})},S,O)}}class Md{constructor(D){this.zone=D,this.task=null}call(D,S){const O=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xi,{},xi,xi)),S.pipe((0,Mf.b)({next:O,complete:O,error:O})).subscribe(D).add(O)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let tn=(()=>{class E{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new tc(Zone.current)),this.insideAngular=S.run(()=>new tc(Zone.current,xf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(S){return new(S||E)(h.LFG(h.R0b))},E.\u0275prov=h.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function _o(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Nd(E){return _o(),function Od(E){return function(S){return(S=S.lift(new Md(E.ngZone))).pipe((0,Td.R)(E.outsideAngular),(0,ec.Q)(E.insideAngular))}}(_o())(E)}},2090:(gt,xe,k)=>{k.d(xe,{$s:()=>Ii,BH:()=>De,G6:()=>Bi,L:()=>pe,LL:()=>be,Pz:()=>Ie,Sg:()=>qe,UG:()=>ne,US:()=>oe,ZB:()=>q,ZR:()=>Ce,aH:()=>Pe,b$:()=>Ut,eu:()=>le,hl:()=>ue,jU:()=>Dt,m9:()=>Br,ne:()=>on,pd:()=>ji,r3:()=>En,ru:()=>Xe,tV:()=>$,uI:()=>nt,vZ:()=>ft,w1:()=>Ss,xO:()=>Er,xb:()=>br,z$:()=>Fe,zI:()=>fe,zd:()=>Vr});const ie=function(V){const L=[];let z=0;for(let ve=0;ve<V.length;ve++){let J=V.charCodeAt(ve);J<128?L[z++]=J:J<2048?(L[z++]=J>>6|192,L[z++]=63&J|128):55296==(64512&J)&&ve+1<V.length&&56320==(64512&V.charCodeAt(ve+1))?(J=65536+((1023&J)<<10)+(1023&V.charCodeAt(++ve)),L[z++]=J>>18|240,L[z++]=J>>12&63|128,L[z++]=J>>6&63|128,L[z++]=63&J|128):(L[z++]=J>>12|224,L[z++]=J>>6&63|128,L[z++]=63&J|128)}return L},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,L){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let J=0;J<V.length;J+=3){const Le=V[J],Ct=J+1<V.length,Zt=Ct?V[J+1]:0,jn=J+2<V.length,bn=jn?V[J+2]:0;let Sr=(15&Zt)<<2|bn>>6,Ci=63&bn;jn||(Ci=64,Ct||(Sr=64)),ve.push(z[Le>>2],z[(3&Le)<<4|Zt>>4],z[Sr],z[Ci])}return ve.join("")},encodeString(V,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(V):this.encodeByteArray(ie(V),L)},decodeString(V,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(V):function(V){const L=[];let z=0,ve=0;for(;z<V.length;){const J=V[z++];if(J<128)L[ve++]=String.fromCharCode(J);else if(J>191&&J<224){const Le=V[z++];L[ve++]=String.fromCharCode((31&J)<<6|63&Le)}else if(J>239&&J<365){const jn=((7&J)<<18|(63&V[z++])<<12|(63&V[z++])<<6|63&V[z++])-65536;L[ve++]=String.fromCharCode(55296+(jn>>10)),L[ve++]=String.fromCharCode(56320+(1023&jn))}else{const Le=V[z++],Ct=V[z++];L[ve++]=String.fromCharCode((15&J)<<12|(63&Le)<<6|63&Ct)}}return L.join("")}(this.decodeStringToByteArray(V,L))},decodeStringToByteArray(V,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let J=0;J<V.length;){const Le=z[V.charAt(J++)],Zt=J<V.length?z[V.charAt(J)]:0;++J;const bn=J<V.length?z[V.charAt(J)]:64;++J;const jt=J<V.length?z[V.charAt(J)]:64;if(++J,null==Le||null==Zt||null==bn||null==jt)throw new me;ve.push(Le<<2|Zt>>4),64!==bn&&(ve.push(Zt<<4&240|bn>>2),64!==jt&&ve.push(bn<<6&192|jt))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class me extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pe=function(V){return function(V){const L=ie(V);return oe.encodeByteArray(L,!0)}(V).replace(/\./g,"")},$=function(V){try{return oe.decodeString(V,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function q(V,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!Ge(z)||(V[z]=q(V[z],L[z]));return V}function Ge(V){return"__proto__"!==V}const Ne=()=>{try{return function Ae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=V&&$(V[1]);return L&&JSON.parse(L)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},Pe=()=>{var V;return null===(V=Ne())||void 0===V?void 0:V.config},Ie=V=>{var L;return null===(L=Ne())||void 0===L?void 0:L[`_${V}`]};class De{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,ve)=>{z?this.reject(z):this.resolve(ve),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,ve))}}}function qe(V,L){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=L||"demo-project",J=V.iat||0,Le=V.sub||V.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ct=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:J,exp:J+3600,auth_time:J,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},V);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Ct)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function ne(){var V;const L=null===(V=Ne())||void 0===V?void 0:V.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Dt(){return"object"==typeof self&&self.self===self}function Xe(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Ut(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ss(){const V=Fe();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function Bi(){return!ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ue(){try{return"object"==typeof indexedDB}catch{return!1}}function le(){return new Promise((V,L)=>{try{let z=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(ve);J.onsuccess=()=>{J.result.close(),z||self.indexedDB.deleteDatabase(ve),V(!0)},J.onupgradeneeded=()=>{z=!1},J.onerror=()=>{var Le;L((null===(Le=J.error)||void 0===Le?void 0:Le.message)||"")}}catch(z){L(z)}})}function fe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ce extends Error{constructor(L,z,ve){super(z),this.code=L,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,be.prototype.create)}}class be{constructor(L,z,ve){this.service=L,this.serviceName=z,this.errors=ve}create(L,...z){const ve=z[0]||{},J=`${this.service}/${L}`,Le=this.errors[L],Ct=Le?function lt(V,L){return V.replace(at,(z,ve)=>{const J=L[ve];return null!=J?String(J):`<${ve}?>`})}(Le,ve):"Error";return new Ce(J,`${this.serviceName}: ${Ct} (${J}).`,ve)}}const at=/\{\$([^}]+)}/g;function En(V,L){return Object.prototype.hasOwnProperty.call(V,L)}function br(V){for(const L in V)if(Object.prototype.hasOwnProperty.call(V,L))return!1;return!0}function ft(V,L){if(V===L)return!0;const z=Object.keys(V),ve=Object.keys(L);for(const J of z){if(!ve.includes(J))return!1;const Le=V[J],Ct=L[J];if(Kr(Le)&&Kr(Ct)){if(!ft(Le,Ct))return!1}else if(Le!==Ct)return!1}for(const J of ve)if(!z.includes(J))return!1;return!0}function Kr(V){return null!==V&&"object"==typeof V}function Er(V){const L=[];for(const[z,ve]of Object.entries(V))Array.isArray(ve)?ve.forEach(J=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(J))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(ve));return L.length?"&"+L.join("&"):""}function Vr(V){const L={};return V.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[J,Le]=ve.split("=");L[decodeURIComponent(J)]=decodeURIComponent(Le)}}),L}function ji(V){const L=V.indexOf("?");if(!L)return"";const z=V.indexOf("#",L);return V.substring(L,z>0?z:void 0)}function on(V,L){const z=new rt(V,L);return z.subscribe.bind(z)}class rt{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(ve=>{this.error(ve)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,ve){let J;if(void 0===L&&void 0===z&&void 0===ve)throw new Error("Missing Observer.");J=function ci(V,L){if("object"!=typeof V||null===V)return!1;for(const z of L)if(z in V&&"function"==typeof V[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:ve},void 0===J.next&&(J.next=Yr),void 0===J.error&&(J.error=Yr),void 0===J.complete&&(J.complete=Yr);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),Le}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yr(){}const an=1e3,li=2,Ln=144e5,Kn=.5;function Ii(V,L=an,z=li){const ve=L*Math.pow(z,V),J=Math.round(Kn*ve*(Math.random()-.5)*2);return Math.min(Ln,ve+J)}function Br(V){return V&&V._delegate?V._delegate:V}},5272:(gt,xe,k)=>{var h=k(4650);let Q=null;function P(){return Q}class se{}const oe=new h.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ee(){return(0,h.LFG)($)}()},providedIn:"platform"}),n})();const pe=new h.OlP("Location Initialized");let $=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){B()?this._history.pushState(t,r,s):this._location.hash=s}replaceState(t,r,s){B()?this._history.replaceState(t,r,s):this._location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function q(){return new $((0,h.LFG)(oe))}()},providedIn:"platform"}),n})();function B(){return!!window.history.pushState}function Ge(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ae(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function We(n){return n&&"?"!==n[0]?"?"+n:n}let ot=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Ne)},providedIn:"root"}),n})();const ge=new h.OlP("appBaseHref");let Ne=(()=>{class n extends ot{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ge(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+We(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+We(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+We(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me),h.LFG(ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oe=(()=>{class n extends ot{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ge(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+We(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+We(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me),h.LFG(ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),je=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function qe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ae(De(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+We(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,De(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=We,n.joinWithSlash=Ge,n.stripTrailingSlash=Ae,n.\u0275fac=function(t){return new(t||n)(h.LFG(ot))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Pe(){return new je((0,h.LFG)(ot))}()},providedIn:"root"}),n})();function De(n){return n.replace(/\/index.html$/,"")}const di=/\s+/,Ze=[];let Rt=(()=>{class n{constructor(t,r,s,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=u,this.initialClasses=Ze,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(di):Ze}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(di):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const s=this.stateMap.get(t);void 0!==s?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],s=t[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(di).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Qn{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Oo=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Qn(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),Vn(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Vn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Vn(n,e){n.context.$implicit=e.item}let pi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const od="server";function hs(n){return n===od}let ga=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new ad((0,h.LFG)(oe),window)}),n})();class ad{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ms(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Uc(this.window.history)||Uc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Uc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class _d extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class zc extends _d{static makeCurrent(){!function ie(n){Q||(Q=n)}(new zc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ho(){return $o=$o||document.querySelector("base"),$o?$o.getAttribute("href"):null}();return null==t?null:function Rg(n){ys=ys||document.createElement("a"),ys.setAttribute("href",n);const e=ys.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$o=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function No(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let ys,$o=null;const _f=new h.OlP("TRANSITION_ID"),sv=[{provide:h.ip1,useFactory:function Ru(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=P(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[_f,oe,h.zs3],multi:!0}];let no=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ro=new h.OlP("EventManagerPlugins");let Nu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const l=s[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ro),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Go{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=P().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let qc=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const s=this.usageCount;let u=s.get(t)??0;return u+=r,u>0?s.set(t,u):s.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),io=(()=>{class n extends qc{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const s=this.doc.createElement("style");s.textContent=r,t.appendChild(s);const u=this.styleRef.get(r);u?u.push(s):this.styleRef.set(r,[s])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const so={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ou=/%COMP%/g,Sa=new h.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ed(n,e){return e.flat(100).map(t=>t.replace(Ou,n))}function uo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ti=(()=>{class n{constructor(t,r,s,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new vs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const s=this.getOrCreateRenderer(t,r);return s instanceof Dd?s.applyToHost(t):s instanceof gn&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const l=this.eventManager,m=this.sharedStylesHost,w=this.removeStylesOnCompDestory;switch(r.encapsulation){case h.ifc.Emulated:u=new Dd(l,m,r,this.appId,w);break;case h.ifc.ShadowDom:return new Id(l,m,t,r);default:u=new gn(l,m,r,w)}u.onDestroy=()=>s.delete(r.id),s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Nu),h.LFG(io),h.LFG(h.AFp),h.LFG(Sa))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class vs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(so[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(qo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=so[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=so[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,s&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,uo(r)):this.eventManager.addEventListener(e,t,uo(r))}}function qo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Id extends vs{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ed(s.id,s.styles);for(const l of u){const m=document.createElement("style");m.textContent=l,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class gn extends vs{constructor(e,t,r,s,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=s,this.rendererUsageCount=0,this.styles=Ed(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Dd extends gn{constructor(e,t,r,s,u){const l=s+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function wf(n){return"_ngcontent-%COMP%".replace(Ou,n)}(l),this.hostAttr=function ku(n){return"_nghost-%COMP%".replace(Ou,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Fu=(()=>{class n extends Go{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Zc=["alt","control","meta","shift"],Lu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let or=(()=>{class n extends Go{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),Zc.forEach(b=>{const A=r.indexOf(b);A>-1&&(r.splice(A,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=s,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let s=Lu[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Zc.forEach(l=>{l!==s&&(0,Vu[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Yc=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function _s(){zc.makeCurrent()},multi:!0},{provide:oe,useFactory:function Uu(){return(0,h.RDi)(document),document},deps:[]}]),Ma=new h.OlP(""),Wo=[{provide:h.rWj,useClass:class Ta{addToWindow(e){h.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const s=h.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],ks=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Ef(){return new h.qLn},deps:[]},{provide:ro,useClass:Fu,multi:!0,deps:[oe,h.R0b,h.Lbi]},{provide:ro,useClass:or,multi:!0,deps:[oe]},{provide:Ti,useClass:Ti,deps:[Nu,io,h.AFp,Sa]},{provide:h.FYo,useExisting:Ti},{provide:qc,useExisting:io},{provide:io,useClass:io,deps:[oe]},{provide:Nu,useClass:Nu,deps:[ro,h.R0b]},{provide:class yu{},useClass:no,deps:[]},[]];let Zo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:_f,useExisting:h.AFp},sv]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ma,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...ks,...Wo],imports:[pi,h.hGG]}),n})(),Df=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function fo(){return new Df((0,h.LFG)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Mr=k(2011),Rr=k(7579),Ai=k(7669),en=k(8996);function et(...n){const e=(0,Ai.yG)(n);return(0,en.D)(n,e)}var Zi=k(9751),bd=k(6451),mo=k(5363),yo=k(8421),mr=k(4482),mn=k(5403);function Sn(n,e){return(0,mr.e)((t,r)=>{let s=null,u=0,l=!1;const m=()=>l&&!s&&r.complete();t.subscribe((0,mn.x)(r,w=>{s?.unsubscribe();let b=0;const A=u++;(0,yo.Xf)(n(w,A)).subscribe(s=(0,mn.x)(r,N=>r.next(e?e(w,N,A,b++):N),()=>{s=null,m()}))},()=>{l=!0,m()}))})}var yt=k(4004),Pa=k(6063);class Gu extends Rr.x{constructor(e=1/0,t=1/0,r=Pa.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var zu=k(3099);function qu(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,zu.B)({connector:()=>new Gu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}const Ki=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function yr(n,e){return(0,mr.e)((t,r)=>{let s=0;t.subscribe((0,mn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var Fs=k(515);function Ls(n){return n<=0?()=>Fs.E:(0,mr.e)((e,t)=>{let r=0;e.subscribe((0,mn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function ka(n){return(0,mr.e)((e,t)=>{let r=!1;e.subscribe((0,mn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Vs(n=Ko){return(0,mr.e)((e,t)=>{let r=!1;e.subscribe((0,mn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Ko(){return new Ki}var Zu=k(4671);function Yi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yr((s,u)=>n(s,u,r)):Zu.y,Ls(1),t?ka(e):Vs(()=>new Ki))}var Ku=k(576);function Yu(n,e){return(0,Ku.m)(e)?Sn(()=>n,e):Sn(()=>n)}var tl=k(9468),ur=k(4976);k(259);var ye=k(5861),vo=k(6881),sl=k(4859),Yt=k(2090),Qi=k(1877);const xi=new Map,tc={activated:!1,tokenObservers:[]},Md={initialized:!1,enabled:!1};function tn(n){return xi.get(n)||Object.assign({},tc)}function wo(){return Md}const ws="https://content-firebaseappcheck.googleapis.com/v1",Nd="exchangeDebugToken",Od={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class kf{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Yt.BH,yield function E(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Yt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const S=new Yt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function j(n){if(!tn(n).activated)throw S.create("use-before-activation",{appName:n.name})}function $e(n,e){return He.apply(this,arguments)}function He(){return(He=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const N=yield s.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(N){throw S.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw S.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(N){throw S.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw S.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+b,issuedAtTimeMillis:A}})).apply(this,arguments)}function Tt(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${ws}/projects/${t}/apps/${r}:${Nd}?key=${s}`,body:{debug_token:e}}}const yi="firebase-app-check-database",Gn=1,Ji="firebase-app-check-store";let Xi=null;function cv(n,e){return al.apply(this,arguments)}function al(){return(al=(0,ye.Z)(function*(n,e){const r=(yield function vi(){return Xi||(Xi=new Promise((n,e)=>{try{const t=indexedDB.open(yi,Gn);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(S.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ji,{keyPath:"compositeKey"})}}catch(t){e(S.create("storage-open",{originalErrorMessage:t?.message}))}}),Xi)}()).transaction(Ji,"readwrite"),u=r.objectStore(Ji).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var b;m(S.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Es=new Qi.Yd("@firebase/app-check");function Vf(n,e){return(0,Yt.hl)()?function nc(n,e){return cv(function Pd(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Es.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Fd(){return wo().enabled}function jf(){return Og.apply(this,arguments)}function Og(){return(Og=(0,ye.Z)(function*(){const n=wo();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const lv={error:"UNKNOWN_ERROR"};function Pg(n){return Yt.US.encodeString(JSON.stringify(n),!1)}function Qo(n){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,ye.Z)(function*(n,e=!1){const t=n.app;j(t);const r=tn(t);let u,s=r.token;if(s&&!ja(s)&&(r.token=void 0,s=void 0),!s){const w=yield r.cachedTokenPromise;w&&(ja(w)?s=w:yield Vf(t,void 0))}if(!e&&s&&ja(s))return{token:s.token};let m,l=!1;if(Fd()){r.exchangeTokenPromise||(r.exchangeTokenPromise=$e(Tt(t,yield jf()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield Vf(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield tn(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?Es.warn(w.message):Es.error(w),u=w}return s?u?m=ja(s)?{token:s.token,internalError:u}:kg(u):(m={token:s.token},r.token=s,yield Vf(t,s)):m=kg(u),l&&function cl(n,e){const t=tn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m})).apply(this,arguments)}function rc(n){return $f.apply(this,arguments)}function $f(){return($f=(0,ye.Z)(function*(n){const e=n.app;j(e);const{provider:t}=tn(e);if(Fd()){const r=yield jf(),{token:s}=yield $e(Tt(e,r),n.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function ic(n,e){const t=tn(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Gf(n){const{app:e}=n,t=tn(e);let r=t.tokenRefresher;r||(r=function Ba(n){const{app:e}=n;return new kf((0,ye.Z)(function*(){let r;if(r=tn(e).token?yield Qo(n,!0):yield Qo(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=tn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Od.RETRIAL_MIN_WAIT,Od.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ja(n){return n.expireTimeMillis-Date.now()>0}function kg(n){return{token:Pg(lv),error:n}}class Iw{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=tn(this.app);for(const t of e)ic(this.app,t.next);return Promise.resolve()}}const oc="app-check-internal";!function $g(){(0,vo._registerComponent)(new sl.wA("app-check",n=>function Vd(n,e){return new Iw(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(oc).initialize()})),(0,vo._registerComponent)(new sl.wA(oc,n=>function dv(n){return{getToken:e=>Qo(n,e),getLimitedUseToken:()=>rc(n),addTokenListener:e=>function Hf(n,e,t,r){const{app:s}=n,u=tn(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&ja(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),Gf(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Gf(n))}(n,"INTERNAL",e),removeTokenListener:e=>ic(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,vo.registerVersion)("@firebase/app-check","0.8.0")}();class pl{constructor(){return(0,ur.vb)("app-check")}}typeof window<"u"&&window;var _i=k(9260);const ml=new h.OlP("angularfire2.auth.use-emulator"),Wg=new h.OlP("angularfire2.auth.settings"),Us=new h.OlP("angularfire2.auth.tenant-id"),ac=new h.OlP("angularfire2.auth.langugage-code"),ep=new h.OlP("angularfire2.auth.use-device-language"),yl=new h.OlP("angularfire.auth.persistence"),Bs=(n,e,t,r,s,u,l,m)=>(0,Mr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),l)for(const[b,A]of Object.entries(l))w.settings[b]=A;return m&&w.setPersistence(m),w},[t,r,s,u,l,m]);let js=(()=>{class n{constructor(t,r,s,u,l,m,w,b,A,N,H,Y){const _e=new Rr.x,Ue=et(void 0).pipe((0,mo.Q)(l.outsideAngular),Sn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2644)))),(0,yt.U)(()=>(0,Mr.on)(t,u,r)),(0,yt.U)(Ve=>Bs(Ve,u,m,b,A,N,w,H)),qu({bufferSize:1,refCount:!1}));if(hs(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=et(null);else{Ue.pipe(Yi()).subscribe();const It=Ue.pipe(Sn(Pt=>Pt.getRedirectResult().then(Ht=>Ht,()=>null)),ur.iC,qu({bufferSize:1,refCount:!1})),bt=Ue.pipe(Sn(Pt=>new Zi.y(Ht=>({unsubscribe:u.runOutsideAngular(()=>Pt.onAuthStateChanged(dn=>Ht.next(dn),dn=>Ht.error(dn),()=>Ht.complete()))})))),_t=Ue.pipe(Sn(Pt=>new Zi.y(Ht=>({unsubscribe:u.runOutsideAngular(()=>Pt.onIdTokenChanged(dn=>Ht.next(dn),dn=>Ht.error(dn),()=>Ht.complete()))}))));this.authState=It.pipe(Yu(bt),(0,tl.R)(l.outsideAngular),(0,mo.Q)(l.insideAngular)),this.user=It.pipe(Yu(_t),(0,tl.R)(l.outsideAngular),(0,mo.Q)(l.insideAngular)),this.idToken=this.user.pipe(Sn(Pt=>Pt?(0,en.D)(Pt.getIdToken()):et(null))),this.idTokenResult=this.user.pipe(Sn(Pt=>Pt?(0,en.D)(Pt.getIdTokenResult()):et(null))),this.credential=(0,bd.T)(It,_e,this.authState.pipe(yr(Pt=>!Pt))).pipe((0,yt.U)(Pt=>Pt?.user?Pt:null),(0,tl.R)(l.outsideAngular),(0,mo.Q)(l.insideAngular))}return(0,Mr.pX)(this,Ue,u,{spy:{apply:(Ve,It,bt)=>{(Ve.startsWith("signIn")||Ve.startsWith("createUser"))&&bt.then(_t=>_e.next(_t))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Mr.Dh),h.LFG(Mr.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(ur.HU),h.LFG(ml,8),h.LFG(Wg,8),h.LFG(Us,8),h.LFG(ac,8),h.LFG(ep,8),h.LFG(yl,8),h.LFG(pl,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Zg=(()=>{class n{constructor(){_i.Z.registerVersion("angularfire",ur.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[js]}),n})();var Kg=k(4986),uc=k(8189);function y(...n){return function Aw(){return(0,uc.J)(1)}()((0,en.D)(n,(0,Ai.yG)(n)))}function f(...n){const e=(0,Ai.yG)(n);return(0,mr.e)((t,r)=>{(e?y(n,t,e):y(n,t)).subscribe(r)})}function p(){return(0,mr.e)((n,e)=>{let t,r=!1;n.subscribe((0,mn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function T(n,e){return(0,mr.e)(function _(n,e,t,r,s){return(u,l)=>{let m=t,w=e,b=0;u.subscribe((0,mn.x)(l,A=>{const N=b++;w=m?n(w,A,N):(m=!0,A),r&&l.next(w)},s&&(()=>{m&&l.next(w),l.complete()})))}}(n,e,arguments.length>=2,!0))}function U(n,e){return n===e}k(2644);var ce,Me=k(3942),ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ke={},vn=vn||{},vt=ze||self;function Eo(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function cc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var jd="closure_uid_"+(1e9*Math.random()>>>0),Yg=0;function $d(n,e,t){return n.call.apply(n.bind,arguments)}function tp(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Nr(n,e,t){return(Nr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$d:tp).apply(null,arguments)}function lc(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function vr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[s].apply(r,l)}}function ea(){this.s=this.s,this.o=this.o}ea.prototype.s=!1,ea.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function zn(n){Object.prototype.hasOwnProperty.call(n,jd)&&n[jd]||(n[jd]=++Yg)}(this)},ea.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function xw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Gd(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Eo(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function Gr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Gr.prototype.h=function(){this.defaultPrevented=!0};var Mw=function(){if(!vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{vt.addEventListener("test",()=>{},e),vt.removeEventListener("test",()=>{},e)}catch{}return n}();function zd(n){return/^[\s\xa0]*$/.test(n)}function np(){var n=vt.navigator;return n&&(n=n.userAgent)?n:""}function za(n){return-1!=np().indexOf(n)}function mv(n){return mv[" "](n),n}mv[" "]=function(){};var Qg,n,Nw=za("Opera"),dc=za("Trident")||za("MSIE"),TC=za("Edge"),rp=TC||dc,Ow=za("Gecko")&&!(-1!=np().toLowerCase().indexOf("webkit")&&!za("Edge"))&&!(za("Trident")||za("MSIE"))&&!za("Edge"),yv=-1!=np().toLowerCase().indexOf("webkit")&&!za("Edge");function vv(){var n=vt.document;return n?n.documentMode:void 0}e:{var qa="",_v=(n=np(),Ow?/rv:([^\);]+)(\)|;)/.exec(n):TC?/Edge\/([\d\.]+)/.exec(n):dc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):yv?/WebKit\/(\S+)/.exec(n):Nw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(_v&&(qa=_v?_v[1]:""),dc){var ip=vv();if(null!=ip&&ip>parseFloat(qa)){Qg=String(ip);break e}}Qg=qa}var wv=vt.document&&dc&&(vv()||parseInt(Qg,10))||void 0;function hc(n,e){if(Gr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ow){e:{try{mv(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:vl[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&hc.$.h.call(this)}}vr(hc,Gr);var vl={2:"touch",3:"pen",4:"mouse"};hc.prototype.h=function(){hc.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Wd="closure_listenable_"+(1e6*Math.random()|0),Ev=0;function SC(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++Ev,this.fa=this.ia=!1}function Jg(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Xg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function kw(n){const e={};for(const t in n)e[t]=n[t];return e}const Fw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lw(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<Fw.length;u++)t=Fw[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Kd(n){this.src=n,this.g={},this.h=0}function Iv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=gv(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Jg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function em(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}Kd.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=em(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new SC(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var Dv="closure_lm_"+(1e6*Math.random()|0),tm={};function AC(n,e,t,r,s){if(r&&r.once)return Uw(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)AC(n,e[u],t,r,s);return null}return t=Tv(t),n&&n[Wd]?n.O(e,t,cc(r)?!!r.capture:!!r,s):Vw(n,e,t,!1,r,s)}function Vw(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=cc(s)?!!s.capture:!!s,m=Cv(n);if(m||(n[Dv]=m=new Kd(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function sp(){const e=jw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Mw||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Bw(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Uw(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Uw(n,e[u],t,r,s);return null}return t=Tv(t),n&&n[Wd]?n.P(e,t,cc(r)?!!r.capture:!!r,s):Vw(n,e,t,!0,r,s)}function _l(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)_l(n,e[u],t,r,s);else r=cc(r)?!!r.capture:!!r,t=Tv(t),n&&n[Wd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=em(u=n.g[e],t,r,s))&&(Jg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Cv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=em(e,t,r,s)),(t=-1<n?e[n]:null)&&wl(t))}function wl(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Wd])Iv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Bw(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Cv(e))?(Iv(t,n),0==t.h&&(t.src=null,e[Dv]=null)):Jg(n)}}}function Bw(n){return n in tm?tm[n]:tm[n]="on"+n}function jw(n,e){if(n.fa)n=!0;else{e=new hc(e,this);var t=n.listener,r=n.la||n.src;n.ia&&wl(n),n=t.call(r,e)}return n}function Cv(n){return(n=n[Dv])instanceof Kd?n:null}var bv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tv(n){return"function"==typeof n?n:(n[bv]||(n[bv]=function(e){return n.handleEvent(e)}),n[bv])}function Or(){ea.call(this),this.i=new Kd(this),this.S=this,this.J=null}function zr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Gr(e,n);else if(e instanceof Gr)e.target=e.target||n;else{var s=e;Lw(e=new Gr(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=Yd(l,r,!0,e)&&s}if(s=Yd(l=e.g=n,r,!0,e)&&s,s=Yd(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Yd(l=e.g=t[u],r,!1,e)&&s}function Yd(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,w=l.la||l.src;l.ia&&Iv(n.i,l),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}vr(Or,ea),Or.prototype[Wd]=!0,Or.prototype.removeEventListener=function(n,e,t,r){_l(this,n,e,t,r)},Or.prototype.N=function(){if(Or.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Jg(t[r]);delete n.g[e],n.h--}}this.J=null},Or.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Or.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var op=vt.JSON.stringify;function Sv(){var n=Av;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $w=new class xC{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new MC,n=>n.reset());class MC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function RC(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function NC(n){vt.setTimeout(()=>{throw n},0)}let up,cp=!1,Av=new class ap{constructor(){this.h=this.g=null}add(e,t){const r=$w.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},El=()=>{const n=vt.Promise.resolve(void 0);up=()=>{n.then(Wa)}};var Wa=()=>{for(var n;n=Sv();){try{n.h.call(n.g)}catch(t){NC(t)}var e=$w;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}cp=!1};function nm(n,e){Or.call(this),this.h=n||1,this.g=e||vt,this.j=Nr(this.qb,this),this.l=Date.now()}function xv(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Hw(n,e,t){if("function"==typeof n)t&&(n=Nr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Nr(n.handleEvent,n)}return 2147483647<Number(e)?-1:vt.setTimeout(n,e||0)}function OC(n){n.g=Hw(()=>{n.g=null,n.i&&(n.i=!1,OC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}vr(nm,Or),(ce=nm.prototype).ga=!1,ce.T=null,ce.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),zr(this,"tick"),this.ga&&(xv(this),this.start()))}},ce.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ce.N=function(){nm.$.N.call(this),xv(this),delete this.g};class Gw extends ea{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:OC(this)}N(){super.N(),this.g&&(vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rm(n){ea.call(this),this.h=n,this.g={}}vr(rm,ea);var Mv=[];function Rv(n,e,t,r){Array.isArray(t)||(t&&(Mv[0]=t.toString()),t=Mv);for(var s=0;s<t.length;s++){var u=AC(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function zw(n){Xg(n.g,function(e,t){this.g.hasOwnProperty(t)&&wl(e)},n),n.g={}}function lp(){this.g=!0}function wi(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function qw(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return op(t)}catch{return e}}(n,t)+(r?" "+r:"")})}rm.prototype.N=function(){rm.$.N.call(this),zw(this)},rm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},lp.prototype.Ea=function(){this.g=!1},lp.prototype.info=function(){};var Il={},Ww=null;function im(){return Ww=Ww||new Or}function Zw(n){Gr.call(this,Il.Ta,n)}function Qd(n){const e=im();zr(e,new Zw(e))}function Kw(n,e){Gr.call(this,Il.STAT_EVENT,n),this.stat=e}function Ni(n){const e=im();zr(e,new Kw(e,n))}function Yw(n,e){Gr.call(this,Il.Ua,n),this.size=e}function Nt(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return vt.setTimeout(function(){n()},e)}Il.Ta="serverreachability",vr(Zw,Gr),Il.STAT_EVENT="statevent",vr(Kw,Gr),Il.Ua="timingevent",vr(Yw,Gr);var dp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Nv={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function sm(){}function Jw(){}sm.prototype.h=null;var Pv,Jd={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ov(){Gr.call(this,"d")}function om(){Gr.call(this,"c")}function am(){}function um(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new rm(this),this.P=Xw,this.V=new nm(n=rp?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new kv}function kv(){this.i=null,this.g="",this.h=!1}vr(Ov,Gr),vr(om,Gr),vr(am,sm),am.prototype.g=function(){return new XMLHttpRequest},am.prototype.i=function(){return{}},Pv=new am;var Xw=45e3,Za={},cm={};function hp(n,e,t){n.L=1,n.v=gm(Ka(e)),n.s=t,n.S=!0,lm(n,null)}function lm(n,e){n.G=Date.now(),dm(n),n.A=Ka(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),aE(t.i,"t",r),n.C=0,t=n.l.J,n.h=new kv,n.g=Jv(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Gw(Nr(n.Pa,n,n.g),n.O)),Rv(n.U,n.g,"readystatechange",n.nb),e=n.I?kw(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Qd(),function PC(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var A=b[0];b=b[1];var N=A.split("_");l=2<=N.length&&"type"==N[1]?l+(A+"=")+b+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function eE(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function LC(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=FS(n,t),s==cm){4==e&&(n.o=4,Ni(14),r=!1),wi(n.j,n.m,null,"[Incomplete Response]");break}if(s==Za){n.o=4,Ni(15),wi(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}wi(n.j,n.m,s,null),fc(n,s)}eE(n)&&s!=cm&&s!=Za&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ni(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),ah(e),e.M=!0,Ni(11))):(wi(n.j,n.m,t,"[Invalid Chunked Response]"),Dl(n),hm(n))}function FS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?cm:(t=Number(e.substring(t,r)),isNaN(t)?Za:(r+=1)+t>e.length?cm:(e=e.slice(r,r+t),n.C=r+t,e))}function dm(n){n.Y=Date.now()+n.P,tE(n,n.P)}function tE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Nt(Nr(n.lb,n),e)}function fp(n){n.B&&(vt.clearTimeout(n.B),n.B=null)}function hm(n){0==n.l.H||n.J||Cm(n.l,n)}function Dl(n){fp(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,xv(n.V),zw(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function fc(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||mp(t.i,n)))if(!n.K&&mp(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Kv(t),Im(t)}oh(t),Ni(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=Nt(Nr(t.ib,t),6e3));if(1>=jv(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else gc(t,11)}else if((n.K||t.g==n)&&Kv(t),!zd(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.K=b[1],t.pa=b[2];const A=b[3];null!=A&&(t.ra=A,t.l.info("VER="+t.ra));const N=b[4];null!=N&&(t.Ga=N,t.l.info("SVER="+t.Ga));const H=b[5];null!=H&&"number"==typeof H&&0<H&&(t.L=r=1.5*H,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const Y=n.g;if(Y){const _e=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_e){var u=r.i;u.g||-1==_e.indexOf("spdy")&&-1==_e.indexOf("quic")&&-1==_e.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(yp(u,u.h),u.h=null))}if(r.F){const Ue=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Ue&&(r.Da=Ue,Rn(r.I,r.F,Ue))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=Qv(r,r.J?r.pa:null,r.Y),l.K){mm(r.i,l);var m=l,w=r.L;w&&m.setTimeout(w),m.B&&(fp(m),dm(m)),r.g=l}else yE(r);0<t.j.length&&Dm(t)}else"stop"!=b[0]&&"close"!=b[0]||gc(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?gc(t,7):Wv(t):"noop"!=b[0]&&t.h&&t.h.Aa(b),t.A=0)}Qd()}catch{}}function pp(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Eo(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function nE(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Eo(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function VC(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Eo(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(ce=um.prototype).setTimeout=function(n){this.P=n},ce.nb=function(n){n=n.target;const e=this.M;e&&3==ta(n)?e.l():this.Pa(n)},ce.Pa=function(n){try{if(n==this.g)e:{const A=ta(this.g);var e=this.g.Ia();if(this.g.da(),!(3>A)&&(3!=A||rp||this.g&&(this.h.h||this.g.ja()||fE(this.g)))){this.J||4!=A||7==e||Qd(),fp(this);var t=this.g.da();this.ca=t;t:if(eE(this)){var r=fE(this.g);n="";var s=r.length,u=4==ta(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Dl(this),hm(this);var l="";break t}this.h.i=new vt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function kC(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,A,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zd(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ni(12),Dl(this),hm(this);break e}wi(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fc(this,t)}this.S?(LC(this,A,l),rp&&this.i&&3==A&&(Rv(this.U,this.V,"tick",this.mb),this.V.start())):(wi(this.j,this.m,l,null),fc(this,l)),4==A&&Dl(this),this.i&&!this.J&&(4==A?Cm(this.l,this):(this.i=!1,dm(this)))}else(function qC(n){const e={};n=(n.g&&2<=ta(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(zd(n[r]))continue;var t=RC(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function Zd(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ni(12)):(this.o=0,Ni(13)),Dl(this),hm(this)}}}catch{}},ce.mb=function(){if(this.g){var n=ta(this.g),e=this.g.ja();this.C<e.length&&(fp(this),LC(this,n,e),this.i&&4!=n&&dm(this))}},ce.cancel=function(){this.J=!0,Dl(this)},ce.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function FC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Qd(),Ni(17)),Dl(this),this.o=2,hm(this)):tE(this,this.Y-n)};var rE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cl(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Cl){this.h=n.h,fm(this,n.j),this.s=n.s,this.g=n.g,pm(this,n.m),this.l=n.l;var e=n.i,t=new nh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),sE(this,t),this.o=n.o}else n&&(e=String(n).match(rE))?(this.h=!1,fm(this,e[1]||"",!0),this.s=Xd(e[2]||""),this.g=Xd(e[3]||"",!0),pm(this,e[4]),this.l=Xd(e[5]||"",!0),sE(this,e[6]||"",!0),this.o=Xd(e[7]||"")):(this.h=!1,this.i=new nh(null,this.h))}function Ka(n){return new Cl(n)}function fm(n,e,t){n.j=t?Xd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function pm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function sE(n,e,t){e instanceof nh?(n.i=e,function rh(n,e){e&&!n.j&&(pc(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Vv(this,r),aE(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=eh(e,LS)),n.i=new nh(e,n.h))}function Rn(n,e,t){n.i.set(e,t)}function gm(n){return Rn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Xd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function eh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Fv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Fv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Cl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(eh(e,UC,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(eh(e,UC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(eh(t,"/"==t.charAt(0)?BC:Lv,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",eh(t,th)),n.join("")};var UC=/[#\/\?@]/g,Lv=/[#\?:]/g,BC=/[#\?]/g,LS=/[#\?@]/g,th=/#/g;function nh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function pc(n){n.g||(n.g=new Map,n.h=0,n.i&&function iE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Vv(n,e){pc(n),e=Ya(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function oE(n,e){return pc(n),e=Ya(n,e),n.g.has(e)}function aE(n,e,t){Vv(n,e),0<t.length&&(n.i=null,n.g.set(Ya(n,e),xw(t)),n.h+=t.length)}function Ya(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ih(n){this.l=n||Bv,n=vt.PerformanceNavigationTiming?0<(n=vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(vt.g&&vt.g.Ka&&vt.g.Ka()&&vt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ce=nh.prototype).add=function(n,e){pc(this),this.i=null,n=Ya(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ce.forEach=function(n,e){pc(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},ce.ta=function(){pc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},ce.Z=function(n){pc(this);let e=[];if("string"==typeof n)oE(this,n)&&(e=e.concat(this.g.get(Ya(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ce.set=function(n,e){return pc(this),this.i=null,oE(this,n=Ya(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ce.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ce.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var Bv=10;function gp(n){return!!n.h||!!n.g&&n.g.size>=n.j}function jv(n){return n.h?1:n.g?n.g.size:0}function mp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function yp(n,e){n.g?n.g.add(e):n.h=e}function mm(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $v(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return xw(n.i)}ih.prototype.cancel=function(){if(this.i=$v(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var Hv=class{stringify(n){return vt.JSON.stringify(n,void 0)}parse(n){return vt.JSON.parse(n,void 0)}};function jC(){this.g=new Hv}function $C(n,e,t){const r=t||"";try{pp(n,function(s,u){let l=s;cc(s)&&(l=op(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function ym(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function sh(n){this.l=n.fc||null,this.j=n.ob||!1}function vp(n,e){Or.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Gv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vr(sh,sm),sh.prototype.g=function(){return new vp(this.l,this.j)},sh.prototype.i=function(n){return function(){return n}}({}),vr(vp,Or);var Gv=0;function cE(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function ni(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_p(n)}function _p(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ce=vp.prototype).open=function(n,e){if(this.readyState!=Gv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,_p(this)},ce.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||vt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ce.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ni(this)),this.readyState=Gv},ce.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_p(this)),this.g&&(this.readyState=3,_p(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof vt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cE(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ce.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ni(this):_p(this),3==this.readyState&&cE(this)}},ce.Za=function(n){this.g&&(this.response=this.responseText=n,ni(this))},ce.Ya=function(n){this.g&&(this.response=n,ni(this))},ce.ka=function(){this.g&&ni(this)},ce.setRequestHeader=function(n,e){this.v.append(n,e)},ce.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ce.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var HC=vt.JSON.parse;function _r(n){Or.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=vm,this.L=this.M=!1}vr(_r,Or);var vm="",lE=/^https?$/i,GC=["POST","PUT"];function dE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,zv(n),_m(n)}function zv(n){n.F||(n.F=!0,zr(n,"complete"),zr(n,"error"))}function hE(n){if(n.h&&typeof vn<"u"&&(!n.C[1]||4!=ta(n)||2!=n.da()))if(n.v&&4==ta(n))Hw(n.La,0,n);else if(zr(n,"readystatechange"),4==ta(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var s=String(n.I).match(rE)[1]||null;!s&&vt.self&&vt.self.location&&(s=vt.self.location.protocol.slice(0,-1)),r=!lE.test(s?s.toLowerCase():"")}t=r}if(t)zr(n,"complete"),zr(n,"success");else{n.m=6;try{var u=2<ta(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",zv(n)}}finally{_m(n)}}}function _m(n,e){if(n.g){wm(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||zr(n,"ready");try{t.onreadystatechange=r}catch{}}}function wm(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(vt.clearTimeout(n.A),n.A=null)}function ta(n){return n.g?n.g.readyState:0}function fE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case vm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function pE(n){let e="";return Xg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function qv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=pE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Rn(n,e,t))}function es(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Em(n){this.Ga=0,this.j=[],this.l=new lp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=es("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=es("baseRetryDelayMs",5e3,n),this.hb=es("retryDelaySeedMs",1e4,n),this.eb=es("forwardChannelMaxRetries",2,n),this.xa=es("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new ih(n&&n.concurrentRequestLimit),this.Ja=new jC,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Wv(n){if(Zv(n),3==n.H){var e=n.W++,t=Ka(n.I);if(Rn(t,"SID",n.K),Rn(t,"RID",e),Rn(t,"TYPE","terminate"),bl(n,t),(e=new um(n,n.l,e)).L=2,e.v=gm(Ka(t)),t=!1,vt.navigator&&vt.navigator.sendBeacon)try{t=vt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Jv(e.l,null),e.g.ha(e.v)),e.G=Date.now(),dm(e)}Yv(n)}function Im(n){n.g&&(ah(n),n.g.cancel(),n.g=null)}function Zv(n){Im(n),n.u&&(vt.clearTimeout(n.u),n.u=null),Kv(n),n.i.cancel(),n.m&&("number"==typeof n.m&&vt.clearTimeout(n.m),n.m=null)}function Dm(n){if(!gp(n.i)&&!n.m){n.m=!0;var e=n.Na;up||El(),cp||(up(),cp=!0),Av.add(e,n),n.C=0}}function gE(n,e){var t;t=e?e.m:n.W++;const r=Ka(n.I);Rn(r,"SID",n.K),Rn(r,"RID",t),Rn(r,"AID",n.V),bl(n,r),n.o&&n.s&&qv(r,n.o,n.s),t=new um(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=mE(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),yp(n.i,t),hp(t,r,e)}function bl(n,e){n.na&&Xg(n.na,function(t,r){Rn(e,r,t)}),n.h&&pp({},function(t,r){Rn(e,r,t)})}function mE(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Nr(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=s[w].g;const A=s[w].map;if(b-=u,0>b)u=Math.max(0,s[w].g-100),m=!1;else try{$C(A,l,"req"+b+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function yE(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;up||El(),cp||(up(),cp=!0),Av.add(e,n),n.A=0}}function oh(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Nt(Nr(n.Ma,n),ZC(n,n.A)),n.A++,0))}function ah(n){null!=n.B&&(vt.clearTimeout(n.B),n.B=null)}function wp(n){n.g=new um(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ka(n.wa);Rn(e,"RID","rpc"),Rn(e,"SID",n.K),Rn(e,"AID",n.V),Rn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Rn(e,"TO",n.qa),Rn(e,"TYPE","xmlhttp"),bl(n,e),n.o&&n.s&&qv(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=gm(Ka(e)),t.s=null,t.S=!0,lm(t,n)}function Kv(n){null!=n.v&&(vt.clearTimeout(n.v),n.v=null)}function Cm(n,e){var t=null;if(n.g==e){Kv(n),ah(n),n.g=null;var r=2}else{if(!mp(n.i,e))return;t=e.F,mm(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;zr(r=im(),new Yw(r,t)),Dm(n)}else yE(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function WC(n,e){return!(jv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Nt(Nr(n.Na,n,e),ZC(n,n.C)),n.C++,0)))}(n,e)||2==r&&oh(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:gc(n,5);break;case 4:gc(n,10);break;case 3:gc(n,6);break;default:gc(n,2)}}function ZC(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function gc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Nr(n.pb,n);t||(t=new Cl("//www.google.com/images/cleardot.gif"),vt.location&&"http"==vt.location.protocol||fm(t,"https"),gm(t)),function uE(n,e){const t=new lp;if(vt.Image){const r=new Image;r.onload=lc(ym,t,r,"TestLoadImage: loaded",!0,e),r.onerror=lc(ym,t,r,"TestLoadImage: error",!1,e),r.onabort=lc(ym,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=lc(ym,t,r,"TestLoadImage: timeout",!1,e),vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ni(2);n.H=0,n.h&&n.h.za(e),Yv(n),Zv(n)}function Yv(n){if(n.H=0,n.ma=[],n.h){const e=$v(n.i);(0!=e.length||0!=n.j.length)&&(Gd(n.ma,e),Gd(n.ma,n.j),n.i.i.length=0,xw(n.j),n.j.length=0),n.h.ya()}}function Qv(n,e,t){var r=t instanceof Cl?Ka(t):new Cl(t);if(""!=r.g)e&&(r.g=e+"."+r.g),pm(r,r.m);else{var s=vt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Cl(null);r&&fm(u,r),e&&(u.g=e),s&&pm(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Rn(r,t,e),Rn(r,"VER",n.ra),bl(n,r),r}function Jv(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _r(t&&n.Ha&&!n.va?new sh({ob:!0}):n.va)).Oa(n.J),e}function bm(){}function $s(){if(dc&&!(10<=Number(wv)))throw Error("Environmental error: no available transport.")}function Ei(n,e){Or.call(this),this.g=new Em(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!zd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zd(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ch(this)}function Ep(n){Ov.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function uh(){om.call(this),this.status=1}function ch(n){this.g=n}function Hs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Xv(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function wn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(ce=_r.prototype).Oa=function(n){this.M=n},ce.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Pv.g(),this.C=function Qw(n){return n.h||(n.h=n.i())}(this.u?this.u:Pv),this.g.onreadystatechange=Nr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void dE(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=vt.FormData&&n instanceof vt.FormData,!(0<=gv(GC,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wm(this),0<this.B&&((this.L=function zC(n){return dc&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nr(this.ua,this)):this.A=Hw(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){dE(this,u)}},ce.ua=function(){typeof vn<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zr(this,"timeout"),this.abort(8))},ce.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,zr(this,"complete"),zr(this,"abort"),_m(this))},ce.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_m(this,!0)),_r.$.N.call(this)},ce.La=function(){this.s||(this.G||this.v||this.l?hE(this):this.kb())},ce.kb=function(){hE(this)},ce.isActive=function(){return!!this.g},ce.da=function(){try{return 2<ta(this)?this.g.status:-1}catch{return-1}},ce.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ce.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),HC(e)}},ce.Ia=function(){return this.m},ce.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ce=Em.prototype).ra=8,ce.H=1,ce.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new um(this,this.l,n);let u=this.s;if(this.U&&(u?(u=kw(u),Lw(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=mE(this,s,e),Rn(t=Ka(this.I),"RID",n),Rn(t,"CVER",22),this.F&&Rn(t,"X-HTTP-Session-Id",this.F),bl(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(pE(u)))+"&"+e:this.o&&qv(t,this.o,u)),yp(this.i,s),this.bb&&Rn(t,"TYPE","init"),this.P?(Rn(t,"$req",e),Rn(t,"SID","null"),s.aa=!0,hp(s,t,null)):hp(s,t,e),this.H=2}}else 3==this.H&&(n?gE(this,n):0==this.j.length||gp(this.i)||gE(this))},ce.Ma=function(){if(this.u=null,wp(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Nt(Nr(this.jb,this),n)}},ce.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ni(10),Im(this),wp(this))},ce.ib=function(){null!=this.v&&(this.v=null,Im(this),oh(this),Ni(19))},ce.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ni(2)):(this.l.info("Failed to ping google.com"),Ni(1))},ce.isActive=function(){return!!this.h&&this.h.isActive(this)},(ce=bm.prototype).Ba=function(){},ce.Aa=function(){},ce.za=function(){},ce.ya=function(){},ce.isActive=function(){return!0},ce.Va=function(){},$s.prototype.g=function(n,e){return new Ei(n,e)},vr(Ei,Or),Ei.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ni(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Qv(n,null,n.Y),Dm(n)},Ei.prototype.close=function(){Wv(this.g)},Ei.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=op(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Dm(e)},Ei.prototype.N=function(){this.g.h=null,delete this.j,Wv(this.g),delete this.g,Ei.$.N.call(this)},vr(Ep,Ov),vr(uh,om),vr(ch,bm),ch.prototype.Ba=function(){zr(this.g,"a")},ch.prototype.Aa=function(n){zr(this.g,new Ep(n))},ch.prototype.za=function(n){zr(this.g,new uh)},ch.prototype.ya=function(){zr(this.g,"b")},vr(Hs,function vE(){this.blockSize=-1}),Hs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Hs.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)Xv(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){Xv(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){Xv(this,r),s=0;break}}this.h=s,this.i+=e},Hs.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Ip={};function e_(n){return-128<=n&&128>n?function Rw(n,e){var t=Ip;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new wn([0|e],0>e?-1:0)}):new wn([0|n],0>n?-1:0)}function Qa(n){if(isNaN(n)||!isFinite(n))return lh;if(0>n)return qr(Qa(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=t_;return new wn(e,0)}var t_=4294967296,lh=e_(0),n_=e_(1),wE=e_(16777216);function Ja(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Gs(n){return-1==n.h}function qr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new wn(t,~n.h).add(n_)}function dh(n,e){return n.add(qr(e))}function Tm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Tl(n,e){this.g=n,this.h=e}function Sm(n,e){if(Ja(e))throw Error("division by zero");if(Ja(n))return new Tl(lh,lh);if(Gs(n))return e=Sm(qr(n),e),new Tl(qr(e.g),qr(e.h));if(Gs(e))return e=Sm(n,qr(e)),new Tl(qr(e.g),e.h);if(30<n.g.length){if(Gs(n)||Gs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=n_,r=e;0>=r.X(n);)t=EE(t),r=EE(r);var s=hh(t,1),u=hh(r,1);for(r=hh(r,2),t=hh(t,2);!Ja(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=hh(r,1),t=hh(t,1)}return e=dh(n,s.R(e)),new Tl(s,e)}for(s=lh;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=Qa(t)).R(e);Gs(l)||0<l.X(n);)l=(u=Qa(t-=r)).R(e);Ja(u)&&(u=n_),s=s.add(u),n=dh(n,l)}return new Tl(s,n)}function EE(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new wn(t,n.h)}function hh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new wn(s,n.h)}(ce=wn.prototype).ea=function(){if(Gs(this))return-qr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:t_+r)*e,e*=t_}return n},ce.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ja(this))return"0";if(Gs(this))return"-"+qr(this).toString(n);for(var e=Qa(Math.pow(n,6)),t=this,r="";;){var s=Sm(t,e).g,u=((0<(t=dh(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ja(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},ce.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ce.X=function(n){return Gs(n=dh(this,n))?-1:Ja(n)?0:1},ce.abs=function(){return Gs(this)?qr(this):this},ce.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new wn(t,-2147483648&t[t.length-1]?-1:0)},ce.R=function(n){if(Ja(this)||Ja(n))return lh;if(Gs(this))return Gs(n)?qr(this).R(qr(n)):qr(qr(this).R(n));if(Gs(n))return qr(this.R(qr(n)));if(0>this.X(wE)&&0>n.X(wE))return Qa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(s)>>>16,w=65535&n.D(s);t[2*r+2*s]+=l*w,Tm(t,2*r+2*s),t[2*r+2*s+1]+=u*w,Tm(t,2*r+2*s+1),t[2*r+2*s+1]+=l*m,Tm(t,2*r+2*s+1),t[2*r+2*s+2]+=u*m,Tm(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new wn(t,0)},ce.gb=function(n){return Sm(this,n).h},ce.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new wn(t,this.h&n.h)},ce.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new wn(t,this.h|n.h)},ce.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new wn(t,this.h^n.h)},$s.prototype.createWebChannel=$s.prototype.g,Ei.prototype.send=Ei.prototype.u,Ei.prototype.open=Ei.prototype.m,Ei.prototype.close=Ei.prototype.close,dp.NO_ERROR=0,dp.TIMEOUT=8,dp.HTTP_ERROR=6,Nv.COMPLETE="complete",Jw.EventType=Jd,Jd.OPEN="a",Jd.CLOSE="b",Jd.ERROR="c",Jd.MESSAGE="d",Or.prototype.listen=Or.prototype.O,_r.prototype.listenOnce=_r.prototype.P,_r.prototype.getLastError=_r.prototype.Sa,_r.prototype.getLastErrorCode=_r.prototype.Ia,_r.prototype.getStatus=_r.prototype.da,_r.prototype.getResponseJson=_r.prototype.Wa,_r.prototype.getResponseText=_r.prototype.ja,_r.prototype.send=_r.prototype.ha,_r.prototype.setWithCredentials=_r.prototype.Oa,Hs.prototype.digest=Hs.prototype.l,Hs.prototype.reset=Hs.prototype.reset,Hs.prototype.update=Hs.prototype.j,wn.prototype.add=wn.prototype.add,wn.prototype.multiply=wn.prototype.R,wn.prototype.modulo=wn.prototype.gb,wn.prototype.compare=wn.prototype.X,wn.prototype.toNumber=wn.prototype.ea,wn.prototype.toString=wn.prototype.toString,wn.prototype.getBits=wn.prototype.D,wn.fromNumber=Qa,wn.fromString=function _E(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return qr(_E(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Qa(Math.pow(e,8)),r=lh,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=Qa(Math.pow(e,u)),r=r.R(u).add(Qa(l))):r=(r=r.R(t)).add(Qa(l))}return r};var KC=Ke.createWebChannelTransport=function(){return new $s},YC=Ke.getStatEventTarget=function(){return im()},r_=Ke.ErrorCode=dp,QC=Ke.EventType=Nv,IE=Ke.Event=Il,i_=Ke.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},JC=Ke.FetchXmlHttpFactory=sh,s_=Ke.WebChannel=Jw,DE=Ke.XhrIo=_r,VS=Ke.Md5=Hs,Xa=Ke.Integer=wn;const CE="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let mc="9.23.0";const yc=new Qi.Yd("@firebase/firestore");function zs(){return yc.logLevel}function Se(n,...e){if(yc.logLevel<=Qi.in.DEBUG){const t=e.map(ts);yc.debug(`Firestore (${mc}): ${n}`,...t)}}function An(n,...e){if(yc.logLevel<=Qi.in.ERROR){const t=e.map(ts);yc.error(`Firestore (${mc}): ${n}`,...t)}}function Oi(n,...e){if(yc.logLevel<=Qi.in.WARN){const t=e.map(ts);yc.warn(`Firestore (${mc}): ${n}`,...t)}}function ts(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${mc}) INTERNAL ASSERTION FAILED: `+n;throw An(e),new Error(e)}function ut(n,e){n||tt()}function Ye(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Yt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Sl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ph{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class gh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bE{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let l=new qn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new qn,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,ye.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new qn)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ut("string"==typeof r.accessToken),new Sl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ut(null===e||"string"==typeof e),new Wr(e)}}class TE{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class SE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new TE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class o_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AE{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ut("string"==typeof t.token),this.T=t.token,new o_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function xE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class a_{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=xE(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function mh(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function ME(n){return n+"\0"}class Un{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Un.fromMillis(Date.now())}static fromDate(e){return Un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Un(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new Un(0,0))}static max(){return new mt(new Un(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Cp{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Cp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nn extends Cp{construct(e,t,r){return new nn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new nn(t)}static emptyPath(){return new nn([])}}const u_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends Cp{construct(e,t,r){return new cr(e,t,r)}static isValidIdentifier(e){return u_.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new cr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Te(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Te(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Te(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(l=!l,s++):"."!==m||l?(r+=m,s++):(u(),s++)}if(u(),l)throw new Te(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(t)}static emptyPath(){return new cr([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(nn.fromString(e))}static fromName(e){return new Qe(nn.fromString(e).popFirst(5))}static empty(){return new Qe(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new nn(e.slice()))}}class Al{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function bp(n){return n.fields.find(e=>2===e.kind)}function xl(n){return n.fields.filter(e=>2!==e.kind)}Al.UNKNOWN_ID=-1;class yh{constructor(e,t){this.fieldPath=e,this.kind=t}}class vh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vh(0,ns.min())}}function Am(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=mt.fromTimestamp(1e9===r?new Un(t+1,0):new Un(t,r));return new ns(s,Qe.empty(),e)}function l_(n){return new ns(n.readTime,n.key,-1)}class ns{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ns(mt.min(),Qe.empty(),-1)}static max(){return new ns(mt.max(),Qe.empty(),-1)}}function Tp(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}const d_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function eu(n){return xm.apply(this,arguments)}function xm(){return xm=(0,ye.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==d_)throw n;Se("LocalStore","Unexpectedly lost primary lease")}),xm.apply(this,arguments)}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let s=0,u=0,l=!1;e.forEach(m=>{++s,m.next(()=>{++u,l&&u===s&&t()},w=>r(w))}),l=!0,u===s&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(s=>s?ee.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,s)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(A=>{l[b]=A,++m,m===u&&r(l)},A=>s(A))}})}static doWhile(e,t){return new ee((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Sp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new qn,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Ap(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=Mm(r.target.error);this.v.reject(new Ap(e,s))}}static open(e,t,r,s){try{return new Sp(t,e.transaction(s,r))}catch(u){throw new Ap(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Se("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new h_(t)}}class Io{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Io.S((0,Yt.z$)())&&An("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Se("SimpleDb","Removing database:",e),vc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Yt.hl)())return!1;if(Io.C())return!0;const e=(0,Yt.z$)(),t=Io.S(e),r=0<t&&t<10,s=Io.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Se("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new Ap(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;s("VersionError"===m.name?new Te(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Te(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Ap(e,m))},u.onupgradeneeded=l=>{Se("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Se("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ye.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const w=Sp.open(u.db,e,l?"readonly":"readwrite",r),b=s(w).next(A=>(w.P(),A)).catch(A=>(w.abort(A),ee.reject(A))).toPromise();return b.catch(()=>{}),yield w.R,b}catch(w){const b=w,A="FirebaseError"!==b.name&&m<3;if(Se("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class eb{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return vc(this.L.delete())}}class Ap extends Te{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function tu(n){return"IndexedDbTransactionError"===n.name}class h_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Se("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Se("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vc(r)}add(e){return Se("SimpleDb","ADD",this.store.name,e,e),vc(this.store.add(e))}get(e){return vc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Se("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Se("SimpleDb","DELETE",this.store.name,e),vc(this.store.delete(e))}count(){return Se("SimpleDb","COUNT",this.store.name),vc(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ee((u,l)=>{s.onerror=m=>{l(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ee((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){Se("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new ee((r,s)=>{t.onerror=u=>{const l=Mm(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new ee((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void s();const w=new eb(m),b=t(m.primaryKey,m.value,w);if(b instanceof ee){const A=b.catch(N=>(w.done(),ee.reject(N)));r.push(A)}w.isDone?s():null===w.K?m.continue():m.continue(w.K)}}).next(()=>ee.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vc(n){return new ee((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Mm(r.target.error);t(s)}})}let f_=!1;function Mm(n){const e=Io.S((0,Yt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return f_||(f_=!0,setTimeout(()=>{throw r},0)),r}}return n}class OE{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Se("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Se("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){tu(r)?Se("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield eu(r)}yield t.et(6e4)}))}}class PE{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return ee.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Se("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(m=>{s-=m,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(m=>(Se("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=l_(u);Tp(l,r)>0&&(r=l)}),new ns(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let rs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function _h(n){return null==n}function wh(n){return 0===n&&1/n==-1/0}function xp(n){return"number"==typeof n&&Number.isInteger(n)&&!wh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function er(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kE(e)),e=tb(n.get(t),e);return kE(e)}function tb(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function kE(n){return n+"\x01\x01"}function qs(n){const e=n.length;if(ut(e>=2),2===e)return ut("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),nn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&tt(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:tt()}u=l+2}return new nn(r)}const _c=["userId","batchId"];function Eh(n,e){return[n,er(e)]}function FE(n,e,t){return[n,er(e),t]}const p_={},US=["prefixPath","collectionGroup","readTime","documentId"],BS=["prefixPath","collectionGroup","documentId"],nb=["collectionGroup","readTime","prefixPath","documentId"],rb=["canonicalId","targetId"],LE=["targetId","path"],ib=["path","targetId"],Pr=["collectionId","parent"],VE=["indexId","uid"],sb=["uid","sequenceNumber"],ob=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],UE=["indexId","uid","orderedDocumentKey"],ab=["userId","collectionPath","documentId"],BE=["userId","collectionPath","largestBatchId"],jE=["userId","collectionGroup","largestBatchId"],Ml=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ub=[...Ml,"documentOverlays"],$E=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],g_=$E,cb=[...g_,"indexConfiguration","indexState","indexEntries"];class Rm extends NE{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ri(n,e){const t=Ye(n);return Io.M(t.ht,e)}function m_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function na(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Do(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Nn{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new Nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new Nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nm(this.root,e,this.comparator,!0)}}class Nm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??On.RED,this.left=s??On.EMPTY,this.right=u??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new On(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return On.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1,On.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new On(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class un{constructor(e){this.comparator=e,this.data=new Nn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ws(this.data.getIterator())}getIteratorFrom(e){return new Ws(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class Ws{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Rl(n){return n.hasNext()?n.getNext():void 0}class Pi{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new Pi([])}unionWith(e){let t=new un(cr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Pi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class HE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new HE("Invalid base64 string: "+s):s}}(e);return new kr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new kr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kr.EMPTY_BYTE_STRING=new kr("");const db=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ra(n){if(ut(!!n),"string"==typeof n){let e=0;const t=db.exec(n);if(ut(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pn(n.seconds),nanos:Pn(n.nanos)}}function Pn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function nu(n){return"string"==typeof n?kr.fromBase64String(n):kr.fromUint8Array(n)}function Mp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Om(n){const e=n.mapValue.fields.__previous_value__;return Mp(e)?Om(e):e}function Rp(n){const e=ra(n.mapValue.fields.__local_write_time__.timestampValue);return new Un(e.seconds,e.nanos)}class GE{constructor(e,t,r,s,u,l,m,w,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=w,this.useFetchStreams=b}}class ru{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ru("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ru&&e.projectId===this.projectId&&e.database===this.database}}const Co={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pm={nullValue:"NULL_VALUE"};function iu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mp(n)?4:qE(n)?9007199254740991:10:tt()}function bo(n,e){if(n===e)return!0;const t=iu(n);if(t!==iu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Rp(n).isEqual(Rp(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=ra(r.timestampValue),l=ra(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,nu(n.bytesValue).isEqual(nu(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Pn(r.geoPointValue.latitude)===Pn(s.geoPointValue.latitude)&&Pn(r.geoPointValue.longitude)===Pn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Pn(r.integerValue)===Pn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Pn(r.doubleValue),l=Pn(s.doubleValue);return u===l?wh(u)===wh(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return mh(n.arrayValue.values||[],e.arrayValue.values||[],bo);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(m_(u)!==m_(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!bo(u[m],l[m])))return!1;return!0}(n,e);default:return tt()}var s}function Nl(n,e){return void 0!==(n.values||[]).find(t=>bo(t,e))}function To(n,e){if(n===e)return 0;const t=iu(n),r=iu(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=Pn(s.integerValue||s.doubleValue),m=Pn(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return y_(n.timestampValue,e.timestampValue);case 4:return y_(Rp(n),Rp(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(s,u){const l=nu(s),m=nu(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const b=Ft(l[w],m[w]);if(0!==b)return b}return Ft(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Ft(Pn(s.latitude),Pn(u.latitude));return 0!==l?l:Ft(Pn(s.longitude),Pn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const b=To(l[w],m[w]);if(b)return b}return Ft(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Co.mapValue&&u===Co.mapValue)return 0;if(s===Co.mapValue)return 1;if(u===Co.mapValue)return-1;const l=s.fields||{},m=Object.keys(l),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let A=0;A<m.length&&A<b.length;++A){const N=Ft(m[A],b[A]);if(0!==N)return N;const H=To(l[m[A]],w[b[A]]);if(0!==H)return H}return Ft(m.length,b.length)}(n.mapValue,e.mapValue);default:throw tt()}}function y_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=ra(n),r=ra(e),s=Ft(t.seconds,r.seconds);return 0!==s?s:Ft(t.nanos,r.nanos)}function Ol(n){return km(n)}function km(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=ra(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?nu(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=km(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of s)l?l=!1:u+=",",u+=`${m}:${km(r.fields[m])}`;return u+"}"}(n.mapValue):tt();var e}function wc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Fm(n){return!!n&&"integerValue"in n}function Ih(n){return!!n&&"arrayValue"in n}function v_(n){return!!n&&"nullValue"in n}function zE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lm(n){return!!n&&"mapValue"in n}function Op(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return na(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Op(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Op(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function hb(n){return"nullValue"in n?Pm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wc(ru.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function fb(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wc(ru.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Co:tt()}function WE(n,e){const t=To(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ZE(n,e){const t=To(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ii{constructor(e){this.value=e}static empty(){return new ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Lm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Op(t)}setAll(e){let t=cr.emptyPath(),r={},s=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}l?r[m.lastSegment()]=Op(l):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Lm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Lm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){na(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new ii(Op(this.value))}}function KE(n){const e=[];return na(n.fields,(t,r)=>{const s=new cr([t]);if(Lm(r)){const u=KE(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new Pi(e)}class Bn{constructor(e,t,r,s,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Bn(e,0,mt.min(),mt.min(),mt.min(),ii.empty(),0)}static newFoundDocument(e,t,r,s){return new Bn(e,1,t,mt.min(),r,s,0)}static newNoDocument(e,t){return new Bn(e,2,t,mt.min(),mt.min(),ii.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,mt.min(),mt.min(),ii.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ec{constructor(e,t){this.position=e,this.inclusive=t}}function YE(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?Qe.comparator(Qe.fromName(l.referenceValue),t.key):To(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function QE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bo(n.position[t],e.position[t]))return!1;return!0}class Dh{constructor(e,t="asc"){this.field=e,this.dir=t}}function pb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class JE{}class rn extends JE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new XE(e,t,r):"array-contains"===t?new gb(e,r):"in"===t?new Fl(e,r):"not-in"===t?new jS(e,r):"array-contains-any"===t?new D_(e,r):new rn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new eI(e,r):new kl(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(To(t,this.value)):null!==t&&iu(this.value)===iu(t)&&this.matchesComparison(To(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _n extends JE{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new _n(e,t)}matches(e){return Pl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Pl(n){return"and"===n.op}function Vm(n){return"or"===n.op}function Um(n){return __(n)&&Pl(n)}function __(n){for(const e of n.filters)if(e instanceof _n)return!1;return!0}function Bm(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+Ol(n.value);if(Um(n))return n.filters.map(e=>Bm(e)).join(",");{const e=n.filters.map(t=>Bm(t)).join(",");return`${n.op}(${e})`}}function w_(n,e){return n instanceof rn?(t=n,(r=e)instanceof rn&&t.op===r.op&&t.field.isEqual(r.field)&&bo(t.value,r.value)):n instanceof _n?function(t,r){return r instanceof _n&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&w_(u,r.filters[l]),!0)}(n,e):void tt();var t,r}function E_(n,e){const t=n.filters.concat(e);return _n.create(t,n.op)}function I_(n){return n instanceof rn?`${(e=n).field.canonicalString()} ${e.op} ${Ol(e.value)}`:n instanceof _n?function(e){return e.op.toString()+" {"+e.getFilters().map(I_).join(" ,")+"}"}(n):"Filter";var e}class XE extends rn{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class eI extends rn{constructor(e,t){super(e,"in",t),this.keys=tI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kl extends rn{constructor(e,t){super(e,"not-in",t),this.keys=tI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class gb extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ih(t)&&Nl(t.arrayValue,this.value)}}class Fl extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Nl(this.value.arrayValue,t)}}class jS extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Nl(this.value.arrayValue,t)}}class D_ extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ih(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Nl(this.value.arrayValue,r))}}class $S{constructor(e,t=null,r=[],s=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function jm(n,e=null,t=[],r=[],s=null,u=null,l=null){return new $S(n,e,t,r,s,u,l)}function Ic(n){const e=Ye(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Bm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),_h(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ol(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ol(r)).join(",")),e.dt=t}return e.dt}function $m(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!w_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QE(n.startAt,e.startAt)&&QE(n.endAt,e.endAt)}function Et(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Hm(n,e){return n.filters.filter(t=>t instanceof rn&&t.field.isEqual(e))}function nI(n,e,t){let r=Pm,s=!0;for(const u of Hm(n,e)){let l=Pm,m=!0;switch(u.op){case"<":case"<=":l=hb(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=Pm}WE({value:r,inclusive:s},{value:l,inclusive:m})<0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];WE({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function rI(n,e,t){let r=Co,s=!0;for(const u of Hm(n,e)){let l=Co,m=!0;switch(u.op){case">=":case">":l=fb(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=Co}ZE({value:r,inclusive:s},{value:l,inclusive:m})>0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];ZE({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class is{constructor(e,t=null,r=[],s=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.wt=null,this._t=null}}function iI(n,e,t,r,s,u,l,m){return new is(n,e,t,r,s,u,l,m)}function su(n){return new is(n)}function Pp(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Wn(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function C_(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Gm(n){return null!==n.collectionGroup}function Dc(n){const e=Ye(n);if(null===e.wt){e.wt=[];const t=C_(e),r=Wn(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Dh(t)),e.wt.push(new Dh(cr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Dh(cr.keyField(),u))}}}return e.wt}function ki(n){const e=Ye(n);if(!e._t)if("F"===e.limitType)e._t=jm(e.path,e.collectionGroup,Dc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Dc(e))t.push(new Dh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ec(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Ec(e.startAt.position,e.startAt.inclusive):null;e._t=jm(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function zm(n,e){e.getFirstInequalityField(),C_(n);const t=n.filters.concat([e]);return new is(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function kp(n,e,t){return new is(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ch(n,e){return $m(ki(n),ki(e))&&n.limitType===e.limitType}function b_(n){return`${Ic(ki(n))}|lt:${n.limitType}`}function T_(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>I_(r)).join(", ")}]`),_h(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ol(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ol(r)).join(",")),`Target(${t})`}(ki(n))}; limitType=${n.limitType})`}function Fp(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Qe.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of Dc(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const m=YE(s,u,l);return s.inclusive?m<=0:m<0}(t.startAt,Dc(t),r)||t.endAt&&!function(s,u,l){const m=YE(s,u,l);return s.inclusive?m>=0:m>0}(t.endAt,Dc(t),r)));var t,r}function sI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bh(n){return(e,t)=>{let r=!1;for(const s of Dc(n)){const u=mb(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function mb(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(s,u,l){const m=u.data.field(s),w=l.data.field(s);return null!==m&&null!==w?To(m,w):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}class ou{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){na(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return Do(this.inner)}size(){return this.innerSize}}const yb=new Nn(Qe.comparator);function si(){return yb}const S_=new Nn(Qe.comparator);function Th(...n){let e=S_;for(const t of n)e=e.insert(t.key,t);return e}function A_(n){let e=S_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ia(){return au()}function Sh(){return au()}function au(){return new ou(n=>n.toString(),(n,e)=>n.isEqual(e))}const vb=new Nn(Qe.comparator),_b=new un(Qe.comparator);function Bt(...n){let e=_b;for(const t of n)e=e.add(t);return e}const oI=new un(Ft);function qm(){return oI}function x_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function aI(n){return{integerValue:""+n}}function M_(n,e){return xp(e)?aI(e):x_(n,e)}class Wm{constructor(){this._=void 0}}function wb(n,e,t){return n instanceof Lp?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Mp(s)&&(s=Om(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Ah?R_(n,e):n instanceof sa?uI(n,e):function(r,s){const u=Eb(r,s),l=N_(u)+N_(r.gt);return Fm(u)&&Fm(r.gt)?aI(l):x_(r.serializer,l)}(n,e)}function HS(n,e,t){return n instanceof Ah?R_(n,e):n instanceof sa?uI(n,e):t}function Eb(n,e){return n instanceof xh?Fm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Lp extends Wm{}class Ah extends Wm{constructor(e){super(),this.elements=e}}function R_(n,e){const t=Mh(e);for(const r of n.elements)t.some(s=>bo(s,r))||t.push(r);return{arrayValue:{values:t}}}class sa extends Wm{constructor(e){super(),this.elements=e}}function uI(n,e){let t=Mh(e);for(const r of n.elements)t=t.filter(s=>!bo(s,r));return{arrayValue:{values:t}}}class xh extends Wm{constructor(e,t){super(),this.serializer=e,this.gt=t}}function N_(n){return Pn(n.integerValue||n.doubleValue)}function Mh(n){return Ih(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Vp{constructor(e,t){this.field=e,this.transform=t}}class Db{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function O_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Zm{}function P_(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Rh(n.key,Zn.none()):new Ll(n.key,n.data,Zn.none());{const t=n.data,r=ii.empty();let s=new un(cr.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new uu(n.key,r,new Pi(s.toArray()),Zn.none())}}function Cb(n,e,t){n instanceof Ll?function(r,s,u){const l=r.value.clone(),m=lI(r.fieldTransforms,s,u.transformResults);l.setAll(m),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof uu?function(r,s,u){if(!O_(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=lI(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(k_(r)),m.setAll(l),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Up(n,e,t,r){return n instanceof Ll?function(s,u,l,m){if(!O_(s.precondition,u))return l;const w=s.value.clone(),b=F_(s.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof uu?function(s,u,l,m){if(!O_(s.precondition,u))return l;const w=F_(s.fieldTransforms,m,u),b=u.data;return b.setAll(k_(s)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,O_(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function Bp(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=Eb(r.transform,s||null);null!=u&&(null===t&&(t=ii.empty()),t.set(r.field,u))}return t||null}function cI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&mh(t,r,(s,u)=>function Ib(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ah&&r instanceof Ah||t instanceof sa&&r instanceof sa?mh(t.elements,r.elements,bo):t instanceof xh&&r instanceof xh?bo(t.gt,r.gt):t instanceof Lp&&r instanceof Lp);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ll extends Zm{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class uu extends Zm{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function k_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function lI(n,e,t){const r=new Map;ut(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,m=e.data.field(u.field);r.set(u.field,HS(l,m,t[s]))}return r}function F_(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,wb(u,l,e))}return r}class Rh extends Zm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jp extends Zm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class L_{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&Cb(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Up(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Up(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Sh();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(s.key)?null:m;const w=P_(l,m);null!==w&&r.set(s.key,w),l.isValidDocument()||l.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&mh(this.mutations,e.mutations,(t,r)=>cI(t,r))&&mh(this.baseMutations,e.baseMutations,(t,r)=>cI(t,r))}}class Km{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ut(e.mutations.length===r.length);let s=vb;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new Km(e,t,r,s)}}class Ym{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Tb{constructor(e,t){this.count=e,this.unchangedNames=t}}var Cr,sn;function dI(n){switch(n){default:return tt();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function V_(n){if(void 0===n)return An("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Cr.OK:return ae.OK;case Cr.CANCELLED:return ae.CANCELLED;case Cr.UNKNOWN:return ae.UNKNOWN;case Cr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Cr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Cr.INTERNAL:return ae.INTERNAL;case Cr.UNAVAILABLE:return ae.UNAVAILABLE;case Cr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Cr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Cr.NOT_FOUND:return ae.NOT_FOUND;case Cr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Cr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Cr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Cr.ABORTED:return ae.ABORTED;case Cr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Cr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Cr.DATA_LOSS:return ae.DATA_LOSS;default:return tt()}}(sn=Cr||(Cr={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";class U_{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Qm}static getOrCreateInstance(){return null===Qm&&(Qm=new U_),Qm}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Qm=null;function hI(){return new TextEncoder}const Sb=new Xa([4294967295,4294967295],0);function fI(n){const e=hI().encode(n),t=new VS;return t.update(e),new Uint8Array(t.digest())}function pI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Xa([t,r],0),new Xa([s,u],0)]}class B_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $p(`Invalid padding: ${t}`);if(r<0)throw new $p(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new $p(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new $p(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Xa.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(Xa.fromNumber(r)));return 1===s.compare(Sb)&&(s=new Xa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=fI(e),[r,s]=pI(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new B_(u,s,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=fI(e),[r,s]=pI(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class $p extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Nh{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Oh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Nh(mt.min(),s,new Nn(Ft),si(),Bt())}}class Oh{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Oh(r,t,Bt(),Bt(),Bt())}}class Jm{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class gI{constructor(e,t){this.targetId=e,this.Vt=t}}class j_{constructor(e,t,r=kr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class mI{constructor(){this.St=0,this.Dt=Xm(),this.Ct=kr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Bt(),t=Bt(),r=Bt();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:tt()}}),new Oh(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=Xm()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Ab{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=si(),this.zt=yI(),this.Wt=new Nn(Ft)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(Et(l))if(0===s){const m=new Qe(l.path);this.Yt(r,m,Bn.newNoDocument(m,mt.min()))}else ut(1===s);else{const m=this.ie(r);if(m!==s){const w=this.re(e,m);0!==w&&(this.ee(r),this.Wt=this.Wt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=U_.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,A,N){var H,Y,_e,Ue,Ve,It;const bt={localCacheCount:A,existenceFilterCount:N.count},_t=N.unchangedNames;return _t&&(bt.bloomFilter={applied:0===b,hashCount:null!==(H=_t?.hashCount)&&void 0!==H?H:0,bitmapLength:null!==(Ue=null===(_e=null===(Y=_t?.bits)||void 0===Y?void 0:Y.bitmap)||void 0===_e?void 0:_e.length)&&void 0!==Ue?Ue:0,padding:null!==(It=null===(Ve=_t?.bits)||void 0===Ve?void 0:Ve.padding)&&void 0!==It?It:0}),bt}(w,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let w,b;try{w=nu(u).toUint8Array()}catch(A){if(A instanceof HE)return Oi("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw A}try{b=new B_(w,l,m)}catch(A){return Oi(A instanceof $p?"BloomFilter error: ":"Applying bloom filter failed: ",A),1}return 0===b.It?1:s!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&Et(m.target)){const w=new Qe(m.target.path);null!==this.jt.get(w)||this.ae(l,w)||this.Yt(l,w,Bn.newNoDocument(w,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=Bt();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const b=this.se(w);return!b||"TargetPurposeLimboResolution"===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new Nh(e,t,this.Wt,this.jt,r);return this.jt=si(),this.zt=yI(),this.Wt=new Nn(Ft),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new mI,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new un(Ft),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Se("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new mI),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function yI(){return new Nn(Qe.comparator)}function Xm(){return new Nn(Qe.comparator)}const $_={asc:"ASCENDING",desc:"DESCENDING"},vI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H_={and:"AND",or:"OR"};class xb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function G_(n,e){return n.useProto3Json||_h(e)?e:{value:e}}function Cc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _I(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wI(n,e){return Cc(n,e.toTimestamp())}function kn(n){return ut(!!n),mt.fromTimestamp(function(e){const t=ra(e);return new Un(t.seconds,t.nanos)}(n))}function ey(n,e){return(t=n,new nn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function EI(n){const e=nn.fromString(n);return ut(NI(e)),e}function ty(n,e){return ey(n.databaseId,e.path)}function So(n,e){const t=EI(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(DI(t))}function Hp(n,e){return ey(n.databaseId,e)}function II(n){const e=EI(n);return 4===e.length?nn.emptyPath():DI(e)}function Vl(n){return new nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DI(n){return ut(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function z_(n,e,t){return{name:ty(n,e),fields:t.value.mapValue.fields}}function ny(n,e,t){const r=So(n,e.name),s=kn(e.updateTime),u=e.createTime?kn(e.createTime):mt.min(),l=new ii({mapValue:{fields:e.fields}}),m=Bn.newFoundDocument(r,s,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Ph(n,e){let t;if(e instanceof Ll)t={update:z_(n,e.key,e.value)};else if(e instanceof Rh)t={delete:ty(n,e.key)};else if(e instanceof uu)t={update:z_(n,e.key,e.data),updateMask:RI(e.fieldMask)};else{if(!(e instanceof jp))return tt();t={verify:ty(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Lp)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ah)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof sa)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof xh)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:wI(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:tt()),t;var s}function ry(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Zn.updateTime(kn(s.updateTime)):void 0!==s.exists?Zn.exists(s.exists):Zn.none():Zn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let m=null;"setToServerValue"in l?(ut("REQUEST_TIME"===l.setToServerValue),m=new Lp):"appendMissingElements"in l?m=new Ah(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new sa(l.removeAllFromArray.values||[]):"increment"in l?m=new xh(u,l.increment):tt();const w=cr.fromServerFormat(l.fieldPath);return new Vp(w,m)}(n,s)):[];var s;if(e.update){const s=So(n,e.update.name),u=new ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Pi((e.updateMask.fieldPaths||[]).map(b=>cr.fromServerFormat(b)));return new uu(s,u,l,t,r)}return new Ll(s,u,t,r)}if(e.delete){const s=So(n,e.delete);return new Rh(s,t)}if(e.verify){const s=So(n,e.verify);return new jp(s,t)}return tt()}function TI(n,e){return{documents:[Hp(n,e.path)]}}function q_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Hp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Hp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0!==w.length)return MI(_n.create(w,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:Ul((A=b).field),direction:xI(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=G_(n,e.limit);var m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function SI(n){let e=II(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ut(1===r);const A=t.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const N=Rb(A);return N instanceof _n&&Um(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new Dh(kh((N=A).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(A){let N;return N="object"==typeof A?A.value:A,_h(N)?null:N}(t.limit));let w=null;var A;t.startAt&&(w=new Ec((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new Ec(A.values||[],!A.before)}(t.endAt)),iI(e,s,l,u,m,"F",w,b)}function Rb(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=kh(e.unaryFilter.field);return rn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=kh(e.unaryFilter.field);return rn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=kh(e.unaryFilter.field);return rn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=kh(e.unaryFilter.field);return rn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}(n):void 0!==n.fieldFilter?rn.create(kh((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return _n.create(e.compositeFilter.filters.map(t=>Rb(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return tt()}}(e.compositeFilter.op))}(n):tt();var e}function xI(n){return $_[n]}function Nb(n){return vI[n]}function Ob(n){return H_[n]}function Ul(n){return{fieldPath:n.canonicalString()}}function kh(n){return cr.fromServerFormat(n.fieldPath)}function MI(n){return n instanceof rn?function(e){if("=="===e.op){if(zE(e.value))return{unaryFilter:{field:Ul(e.field),op:"IS_NAN"}};if(v_(e.value))return{unaryFilter:{field:Ul(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zE(e.value))return{unaryFilter:{field:Ul(e.field),op:"IS_NOT_NAN"}};if(v_(e.value))return{unaryFilter:{field:Ul(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(e.field),op:Nb(e.op),value:e.value}}}(n):n instanceof _n?function(e){const t=e.getFilters().map(r=>MI(r));return 1===t.length?t[0]:{compositeFilter:{op:Ob(e.op),filters:t}}}(n):tt()}function RI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function NI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class oa{constructor(e,t,r,s,u=mt.min(),l=mt.min(),m=kr.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=w}withSequenceNumber(e){return new oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class OI{constructor(e){this.fe=e}}function PI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:iy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ty(s=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Cc(s,u.version.toTimestamp()),createTime:Cc(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bl(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:Bl(e.version)}}var s,u;return r}function iy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jl(n){const e=new Un(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function $l(n,e){const t=(e.baseMutations||[]).map(u=>ry(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>ry(n.fe,u)),s=Un.fromMillis(e.localWriteTimeMs);return new L_(e.batchId,s,t,r)}function cu(n){const e=jl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jl(n.lastLimboFreeSnapshotVersion):mt.min();let r;var s;return void 0!==n.query.documents?(ut(1===(s=n.query).documents.length),r=ki(su(II(s.documents[0])))):r=ki(SI(n.query)),new oa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,kr.fromBase64String(n.resumeToken))}function W_(n,e){const t=Bl(e.snapshotVersion),r=Bl(e.lastLimboFreeSnapshotVersion);let s;s=Et(e.target)?TI(n.fe,e.target):q_(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ic(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function sy(n){const e=SI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?kp(e,e.limit,"L"):e}function oy(n,e){return new Ym(e.largestBatchId,ry(n.fe,e.overlayMutation))}function Z_(n,e){const t=e.path.lastSegment();return[n,er(e.path.popLast()),t]}function K_(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Bl(r.readTime),documentKey:er(r.documentKey.path),largestBatchId:r.largestBatchId}}class kb{getBundleMetadata(e,t){return kI(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:jl(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return kI(e).put({bundleId:(r=t).id,createTime:Bl(kn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Fb(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:sy(s.bundledQuery),readTime:jl(s.readTime)};var s})}saveNamedQuery(e,t){return Fb(e).put({name:(r=t).name,readTime:Bl(kn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function kI(n){return ri(n,"bundles")}function Fb(n){return ri(n,"namedQueries")}class ay{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new ay(e,t.uid||"")}getOverlay(e,t){return Gp(e).get(Z_(this.userId,t)).next(r=>r?oy(this.serializer,r):null)}getOverlays(e,t){const r=ia();return ee.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const m=new Ym(t,l);s.push(this.we(e,m))}),ee.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(er(l.getCollectionPath())));const u=[];return s.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Gp(e).J("collectionPathOverlayIndex",m))}),ee.waitFor(u)}getOverlaysForCollection(e,t,r){const s=ia(),u=er(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Gp(e).j("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const b=oy(this.serializer,w);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=ia();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Gp(e).X({index:"collectionGroupOverlayIndex",range:m},(w,b,A)=>{const N=oy(this.serializer,b);u.size()<s||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):A.done()}).next(()=>u)}we(e,t){return Gp(e).put(function(r,s,u){const[l,m,w]=Z_(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ph(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Gp(n){return ri(n,"documentOverlays")}class Hl{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Pn(e.integerValue));else if("doubleValue"in e){const r=Pn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),wh(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(nu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?qE(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):tt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),Qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Lb(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function FI(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=Lb(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Hl.Ve=new Hl;class zp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),r=FI(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),r=FI(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Vb{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Y_{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class ss{constructor(){this.je=new zp,this.ze=new Vb(this.je),this.We=new Y_(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Gl{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gl(this.indexId,this.documentKey,this.arrayValue,r)}}function aa(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Fh(n.arrayValue,e.arrayValue),0!==t?t:(t=Fh(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function Fh(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Ub{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){ut(e.collectionGroup===this.collectionId);const t=bp(e);if(void 0!==t&&!this.en(t))return!1;const r=xl(e);let s=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!s.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[l++],m))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function LI(n){var e,t;if(ut(n instanceof rn||n instanceof _n),n instanceof rn){if(n instanceof Fl){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>rn.create(n.field,"==",u)))||[];return _n.create(s,"or")}return n}const r=n.filters.map(s=>LI(s));return _n.create(r,n.op)}function Bb(n){if(0===n.getFilters().length)return[];const e=Q_(LI(n));return ut(VI(e)),Lh(e)||Vh(e)?[e]:e.getFilters()}function Lh(n){return n instanceof rn}function Vh(n){return n instanceof _n&&Um(n)}function VI(n){return Lh(n)||Vh(n)||function(e){if(e instanceof _n&&Vm(e)){for(const t of e.getFilters())if(!Lh(t)&&!Vh(t))return!1;return!0}return!1}(n)}function Q_(n){if(ut(n instanceof rn||n instanceof _n),n instanceof rn)return n;if(1===n.filters.length)return Q_(n.filters[0]);const e=n.filters.map(r=>Q_(r));let t=_n.create(e,n.op);return t=Uh(t),VI(t)?t:(ut(t instanceof _n),ut(Pl(t)),ut(t.filters.length>1),t.filters.reduce((r,s)=>uy(r,s)))}function uy(n,e){let t;return ut(n instanceof rn||n instanceof _n),ut(e instanceof rn||e instanceof _n),t=n instanceof rn?e instanceof rn?_n.create([n,e],"and"):J_(n,e):e instanceof rn?J_(e,n):function(r,s){if(ut(r.filters.length>0&&s.filters.length>0),Pl(r)&&Pl(s))return E_(r,s.getFilters());const u=Vm(r)?r:s,l=Vm(r)?s:r,m=u.filters.map(w=>uy(w,l));return _n.create(m,"or")}(n,e),Uh(t)}function J_(n,e){if(Pl(e))return E_(e,n.getFilters());{const t=e.filters.map(r=>uy(n,r));return _n.create(t,"or")}}function Uh(n){if(ut(n instanceof rn||n instanceof _n),n instanceof rn)return n;const e=n.getFilters();if(1===e.length)return Uh(e[0]);if(__(n))return n;const t=e.map(s=>Uh(s)),r=[];return t.forEach(s=>{s instanceof rn?r.push(s):s instanceof _n&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:_n.create(r,n.op)}class UI{constructor(){this.rn=new qp}addToCollectionParentIndex(e,t){return this.rn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(ns.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class qp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new un(nn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new un(nn.comparator)).toArray()}}const Bh=new Uint8Array(0);class BI{constructor(e,t){this.user=e,this.databaseId=t,this.on=new qp,this.un=new ou(r=>Ic(r),(r,s)=>$m(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:er(s)};return cy(e).put(u)}return ee.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[ME(t),""],!1,!0);return cy(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(qs(l.parent))}return r})}addFieldIndex(e,t){const r=ly(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=Wp(e);return u.next(m=>{l.put(K_(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=ly(e),s=Wp(e),u=zl(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=zl(e);let s=!0;const u=new Map;return ee.forEach(this.cn(t),l=>this.an(e,l).next(m=>{s&&(s=!!m),u.set(l,m)})).next(()=>{if(s){let l=Bt();const m=[];return ee.forEach(u,(w,b)=>{var A;Se("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(_t=>`${_t.fieldPath}:${_t.kind}`).join(",")}`} to execute ${Ic(t)}`);const N=function(_t,Pt){const Ht=bp(Pt);if(void 0===Ht)return null;for(const dn of Hm(_t,Ht.fieldPath))switch(dn.op){case"array-contains-any":return dn.value.arrayValue.values||[];case"array-contains":return[dn.value]}return null}(b,w),H=function(_t,Pt){const Ht=new Map;for(const dn of xl(Pt))for(const us of Hm(_t,dn.fieldPath))switch(us.op){case"==":case"in":Ht.set(dn.fieldPath.canonicalString(),us.value);break;case"not-in":case"!=":return Ht.set(dn.fieldPath.canonicalString(),us.value),Array.from(Ht.values())}return null}(b,w),Y=function(_t,Pt){const Ht=[];let dn=!0;for(const us of xl(Pt)){const Dg=0===us.kind?nI(_t,us.fieldPath,_t.startAt):rI(_t,us.fieldPath,_t.startAt);Ht.push(Dg.value),dn&&(dn=Dg.inclusive)}return new Ec(Ht,dn)}(b,w),_e=function(_t,Pt){const Ht=[];let dn=!0;for(const us of xl(Pt)){const Dg=0===us.kind?rI(_t,us.fieldPath,_t.endAt):nI(_t,us.fieldPath,_t.endAt);Ht.push(Dg.value),dn&&(dn=Dg.inclusive)}return new Ec(Ht,dn)}(b,w),Ue=this.hn(w,b,Y),Ve=this.hn(w,b,_e),It=this.ln(w,b,H),bt=this.fn(w.indexId,N,Ue,Y.inclusive,Ve,_e.inclusive,It);return ee.forEach(bt,_t=>r.H(_t,t.limit).next(Pt=>{Pt.forEach(Ht=>{const dn=Qe.fromSegments(Ht.documentKey);l.has(dn)||(l=l.add(dn),m.push(dn))})}))}).next(()=>m)}return ee.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Bb(_n.create(e.filters,"and")).map(r=>jm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,s,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),A=[];for(let N=0;N<w;++N){const H=t?this.dn(t[N/b]):Bh,Y=this.wn(e,H,r[N%b],s),_e=this._n(e,H,u[N%b],l),Ue=m.map(Ve=>this.wn(e,H,Ve,!0));A.push(...this.createRange(Y,_e,Ue))}return A}wn(e,t,r,s){const u=new Gl(e,Qe.empty(),t,r);return s?u:u.Je()}_n(e,t,r,s){const u=new Gl(e,Qe.empty(),t,r);return s?u.Je():u}an(e,t){const r=new Ub(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const s=this.cn(t);return ee.forEach(s,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new un(cr.comparator),b=!1;for(const A of m.filters)for(const N of A.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?b=!0:w=w.add(N.field));for(const A of m.orderBy)A.field.isKeyField()||(w=w.add(A.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}mn(e,t){const r=new ss;for(const s of xl(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.He(s.kind);Hl.Ve._e(u,l)}return r.Qe()}dn(e){const t=new ss;return Hl.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new ss;return Hl.Ve._e(wc(this.databaseId,t),r.He(function(s){const u=xl(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let s=[];s.push(new ss);let u=0;for(const l of xl(e)){const m=r[u++];for(const w of s)if(this.yn(t,l.fieldPath)&&Ih(m))s=this.pn(s,l,m);else{const b=w.He(l.kind);Hl.Ve._e(m,b)}}return this.In(s)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of s){const w=new ss;w.seed(m.Qe()),Hl.Ve._e(l,w.He(t.kind)),u.push(w)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof rn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ly(e),s=Wp(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return ee.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{l.push(function(b,A){const N=A?new vh(A.sequenceNumber,new ns(jl(A.readTime),new Qe(qs(A.documentKey)),A.largestBatchId)):vh.empty(),H=b.fields.map(([Y,_e])=>new yh(cr.fromServerFormat(Y),_e));return new Al(b.indexId,b.collectionGroup,H,N)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Ft(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=ly(e),u=Wp(e);return this.Tn(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ee.forEach(m,w=>u.put(K_(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ee.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?ee.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),ee.forEach(m,w=>this.En(e,s,w).next(b=>{const A=this.An(u,w);return b.isEqual(A)?ee.resolve():this.vn(e,u,w,b,A)}))))})}Rn(e,t,r,s){return zl(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,s){return zl(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const s=zl(e);let u=new un(aa);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new Gl(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new un(aa);const s=this.mn(t,e);if(null==s)return r;const u=bp(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Ih(l))for(const m of l.arrayValue.values||[])r=r.add(new Gl(t.indexId,e.key,this.dn(m),s))}else r=r.add(new Gl(t.indexId,e.key,Bh,s));return r}vn(e,t,r,s,u){Se("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,b,A,N){const H=m.getIterator(),Y=w.getIterator();let _e=Rl(H),Ue=Rl(Y);for(;_e||Ue;){let Ve=!1,It=!1;if(_e&&Ue){const bt=b(_e,Ue);bt<0?It=!0:bt>0&&(Ve=!0)}else null!=_e?It=!0:Ve=!0;Ve?(A(Ue),Ue=Rl(Y)):It?(N(_e),_e=Rl(H)):(_e=Rl(H),Ue=Rl(Y))}}(s,u,aa,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),ee.waitFor(l)}Tn(e){let t=1;return Wp(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>aa(l,m)).filter((l,m,w)=>!m||0!==aa(l,w[m-1]));const s=[];s.push(e);for(const l of r){const m=aa(l,e),w=aa(l,t);if(0===m)s[0]=e.Je();else if(m>0&&w<0)s.push(l),s.push(l.Je());else if(w>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.bn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,Bh,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,Bh,[]]))}return u}bn(e,t){return aa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jI)}getMinOffset(e,t){return ee.mapArray(this.cn(t),r=>this.an(e,r).next(s=>s||tt())).next(jI)}}function cy(n){return ri(n,"collectionParents")}function zl(n){return ri(n,"indexEntries")}function ly(n){return ri(n,"indexConfiguration")}function Wp(n){return ri(n,"indexState")}function jI(n){ut(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Tp(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ns(e.readTime,e.documentKey,t)}const $I={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class oi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new oi(e,oi.DEFAULT_COLLECTION_PERCENTILE,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dy(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:l},(A,N,H)=>(m++,H.delete()));u.push(w.next(()=>{ut(1===m)}));const b=[];for(const A of t.mutations){const N=FE(e,A.key.path,t.batchId);u.push(s.delete(N)),b.push(A.key)}return ee.waitFor(u).next(()=>b)}function Zp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}oi.DEFAULT_COLLECTION_PERCENTILE=10,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oi.DEFAULT=new oi(41943040,oi.DEFAULT_COLLECTION_PERCENTILE,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oi.DISABLED=new oi(-1,0,0);class hy{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,t,r,s){ut(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new hy(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=jh(e),l=lu(e);return l.add({}).next(m=>{ut("number"==typeof m);const w=new L_(m,t,r,s),b=function(H,Y,_e){const Ue=_e.baseMutations.map(It=>Ph(H.fe,It)),Ve=_e.mutations.map(It=>Ph(H.fe,It));return{userId:Y,batchId:_e.batchId,localWriteTimeMs:_e.localWriteTime.toMillis(),baseMutations:Ue,mutations:Ve}}(this.serializer,this.userId,w),A=[];let N=new un((H,Y)=>Ft(H.canonicalString(),Y.canonicalString()));for(const H of s){const Y=FE(this.userId,H.key.path,m);N=N.add(H.key.path.popLast()),A.push(l.put(b)),A.push(u.put(Y,p_))}return N.forEach(H=>{A.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.Vn[m]=w.keys()}),ee.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return lu(e).get(t).next(r=>r?(ut(r.userId===this.userId),$l(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ee.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return lu(e).X({index:"userMutationsIndex",range:s},(l,m,w)=>{m.userId===this.userId&&(ut(m.batchId>=r),u=$l(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).j("userMutationsIndex",t).next(r=>r.map(s=>$l(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Eh(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return jh(e).X({range:s},(l,m,w)=>{const[b,A,N]=l,H=qs(A);if(b===this.userId&&t.path.isEqual(H))return lu(e).get(N).next(Y=>{if(!Y)throw tt();ut(Y.userId===this.userId),u.push($l(this.serializer,Y))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(Ft);const s=[];return t.forEach(u=>{const l=Eh(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=jh(e).X({range:m},(b,A,N)=>{const[H,Y,_e]=b,Ue=qs(Y);H===this.userId&&u.path.isEqual(Ue)?r=r.add(_e):N.done()});s.push(w)}),ee.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Eh(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new un(Ft);return jh(e).X({range:l},(w,b,A)=>{const[N,H,Y]=w,_e=qs(H);N===this.userId&&r.isPrefixOf(_e)?_e.length===s&&(m=m.add(Y)):A.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(lu(e).get(u).next(l=>{if(null===l)throw tt();ut(l.userId===this.userId),r.push($l(this.serializer,l))}))}),ee.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return dy(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ee.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ee.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return jh(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=qs(u[1]);s.push(w)}else m.done()}).next(()=>{ut(0===s.length)})})}containsKey(e,t){return X_(e,this.userId,t)}xn(e){return e0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function X_(n,e,t){const r=Eh(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return jh(n).X({range:u,Y:!0},(m,w,b)=>{const[A,N,H]=m;A===e&&N===s&&(l=!0),b.done()}).next(()=>l)}function lu(n){return ri(n,"mutations")}function jh(n){return ri(n,"documentMutations")}function e0(n){return ri(n,"mutationQueues")}class bc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new bc(0)}static Mn(){return new bc(-1)}}class jb{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new bc(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>mt.fromTimestamp(new Un(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ql(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(ut(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return ql(e).X((l,m)=>{const w=cu(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>ee.waitFor(u)).next(()=>s)}forEachTarget(e,t){return ql(e).X((r,s)=>{const u=cu(s);t(u)})}$n(e){return HI(e).get("targetGlobalKey").next(t=>(ut(null!==t),t))}On(e,t){return HI(e).put("targetGlobalKey",t)}Fn(e,t){return ql(e).put(W_(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ic(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ql(e).X({range:s,index:"queryTargetsIndex"},(l,m,w)=>{const b=cu(m);$m(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=lr(e);return t.forEach(l=>{const m=er(l.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,l))}),ee.waitFor(s)}removeMatchingKeys(e,t,r){const s=lr(e);return ee.forEach(t,u=>{const l=er(u.path);return ee.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=lr(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=lr(e);let u=Bt();return s.X({range:r,Y:!0},(l,m,w)=>{const b=qs(l[1]),A=new Qe(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=er(t.path),s=IDBKeyRange.bound([r],[ME(r)],!1,!0);let u=0;return lr(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,m],w,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}le(e,t){return ql(e).get(t).next(r=>r?cu(r):null)}}function ql(n){return ri(n,"targets")}function HI(n){return ri(n,"targetGlobal")}function lr(n){return ri(n,"targetDocuments")}function Wl([n,e],[t,r]){const s=Ft(n,t);return 0===s?Ft(e,r):s}class $b{constructor(e){this.Ln=e,this.buffer=new un(Wl),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Wl(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class GI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){tu(r)?Se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield eu(r)}yield t.Qn(3e5)}))}}class GS{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ee.resolve(rs.ct);const r=new $b(t);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve($I)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$I):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,s,u,l,m,w,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),s=this.params.maximumSequenceNumbersToCollect):s=N,l=Date.now(),this.nthSequenceNumber(e,s))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),zs()<=Qi.in.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${s} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(b-w)+`ms\nTotal Duration: ${b-A}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:N})))}}class zI{constructor(e,t){this.db=e,this.garbageCollector=function Hb(n,e){return new GS(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,s)=>t(s))}addReference(e,t,r){return $h(e,r)}removeReference(e,t,r){return $h(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $h(e,t)}Xn(e,t){return function(r,s){let u=!1;return e0(r).Z(l=>X_(r,l,s).next(m=>(m&&(u=!0),ee.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const w=this.Xn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,mt.min()),lr(e).delete([0,er(l.path)])))});s.push(w)}}).next(()=>ee.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $h(e,t)}Yn(e,t){const r=lr(e);let s,u=rs.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:b})=>{0===l?(u!==rs.ct&&t(new Qe(qs(s)),u),u=b,s=w):u=rs.ct}).next(()=>{u!==rs.ct&&t(new Qe(qs(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $h(n,e){return lr(n).put((r=n.currentSequenceNumber,{targetId:0,path:er(e.path),sequenceNumber:r}));var r}class Hh{constructor(){this.changes=new ou(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Gb{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Zl(e).put(r)}removeEntry(e,t,r){return Zl(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],iy(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Bn.newInvalidDocument(t);return Zl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Kp(t))},(s,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Bn.newInvalidDocument(t)};return Zl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Kp(t))},(s,u)=>{r={document:this.ts(t,u),size:Zp(u)}}).next(()=>r)}getEntries(e,t){let r=si();return this.ns(e,t,(s,u)=>{const l=this.ts(s,u);r=r.insert(s,l)}).next(()=>r)}ss(e,t){let r=si(),s=new Nn(Qe.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),s=s.insert(u,Zp(l))}).next(()=>({documents:r,rs:s}))}ns(e,t,r){if(t.isEmpty())return ee.resolve();let s=new un(py);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(Kp(s.first()),Kp(s.last())),l=s.getIterator();let m=l.getNext();return Zl(e).X({index:"documentKeyIndex",range:u},(w,b,A)=>{const N=Qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&py(m,N)<0;)r(m,null),m=l.getNext();m&&m.isEqual(N)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?A.G(Kp(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),iy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zl(e).j(IDBKeyRange.bound(l,m,!0)).next(w=>{let b=si();for(const A of w){const N=this.ts(Qe.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);N.isFoundDocument()&&(Fp(t,N)||s.has(N.key))&&(b=b.insert(N.key,N))}return b})}getAllFromCollectionGroup(e,t,r,s){let u=si();const l=qI(t,r),m=qI(t,ns.max());return Zl(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,b,A)=>{const N=this.ts(Qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===s&&A.done()}).next(()=>u)}newChangeBuffer(e){return new zb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return t0(e).get("remoteDocumentGlobalKey").next(t=>(ut(!!t),t))}Zn(e,t){return t0(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function Pb(n,e){let t;if(e.document)t=ny(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),s=jl(e.noDocument.readTime);t=Bn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=Qe.fromSegments(e.unknownDocument.path),s=jl(e.unknownDocument.version);t=Bn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Un(r[0],r[1]);return mt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return Bn.newInvalidDocument(e)}}function fy(n){return new Gb(n)}class zb extends Hh{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ou(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new un((u,l)=>Ft(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=PI(this.os.serializer,l);s=s.add(u.path.popLast());const b=Zp(w);r+=b-m.size,t.push(this.os.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=PI(this.os.serializer,l.convertToNoDocument(mt.min()));t.push(this.os.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ee.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:s})=>(s.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function t0(n){return ri(n,"remoteDocumentGlobal")}function Zl(n){return ri(n,"remoteDocumentsV14")}function Kp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qI(n,e){const t=e.documentKey.path.toArray();return[n,iy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function py(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Ft(t[u],r[u]),s)return s;return s=Ft(t.length,r.length),s||(s=Ft(t[t.length-2],r[r.length-2]),s||Ft(t[t.length-1],r[r.length-1]))}class WI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class n0{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&Up(r.mutation,s,Pi.empty(),Un.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bt()){const s=ia();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=Th();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ia();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,s){let u=si();const l=au(),m=au();return t.forEach((w,b)=>{const A=r.get(b.key);s.has(b.key)&&(void 0===A||A.mutation instanceof uu)?u=u.insert(b.key,b):void 0!==A?(l.set(b.key,A.mutation.getFieldMask()),Up(A.mutation,b,A.mutation.getFieldMask(),Un.now())):l.set(b.key,Pi.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,A)=>l.set(b,A)),t.forEach((b,A)=>{var N;return m.set(b,new WI(A,null!==(N=l.get(b))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=au();let s=new Nn((l,m)=>l-m),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let A=r.get(w)||Pi.empty();A=m.applyToLocalView(b,A),r.set(w,A);const N=(s.get(m.batchId)||Bt()).add(w);s=s.insert(m.batchId,N)})}).next(()=>{const l=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,A=w.value,N=Sh();A.forEach(H=>{if(!u.has(H)){const Y=P_(t.get(H),r.get(H));null!==Y&&N.set(H,Y),u=u.add(H)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,N))}return ee.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Gm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ee.resolve(ia());let m=-1,w=u;return l.next(b=>ee.forEach(b,(A,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(A)?ee.resolve():this.remoteDocumentCache.getEntry(e,A).next(H=>{w=w.insert(A,H)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,Bt())).next(A=>({batchId:m,changes:A_(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let s=Th();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Th();return this.indexManager.getCollectionParents(e,s).next(l=>ee.forEach(l,m=>{const w=(b=t,A=m.child(s),new is(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((m,w)=>{const b=w.getKey();null===u.get(b)&&(u=u.insert(b,Bn.newInvalidDocument(b)))});let l=Th();return u.forEach((m,w)=>{const b=s.get(m);void 0!==b&&Up(b.mutation,w,Pi.empty(),Un.now()),Fp(t,w)&&(l=l.insert(m,w))}),l})}}class gy{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ee.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:kn(r.createTime)}),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:sy(r.bundledQuery),readTime:kn(r.readTime)}),ee.resolve();var r}}class r0{constructor(){this.overlays=new Nn(Qe.comparator),this.ls=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ia();return ee.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const s=ia(),u=t.length+1,l=new Qe(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Nn((b,A)=>b-A);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=ia(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const m=ia(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,A)=>m.set(b,A)),!(m.size()>=s)););return ee.resolve(m)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Ym(t,r));let u=this.ls.get(t);void 0===u&&(u=Bt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class ZI{constructor(){this.fs=new un(Fr.ds),this.ws=new un(Fr._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Fr(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Fr(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Qe(new nn([])),r=new Fr(t,e),s=new Fr(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qe(new nn([])),r=new Fr(t,e),s=new Fr(t,e+1);let u=Bt();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Fr(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Fr{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qe.comparator(e.key,t.key)||Ft(e.As,t.As)}static _s(e,t){return Ft(e.As,t.As)||Qe.comparator(e.key,t.key)}}class qb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new un(Fr.ds)}checkEmpty(e){return ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new L_(u,t,r,s);this.mutationQueue.push(l);for(const m of s)this.Rs=this.Rs.add(new Fr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(l)}lookupMutationBatch(e,t){return ee.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Fr(t,0),s=new Fr(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const m=this.Ps(l.As);u.push(m)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(Ft);return t.forEach(s=>{const u=new Fr(s,0),l=new Fr(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),ee.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Qe.isDocumentKey(u)||(u=u.child(""));const l=new Fr(new Qe(u),0);let m=new un(Ft);return this.Rs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(m=m.add(w.As)),!0)},l),ee.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){ut(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ee.forEach(t.mutations,s=>{const u=new Fr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Fr(t,0),s=this.Rs.firstAfterOrEqual(r);return ee.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ee.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class KI{constructor(e){this.Ds=e,this.docs=new Nn(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let r=si();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Bn.newInvalidDocument(s))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=si();const l=t.path,m=new Qe(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:b,value:{document:A}}=w.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||Tp(l_(A),r)<=0||(s.has(A.key)||Fp(t,A))&&(u=u.insert(A.key,A.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,t,r,s){tt()}Cs(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Gh(this)}getSize(e){return ee.resolve(this.size)}}class Gh extends Hh{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Wb{constructor(e){this.persistence=e,this.xs=new ou(t=>Ic(t),$m),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ZI,this.targetCount=0,this.Ms=bc.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ee.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new bc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Fn(t),ee.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),ee.waitFor(u).next(()=>s)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.ks.containsKey(t))}}class my{constructor(e,t){this.$s={},this.overlays={},this.Os=new rs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Wb(this),this.indexManager=new UI,this.remoteDocumentCache=new KI(r=>this.referenceDelegate.Ls(r)),this.serializer=new OI(t),this.qs=new gy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new r0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new qb(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Se("MemoryPersistence","Starting transaction:",e);const s=new s0(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return ee.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class s0 extends NE{constructor(e){super(),this.currentSequenceNumber=e}}class o0{constructor(e){this.persistence=e,this.Qs=new ZI,this.js=null}static zs(e){return new o0(e)}get Ws(){if(this.js)return this.js;throw tt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Ws,r=>{const s=Qe.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,mt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ee.or([()=>ee.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class zS{constructor(e){this.serializer=e}O(e,t,r,s){const u=new Sp("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_c,{unique:!0}),m.createObjectStore("documentMutations"),YI(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=ee.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),YI(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").j().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_c,{unique:!0});const A=w.store("mutations"),N=b.map(H=>A.put(H));return ee.waitFor(N)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Ys(u))),r<6&&s>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&s>=7&&(l=l.next(()=>this.Zs(u))),r<8&&s>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ei(u))),r<11&&s>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:ab});w.createIndex("collectionPathOverlayIndex",BE,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",jE,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:US});w.createIndex("documentKeyIndex",BS),w.createIndex("collectionGroupIndex",nb)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.si(e,u))),r<15&&s>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:VE}).createIndex("sequenceNumberIndex",sb,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:ob}).createIndex("documentKeyIndex",UE,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=Zp(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>ee.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>ee.forEach(m,w=>{ut(w.userId===u.userId);const b=$l(this.serializer,w);return dy(e,u.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,m)=>{const w=new nn(l),b=[0,er(w)];u.push(t.get(b).next(A=>A?ee.resolve():t.put({targetId:0,path:er(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ee.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Pr});const r=t.store("collectionParents"),s=new qp,u=l=>{if(s.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:er(w)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const w=new nn(l);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,w],b)=>{const A=qs(m);return u(A.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,s)=>{const u=cu(s),l=W_(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(b=l,b.document?new Qe(nn.fromString(b.document.name).popFirst(5)):b.noDocument?Qe.fromSegments(b.noDocument.path):b.unknownDocument?Qe.fromSegments(b.unknownDocument.path):tt()).path.toArray();var b;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(m.put(A))}).next(()=>ee.waitFor(s))}si(e,t){const r=t.store("mutations"),s=fy(this.serializer),u=new my(o0.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(w=>{var b;let A=null!==(b=m.get(w.userId))&&void 0!==b?b:Bt();$l(this.serializer,w).keys().forEach(N=>A=A.add(N)),m.set(w.userId,A)}),ee.forEach(m,(w,b)=>{const A=new Wr(b),N=ay.de(this.serializer,A),H=u.getIndexManager(A),Y=hy.de(A,this.serializer,H,u.referenceDelegate);return new n0(s,Y,N,H).recalculateAndSaveOverlaysForDocumentKeys(new Rm(t,rs.ct),w).next()})})}}function YI(n){n.createObjectStore("targetDocuments",{keyPath:LE}).createIndex("documentTargetsIndex",ib,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rb,{unique:!0}),n.createObjectStore("targetGlobal")}const a0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class u0{constructor(e,t,r,s,u,l,m,w,b,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=b,this.oi=A,this.ui=N,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=H=>Promise.resolve(),!u0.D())throw new Te(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zI(this,s),this.di=t+"main",this.serializer=new OI(w),this.wi=new Io(this.di,this.ui,new zS(this.serializer)),this.Bs=new jb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fy(this.serializer),this.qs=new kb,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===A&&An("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Te(ae.FAILED_PRECONDITION,a0);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new rs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ye.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(tu(e))return Se("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Se("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return zh(e).get("owner").next(t=>ee.resolve(this.Ri(t)))}Pi(e){return Yp(e).delete(this.clientId)}bi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=ri(r,"clientMetadata");return s.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return ee.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ee.resolve(!0):zh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Te(ae.FAILED_PRECONDITION,a0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yp(e).j().next(r=>void 0===this.Si(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Se("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Rm(t,rs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Yp(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return hy.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new BI(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return ay.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Se("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?cb:14===l?g_:13===l?$E:12===l?ub:11===l?Ml:void tt();var l;let m;return this.wi.runTransaction(e,s,u,w=>(m=new Rm(w,this.Os?this.Os.next():rs.ct),"readwrite-primary"===t?this.Ti(m).next(b=>!!b||this.Ei(m)).next(b=>{if(!b)throw An(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Te(ae.FAILED_PRECONDITION,d_);return r(m)}).next(b=>this.vi(m).next(()=>b)):this.Oi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Oi(e){return zh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Te(ae.FAILED_PRECONDITION,a0)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zh(e).put("owner",t)}static D(){return Io.D()}Ai(e){const t=zh(e);return t.get("owner").next(r=>this.Ri(r)?(Se("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ee.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(An(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Yt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Se("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return An("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){An("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zh(n){return ri(n,"owner")}function Yp(n){return ri(n,"clientMetadata")}function c0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class vy{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=Bt(),s=Bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new vy(e,t.fromCache,r,s)}}class l0{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(Pp(t))return ee.resolve(null);let r=ki(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=kp(t,null,"F"),r=ki(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Bt(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.ji(t,m);return this.zi(t,b,l,w.readTime)?this.Ki(e,kp(t,null,"F")):this.Wi(e,b,t,w)}))})))}Gi(e,t,r,s){return Pp(t)||s.isEqual(mt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(zs()<=Qi.in.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),T_(t)),this.Wi(e,l,t,Am(s,-1)))})}ji(e,t){let r=new un(bh(e));return t.forEach((s,u)=>{Fp(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return zs()<=Qi.in.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",T_(t)),this.Ui.getDocumentsMatchingQuery(e,t,ns.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class Zb{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new Nn(Ft),this.Yi=new ou(u=>Ic(u),$m),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new n0(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function QI(n,e,t,r){return new Zb(n,e,t,r)}function d0(n,e){return h0.apply(this,arguments)}function h0(){return h0=(0,ye.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=Bt();for(const b of s){l.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}for(const b of u){m.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(b=>({er:b,removedBatchIds:l,addedBatchIds:m}))})})}),h0.apply(this,arguments)}function f0(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function p0(n,e,t){let r=Bt(),s=Bt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=si();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(mt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Se("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{nr:l,sr:s}})}function Kb(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qh(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,ee.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new oa(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Qp(n,e,t){return _y.apply(this,arguments)}function _y(){return _y=(0,ye.Z)(function*(n,e,t){const r=Ye(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!tu(l))throw l;Se("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),_y.apply(this,arguments)}function g0(n,e,t){const r=Ye(n);let s=mt.min(),u=Bt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,b){const A=Ye(m),N=A.Yi.get(b);return void 0!==N?ee.resolve(A.Ji.get(N)):A.Bs.getTargetData(w,b)}(r,l,ki(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:mt.min(),t?u:Bt())).next(m=>(Jb(r,sI(e),m),{documents:m,ir:u})))}function Yb(n,e){const t=Ye(n),r=Ye(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function Qb(n,e){const t=Ye(n),r=t.Xi.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,Am(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(Jb(t,e,s),s))}function Jb(n,e,t){let r=n.Xi.get(e)||mt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function eD(){return eD=(0,ye.Z)(function*(n,e,t,r){const s=Ye(n);let u=Bt(),l=si();for(const b of t){const A=e.rr(b.metadata.name);b.document&&(u=u.add(A));const N=e.ur(b);N.setReadTime(e.cr(b.metadata.readTime)),l=l.insert(A,N)}const m=s.Zi.newChangeBuffer({trackRemovals:!0}),w=yield qh(s,(b=r,ki(su(nn.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>p0(b,m,l).next(A=>(m.apply(b),A)).next(A=>s.Bs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>s.Bs.addMatchingKeys(b,u,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,A.nr,A.sr)).next(()=>A.nr)))}),eD.apply(this,arguments)}function WS(n,e){return tD.apply(this,arguments)}function tD(){return tD=(0,ye.Z)(function*(n,e,t=Bt()){const r=yield qh(n,ki(sy(e.bundledQuery))),s=Ye(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=kn(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.qs.saveNamedQuery(u,e);const m=r.withResumeToken(kr.EMPTY_BYTE_STRING,l);return s.Ji=s.Ji.insert(m.targetId,m),s.Bs.updateTargetData(u,m).next(()=>s.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>s.qs.saveNamedQuery(u,e))})}),tD.apply(this,arguments)}function Jp(n,e){return`firestore_clients_${n}_${e}`}function Xb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function wy(n,e){return`firestore_targets_${n}_${e}`}class Kl{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static ar(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Te(s.error.code,s.error.message))),l?new Kl(e,t,s.state,u):(An("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Te(r.error.code,r.error.message))),u?new Wh(e,r.state,s):(An("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=qm();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=xp(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new Xp(e,u):(An("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class nD{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new nD(t.clientId,t.onlineState):(An("SharedClientState",`Failed to parse online state: ${e}`),null)}}class eg{constructor(){this.activeTargetIds=qm()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ey{constructor(e,t,r,s,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Nn(Ft),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=Jp(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new eg),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const u=e.getItem(Jp(e.persistenceKey,s));if(u){const l=Xp.ar(s,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const s=e.br(r);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(wy(this.persistenceKey,e));if(r){const s=Wh.ar(e,r);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wy(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Se("SharedClientState","READ",e,t),t}setItem(e,t){Se("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Se("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Se("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void An("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.Fr(s,null)}{const s=t.Br(r.key,r.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.Lr(r.key,r.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const s=t.Ur(r.key,r.newValue);if(s)return t.Kr(s)}}else if(r.key===t.vr){if(null!==r.newValue){const s=t.br(r.newValue);if(s)return t.Vr(s)}}else if(r.key===t.Ir){const s=function(u){let l=rs.ct;if(null!=u)try{const m=JSON.parse(u);ut("number"==typeof m),l=m}catch(m){An("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);s!==rs.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Gr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const s=new Kl(this.currentUser,e,t,r),u=Xb(this.persistenceKey,this.currentUser,e);this.setItem(u,s.hr())}Cr(e){const t=Xb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const s=wy(this.persistenceKey,e),u=new Wh(e,t,r);this.setItem(s,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Xp.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return Kl.ar(new Wr(void 0!==r[2]?r[2]:null),s,t)}Ur(e,t){const r=this.Ar.exec(e),s=Number(r[1]);return Wh.ar(s,t)}br(e){return nD.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Se("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(w=>{s.has(w)||l.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=qm();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class rD{constructor(){this.Hr=new eg,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new eg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ZS{Yr(e){}shutdown(){}}class eT{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Iy=null;function m0(){return null===Iy?Iy=268435456+Math.round(2147483648*Math.random()):Iy++,"0x"+Iy.toString(16)}const Dy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tT{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Fi="WebChannelConnection";class KS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=m0(),m=this.To(e,t);Se("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const w={};return this.Eo(w,s,u),this.Ao(e,m,w,r).then(b=>(Se("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw Oi("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",m,"request:",r),b})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+mc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${Dy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=m0();return new Promise((l,m)=>{const w=new DE;w.setWithCredentials(!0),w.listenOnce(QC.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case r_.NO_ERROR:const A=w.getResponseJson();Se(Fi,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(A)),l(A);break;case r_.TIMEOUT:Se(Fi,`RPC '${e}' ${u} timed out`),m(new Te(ae.DEADLINE_EXCEEDED,"Request time out"));break;case r_.HTTP_ERROR:const N=w.getStatus();if(Se(Fi,`RPC '${e}' ${u} failed with status:`,N,"response text:",w.getResponseText()),N>0){let H=w.getResponseJson();Array.isArray(H)&&(H=H[0]);const Y=H?.error;if(Y&&Y.status&&Y.message){const _e=function(Ue){const Ve=Ue.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Ve)>=0?Ve:ae.UNKNOWN}(Y.status);m(new Te(_e,Y.message))}else m(new Te(ae.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new Te(ae.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Se(Fi,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(s);Se(Fi,`RPC '${e}' ${u} sending request:`,s),w.send(t,"POST",b,r,15)})}Ro(e,t,r){const s=m0(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=KC(),m=YC(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(w.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(w.xmlHttpFactory=new JC({})),this.Eo(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const A=u.join("");Se(Fi,`Creating RPC '${e}' stream ${s}: ${A}`,w);const N=l.createWebChannel(A,w);let H=!1,Y=!1;const _e=new tT({ro:Ve=>{Y?Se(Fi,`Not sending because RPC '${e}' stream ${s} is closed:`,Ve):(H||(Se(Fi,`Opening RPC '${e}' stream ${s} transport.`),N.open(),H=!0),Se(Fi,`RPC '${e}' stream ${s} sending:`,Ve),N.send(Ve))},oo:()=>N.close()}),Ue=(Ve,It,bt)=>{Ve.listen(It,_t=>{try{bt(_t)}catch(Pt){setTimeout(()=>{throw Pt},0)}})};return Ue(N,s_.EventType.OPEN,()=>{Y||Se(Fi,`RPC '${e}' stream ${s} transport opened.`)}),Ue(N,s_.EventType.CLOSE,()=>{Y||(Y=!0,Se(Fi,`RPC '${e}' stream ${s} transport closed`),_e.wo())}),Ue(N,s_.EventType.ERROR,Ve=>{Y||(Y=!0,Oi(Fi,`RPC '${e}' stream ${s} transport errored:`,Ve),_e.wo(new Te(ae.UNAVAILABLE,"The operation could not be completed")))}),Ue(N,s_.EventType.MESSAGE,Ve=>{var It;if(!Y){const bt=Ve.data[0];ut(!!bt);const Pt=bt.error||(null===(It=bt[0])||void 0===It?void 0:It.error);if(Pt){Se(Fi,`RPC '${e}' stream ${s} received error:`,Pt);const Ht=Pt.status;let dn=function(Dg){const M1=Cr[Dg];if(void 0!==M1)return V_(M1)}(Ht),us=Pt.message;void 0===dn&&(dn=ae.INTERNAL,us="Unknown error status: "+Ht+" with message "+Pt.message),Y=!0,_e.wo(new Te(dn,us)),N.close()}else Se(Fi,`RPC '${e}' stream ${s} received:`,bt),_e._o(bt)}}),Ue(m,IE.STAT_EVENT,Ve=>{Ve.stat===i_.PROXY?Se(Fi,`RPC '${e}' stream ${s} detected buffering proxy`):Ve.stat===i_.NOPROXY&&Se(Fi,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_e.fo()},0),_e}}function nT(){return typeof window<"u"?window:null}function Cy(){return typeof document<"u"?document:null}function tg(n){return new xb(n,!0)}class y0{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&Se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class rT{constructor(e,t,r,s,u,l,m,w){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new y0(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ye.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ye.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(An(t.toString()),An("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new Te(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,ye.Z)(function*(){e.state=0,e.start()}))}tu(e){return Se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iT extends rT{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function bI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:tt(),s=e.targetChange.targetIds||[],u=function(w,b){return w.useProto3Json?(ut(void 0===b||"string"==typeof b),kr.fromBase64String(b||"")):(ut(void 0===b||b instanceof Uint8Array),kr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const b=void 0===w.code?ae.UNKNOWN:V_(w.code);return new Te(b,w.message||"")}(l);t=new j_(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=So(n,r.document.name),u=kn(r.document.updateTime),l=r.document.createTime?kn(r.document.createTime):mt.min(),m=new ii({mapValue:{fields:r.document.fields}}),w=Bn.newFoundDocument(s,u,l,m);t=new Jm(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,s=So(n,r.document),u=r.readTime?kn(r.readTime):mt.min(),l=Bn.newNoDocument(s,u);t=new Jm([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=So(n,r.document);t=new Jm([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return tt();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new Tb(s,u);t=new gI(r.targetId,l)}}var w;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return mt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?mt.min():u.readTime?kn(u.readTime):mt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Vl(this.serializer),t.addTarget=function(s,u){let l;const m=u.target;if(l=Et(m)?{documents:TI(s,m)}:{query:q_(s,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=_I(s,u.resumeToken);const w=G_(s,u.expectedCount);null!==w&&(l.expectedCount=w)}else if(u.snapshotVersion.compareTo(mt.min())>0){l.readTime=Cc(s,u.snapshotVersion.toTimestamp());const w=G_(s,u.expectedCount);null!==w&&(l.expectedCount=w)}return l}(this.serializer,e);const r=function AI(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Vl(this.serializer),t.removeTarget=e,this.Wo(t)}}class iD extends rT{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Mb(n,e){return n&&n.length>0?(ut(void 0!==e),n.map(t=>function(r,s){let u=kn(r.updateTime?r.updateTime:s);return u.isEqual(mt.min())&&(u=kn(s)),new Db(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kn(e.commitTime);return this.listener.cu(r,t)}return ut(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Vl(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ph(this.serializer,r))};this.Wo(t)}}class sD extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Te(ae.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Te(ae.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class sT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(An(t),this.mu=!1):Se("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class v0{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var w;Tc(l)&&(Se("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ye.Z)(function*(b){const A=Ye(b);A.vu.add(4),yield ai(A),A.bu.set("Unknown"),A.vu.delete(4),yield ng(A)}),function(b){return w.apply(this,arguments)})(l))}))}),this.bu=new sT(r,s)}}function ng(n){return oD.apply(this,arguments)}function oD(){return oD=(0,ye.Z)(function*(n){if(Tc(n))for(const e of n.Ru)yield e(!0)}),oD.apply(this,arguments)}function ai(n){return _0.apply(this,arguments)}function _0(){return _0=(0,ye.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),_0.apply(this,arguments)}function Zh(n,e){const t=Ye(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Sy(t)?Ty(t):Ql(t).Ko()&&w0(t,e))}function rg(n,e){const t=Ye(n),r=Ql(t);t.Au.delete(e),r.Ko()&&by(t,e),0===t.Au.size&&(r.Ko()?r.jo():Tc(t)&&t.bu.set("Unknown"))}function w0(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ql(n).su(e)}function by(n,e){n.Vu.qt(e),Ql(n).iu(e)}function Ty(n){n.Vu=new Ab({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Ql(n).start(),n.bu.gu()}function Sy(n){return Tc(n)&&!Ql(n).Uo()&&n.Au.size>0}function Tc(n){return 0===Ye(n).vu.size}function E0(n){n.Vu=void 0}function aD(n){return I0.apply(this,arguments)}function I0(){return I0=(0,ye.Z)(function*(n){n.Au.forEach((e,t)=>{w0(n,e)})}),I0.apply(this,arguments)}function uD(n,e){return D0.apply(this,arguments)}function D0(){return D0=(0,ye.Z)(function*(n,e){E0(n),Sy(n)?(n.bu.Iu(e),Ty(n)):n.bu.set("Unknown")}),D0.apply(this,arguments)}function C0(n,e,t){return Ao.apply(this,arguments)}function Ao(){return Ao=(0,ye.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof j_&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(s,u){const l=u.cause;for(const m of u.targetIds)s.Au.has(m)&&(yield s.remoteSyncer.rejectListen(m,l),s.Au.delete(m),s.Vu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xo(n,r)}else if(e instanceof Jm?n.Vu.Ht(e):e instanceof gI?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(mt.min()))try{const r=yield f0(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=s.Au.get(w);b&&s.Au.set(w,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,w)=>{const b=s.Au.get(m);if(!b)return;s.Au.set(m,b.withResumeToken(kr.EMPTY_BYTE_STRING,b.snapshotVersion)),by(s,m);const A=new oa(b.target,m,w,b.sequenceNumber);w0(s,A)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Se("RemoteStore","Failed to raise snapshot:",r),yield xo(n,r)}var r}),Ao.apply(this,arguments)}function xo(n,e,t){return Ay.apply(this,arguments)}function Ay(){return Ay=(0,ye.Z)(function*(n,e,t){if(!tu(e))throw e;n.vu.add(1),yield ai(n),n.bu.set("Offline"),t||(t=()=>f0(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Se("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield ng(n)}))}),Ay.apply(this,arguments)}function xy(n,e){return e().catch(t=>xo(n,t,e))}function Yl(n){return b0.apply(this,arguments)}function b0(){return b0=(0,ye.Z)(function*(n){const e=Ye(n),t=Mo(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;QS(e);)try{const s=yield Kb(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,oT(e,s)}catch(s){yield xo(e,s)}cD(e)&&lD(e)}),b0.apply(this,arguments)}function QS(n){return Tc(n)&&n.Eu.length<10}function oT(n,e){n.Eu.push(e);const t=Mo(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function cD(n){return Tc(n)&&!Mo(n).Uo()&&n.Eu.length>0}function lD(n){Mo(n).start()}function aT(n){return My.apply(this,arguments)}function My(){return My=(0,ye.Z)(function*(n){Mo(n).hu()}),My.apply(this,arguments)}function JS(n){return Ry.apply(this,arguments)}function Ry(){return Ry=(0,ye.Z)(function*(n){const e=Mo(n);for(const t of n.Eu)e.uu(t.mutations)}),Ry.apply(this,arguments)}function uT(n,e,t){return Ny.apply(this,arguments)}function Ny(){return Ny=(0,ye.Z)(function*(n,e,t){const r=n.Eu.shift(),s=Km.from(r,e,t);yield xy(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Yl(n)}),Ny.apply(this,arguments)}function XS(n,e){return ig.apply(this,arguments)}function ig(){return ig=(0,ye.Z)(function*(n,e){var t;e&&Mo(n).ou&&(yield(t=(0,ye.Z)(function*(r,s){if(dI(u=s.code)&&u!==ae.ABORTED){const l=r.Eu.shift();Mo(r).Qo(),yield xy(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Yl(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),cD(n)&&lD(n)}),ig.apply(this,arguments)}function T0(n,e){return Oy.apply(this,arguments)}function Oy(){return Oy=(0,ye.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Se("RemoteStore","RemoteStore received new credentials");const r=Tc(t);t.vu.add(3),yield ai(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield ng(t)}),Oy.apply(this,arguments)}function Py(n,e){return ky.apply(this,arguments)}function ky(){return ky=(0,ye.Z)(function*(n,e){const t=Ye(n);e?(t.vu.delete(2),yield ng(t)):e||(t.vu.add(2),yield ai(t),t.bu.set("Unknown"))}),ky.apply(this,arguments)}function Ql(n){return n.Su||(n.Su=function(e,t,r){const s=Ye(e);return s.fu(),new iT(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:aD.bind(null,n),ao:uD.bind(null,n),nu:C0.bind(null,n)}),n.Ru.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Su.Qo(),Sy(n)?Ty(n):n.bu.set("Unknown")):(yield n.Su.stop(),E0(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Mo(n){return n.Du||(n.Du=function(e,t,r){const s=Ye(e);return s.fu(),new iD(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:aT.bind(null,n),ao:XS.bind(null,n),au:JS.bind(null,n),cu:uT.bind(null,n)}),n.Ru.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Du.Qo(),yield Yl(n)):(yield n.Du.stop(),n.Eu.length>0&&(Se("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Kh{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,m=new Kh(e,t,l,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jl(n,e){if(An("AsyncQueue",`${e}: ${n}`),tu(n))return new Te(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Yh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=Th(),this.sortedSet=new Nn(this.comparator)}static emptySet(e){return new Yh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Yh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class dD{constructor(){this.Cu=new Nn(Qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):tt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class sg{constructor(e,t,r,s,u,l,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new sg(e,t,Yh.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class eA{constructor(){this.Nu=void 0,this.listeners=[]}}class tA{constructor(){this.queries=new ou(e=>b_(e),Ch),this.onlineState="Unknown",this.ku=new Set}}function Fy(n,e){return S0.apply(this,arguments)}function S0(){return S0=(0,ye.Z)(function*(n,e){const t=Ye(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new eA),s)try{u.Nu=yield t.onListen(r)}catch(l){const m=Jl(l,`Initialization of query '${T_(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&hD(t)}),S0.apply(this,arguments)}function A0(n,e){return x0.apply(this,arguments)}function x0(){return x0=(0,ye.Z)(function*(n,e){const t=Ye(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),x0.apply(this,arguments)}function nA(n,e){const t=Ye(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const m of l.listeners)m.$u(s)&&(r=!0);l.Nu=s}}r&&hD(t)}function rA(n,e,t){const r=Ye(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function hD(n){n.ku.forEach(e=>{e.next()})}class fD{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new sg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=sg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class iA{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class pD{constructor(e){this.serializer=e}rr(e){return So(this.serializer,e)}ur(e){return e.metadata.exists?ny(this.serializer,e.document,!1):Bn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return kn(e)}}class Ly{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gD(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=nn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new pD(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.rr(s.metadata.name);for(const l of s.metadata.queries){const m=(t.get(l)||Bt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function qS(n,e,t,r){return eD.apply(this,arguments)}(e.localStore,new pD(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const s of e.queries)yield WS(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function gD(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class mD{constructor(e){this.key=e}}class M0{constructor(e){this.key=e}}class Sc{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Bt(),this.mutatedKeys=Bt(),this.tc=bh(e),this.ec=new Yh(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new dD,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,N)=>{const H=s.get(A),Y=Fp(this.query,N)?N:null,_e=!!H&&this.mutatedKeys.has(H.key),Ue=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let Ve=!1;H&&Y?H.data.isEqual(Y.data)?_e!==Ue&&(r.track({type:3,doc:Y}),Ve=!0):this.rc(H,Y)||(r.track({type:2,doc:Y}),Ve=!0,(w&&this.tc(Y,w)>0||b&&this.tc(Y,b)<0)&&(m=!0)):!H&&Y?(r.track({type:0,doc:Y}),Ve=!0):H&&!Y&&(r.track({type:1,doc:H}),Ve=!0,(w||b)&&(m=!0)),Ve&&(Y?(l=l.add(Y),u=Ue?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((b,A)=>function(N,H){const Y=_e=>{switch(_e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return Y(N)-Y(H)}(b.type,A.type)||this.tc(b.doc,A.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,w=m!==this.Xu;return this.Xu=m,0!==u.length||w?{snapshot:new sg(this.query,e.ec,s,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new dD,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Bt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new M0(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new mD(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Bt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return sg.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class yD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class R0{constructor(e){this.key=e,this.fc=!1}}class N0{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new ou(m=>b_(m),Ch),this._c=new Map,this.mc=new Set,this.gc=new Nn(Qe.comparator),this.yc=new Map,this.Ic=new ZI,this.Tc={},this.Ec=new Map,this.Ac=bc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function cT(n,e){return og.apply(this,arguments)}function og(){return og=(0,ye.Z)(function*(n,e){const t=v(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield qh(t.localStore,ki(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield ag(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&Zh(t.remoteStore,l)}return s}),og.apply(this,arguments)}function ag(n,e,t,r,s){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,ye.Z)(function*(n,e,t,r,s){n.Rc=(N,H,Y)=>{return(_e=(0,ye.Z)(function*(Ue,Ve,It,bt){let _t=Ve.view.sc(It);_t.zi&&(_t=yield g0(Ue.localStore,Ve.query,!1).then(({documents:dn})=>Ve.view.sc(dn,_t)));const Pt=bt&&bt.targetChanges.get(Ve.targetId),Ht=Ve.view.applyChanges(_t,Ue.isPrimaryClient,Pt);return L0(Ue,Ve.targetId,Ht.cc),Ht.snapshot}),function(Ue,Ve,It,bt){return _e.apply(this,arguments)})(n,N,H,Y);var _e};const u=yield g0(n.localStore,e,!0),l=new Sc(e,u.ir),m=l.sc(u.documents),w=Oh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),b=l.applyChanges(m,n.isPrimaryClient,w);L0(n,t,b.cc);const A=new yD(e,t,l);return n.wc.set(e,A),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),Qh.apply(this,arguments)}function sA(n,e){return vD.apply(this,arguments)}function vD(){return vD=(0,ye.Z)(function*(n,e){const t=Ye(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!Ch(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Qp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),rg(t.remoteStore,r.targetId),Xl(t,r.targetId)}).catch(eu))):(Xl(t,r.targetId),yield Qp(t.localStore,r.targetId,!0))}),vD.apply(this,arguments)}function _D(){return _D=(0,ye.Z)(function*(n,e,t){const r=I(n);try{const s=yield function(u,l){const m=Ye(u),w=Un.now(),b=l.reduce((H,Y)=>H.add(Y.key),Bt());let A,N;return m.persistence.runTransaction("Locally write mutations","readwrite",H=>{let Y=si(),_e=Bt();return m.Zi.getEntries(H,b).next(Ue=>{Y=Ue,Y.forEach((Ve,It)=>{It.isValidDocument()||(_e=_e.add(Ve))})}).next(()=>m.localDocuments.getOverlayedDocuments(H,Y)).next(Ue=>{A=Ue;const Ve=[];for(const It of l){const bt=Bp(It,A.get(It.key).overlayedDocument);null!=bt&&Ve.push(new uu(It.key,bt,KE(bt.value.mapValue),Zn.exists(!0)))}return m.mutationQueue.addMutationBatch(H,w,Ve,l)}).next(Ue=>{N=Ue;const Ve=Ue.applyToLocalDocumentSet(A,_e);return m.documentOverlayCache.saveOverlays(H,Ue.batchId,Ve)})}).then(()=>({batchId:N.batchId,changes:A_(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,m){let w=u.Tc[u.currentUser.toKey()];w||(w=new Nn(Ft)),w=w.insert(l,m),u.Tc[u.currentUser.toKey()]=w}(r,s.batchId,t),yield Ac(r,s.changes),yield Yl(r.remoteStore)}catch(s){const u=Jl(s,"Failed to persist write");t.reject(u)}}),_D.apply(this,arguments)}function O0(n,e){return P0.apply(this,arguments)}function P0(){return P0=(0,ye.Z)(function*(n,e){const t=Ye(n);try{const r=yield function XI(n,e){const t=Ye(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const m=[];e.targetChanges.forEach((A,N)=>{const H=s.get(N);if(!H)return;m.push(t.Bs.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,A.addedDocuments,N)));let Y=H.withSequenceNumber(u.currentSequenceNumber);var _e,Ue,Ve;null!==e.targetMismatches.get(N)?Y=Y.withResumeToken(kr.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):A.resumeToken.approximateByteSize()>0&&(Y=Y.withResumeToken(A.resumeToken,r)),s=s.insert(N,Y),Ue=Y,Ve=A,(0===(_e=H).resumeToken.approximateByteSize()||Ue.snapshotVersion.toMicroseconds()-_e.snapshotVersion.toMicroseconds()>=3e8||Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,Y))});let w=si(),b=Bt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(p0(u,l,e.documentUpdates).next(A=>{w=A.nr,b=A.sr})),!r.isEqual(mt.min())){const A=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return ee.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Ji=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(ut(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?ut(l.fc):s.removedDocuments.size>0&&(ut(l.fc),l.fc=!1))}),yield Ac(t,r,e)}catch(r){yield eu(r)}}),P0.apply(this,arguments)}function wD(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&s.push(m.snapshot)}),function(u,l){const m=Ye(u);m.onlineState=l;let w=!1;m.queries.forEach((b,A)=>{for(const N of A.listeners)N.Mu(l)&&(w=!0)}),w&&hD(m)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lT(n,e,t){return k0.apply(this,arguments)}function k0(){return k0=(0,ye.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new Nn(Qe.comparator);l=l.insert(u,Bn.newNoDocument(u,mt.min()));const m=Bt().add(u),w=new Nh(mt.min(),new Map,new Nn(Ft),l,m);yield O0(r,w),r.gc=r.gc.remove(u),r.yc.delete(e),CD(r)}else yield Qp(r.localStore,e,!1).then(()=>Xl(r,e,t)).catch(eu)}),k0.apply(this,arguments)}function ED(n,e){return Vy.apply(this,arguments)}function Vy(){return Vy=(0,ye.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const s=yield function JI(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,b){const A=w.batch,N=A.keys();let H=ee.resolve();return N.forEach(Y=>{H=H.next(()=>b.getEntry(m,Y)).next(_e=>{const Ue=w.docVersions.get(Y);ut(null!==Ue),_e.version.compareTo(Ue)<0&&(A.applyToRemoteDocument(_e,w),_e.isValidDocument()&&(_e.setReadTime(w.commitVersion),b.addEntry(_e)))})}),H.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Bt();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);DD(t,r,null),ug(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ac(t,s)}catch(s){yield eu(s)}}),Vy.apply(this,arguments)}function ID(n,e,t){return F0.apply(this,arguments)}function F0(){return F0=(0,ye.Z)(function*(n,e,t){const r=Ye(n);try{const s=yield function(u,l){const m=Ye(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,l).next(A=>(ut(null!==A),b=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);DD(r,e,t),ug(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ac(r,s)}catch(s){yield eu(s)}}),F0.apply(this,arguments)}function Uy(){return Uy=(0,ye.Z)(function*(n,e){const t=Ye(n);Tc(t.remoteStore)||Se("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ye(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ec.get(r)||[];s.push(e),t.Ec.set(r,s)}catch(r){const s=Jl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),Uy.apply(this,arguments)}function ug(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function DD(n,e,t){const r=Ye(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function Xl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||By(n,r)})}function By(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(rg(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),CD(n))}function L0(n,e,t){for(const r of t)r instanceof mD?(n.Ic.addReference(r.key,e),hT(n,r)):r instanceof M0?(Se("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||By(n,r.key)):tt()}function hT(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Se("SyncEngine","New document in limbo: "+t),n.mc.add(r),CD(n))}function CD(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Qe(nn.fromString(e)),r=n.Ac.next();n.yc.set(r,new R0(t)),n.gc=n.gc.insert(t,r),Zh(n.remoteStore,new oa(ki(su(t.path)),r,"TargetPurposeLimboResolution",rs.ct))}}function Ac(n,e,t){return V0.apply(this,arguments)}function V0(){return V0=(0,ye.Z)(function*(n,e,t){const r=Ye(n),s=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,w)=>{l.push(r.Rc(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){s.push(b);const A=vy.Li(w.targetId,b);u.push(A)}}))}),yield Promise.all(l),r.dc.nu(s),yield(m=(0,ye.Z)(function*(w,b){const A=Ye(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ee.forEach(b,H=>ee.forEach(H.Fi,Y=>A.persistence.referenceDelegate.addReference(N,H.targetId,Y)).next(()=>ee.forEach(H.Bi,Y=>A.persistence.referenceDelegate.removeReference(N,H.targetId,Y)))))}catch(N){if(!tu(N))throw N;Se("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const H=N.targetId;if(!N.fromCache){const Y=A.Ji.get(H),Ue=Y.withLastLimboFreeSnapshotVersion(Y.snapshotVersion);A.Ji=A.Ji.insert(H,Ue)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),V0.apply(this,arguments)}function fT(n,e){return U0.apply(this,arguments)}function U0(){return U0=(0,ye.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Se("SyncEngine","User change. New user:",e.toKey());const r=yield d0(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new Te(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ac(t,r.er)}var s}),U0.apply(this,arguments)}function aA(n,e){const t=Ye(n),r=t.yc.get(e);if(r&&r.fc)return Bt().add(r.key);{let s=Bt();const u=t._c.get(e);if(!u)return s;for(const l of u){const m=t.wc.get(l);s=s.unionWith(m.view.nc)}return s}}function uA(n,e){return bD.apply(this,arguments)}function bD(){return bD=(0,ye.Z)(function*(n,e){const t=Ye(n),r=yield g0(t.localStore,e.query,!0),s=e.view.hc(r);return t.isPrimaryClient&&L0(t,e.targetId,s.cc),s}),bD.apply(this,arguments)}function cA(n,e){return B0.apply(this,arguments)}function B0(){return B0=(0,ye.Z)(function*(n,e){const t=Ye(n);return Qb(t.localStore,e).then(r=>Ac(t,r))}),B0.apply(this,arguments)}function lA(n,e,t,r){return TD.apply(this,arguments)}function TD(){return TD=(0,ye.Z)(function*(n,e,t,r){const s=Ye(n),u=yield function(l,m){const w=Ye(l),b=Ye(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.Sn(A,m).next(N=>N?w.localDocuments.getDocuments(A,N):ee.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield Yl(s.remoteStore):"acknowledged"===t||"rejected"===t?(DD(s,e,r||null),ug(s,e),m=e,Ye(Ye(s.localStore).mutationQueue).Cn(m)):tt(),yield Ac(s,u)):Se("SyncEngine","Cannot apply mutation batch with id: "+e)}),TD.apply(this,arguments)}function SD(){return SD=(0,ye.Z)(function*(n,e){const t=Ye(n);if(v(t),I(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield pT(t,r.toArray());t.vc=!0,yield Py(t.remoteStore,!0);for(const u of s)Zh(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(Xl(t,l),Qp(t.localStore,l,!0))),rg(t.remoteStore,l)}),yield s,yield pT(t,r),function(u){const l=Ye(u);l.yc.forEach((m,w)=>{rg(l.remoteStore,w)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Nn(Qe.comparator)}(t),t.vc=!1,yield Py(t.remoteStore,!1)}}),SD.apply(this,arguments)}function pT(n,e,t){return AD.apply(this,arguments)}function AD(){return AD=(0,ye.Z)(function*(n,e,t){const r=Ye(n),s=[],u=[];for(const l of e){let m;const w=r._c.get(l);if(w&&0!==w.length){m=yield qh(r.localStore,ki(w[0]));for(const b of w){const A=r.wc.get(b),N=yield uA(r,A);N.snapshot&&u.push(N.snapshot)}}else{const b=yield Yb(r.localStore,l);m=yield qh(r.localStore,b),yield ag(r,i(b),l,!1,m.resumeToken)}s.push(m)}return r.dc.nu(u),s}),AD.apply(this,arguments)}function i(n){return iI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function o(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).$i()}function a(n,e,t,r){return c.apply(this,arguments)}function c(){return c=(0,ye.Z)(function*(n,e,t,r){const s=Ye(n);if(s.vc)return void Se("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield Qb(s.localStore,sI(u[0])),m=Nh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,kr.EMPTY_BYTE_STRING);yield Ac(s,l,m);break}case"rejected":yield Qp(s.localStore,e,!0),Xl(s,e,r);break;default:tt()}}),c.apply(this,arguments)}function d(n,e,t){return g.apply(this,arguments)}function g(){return g=(0,ye.Z)(function*(n,e,t){const r=v(n);if(r.vc){for(const s of e){if(r._c.has(s)){Se("SyncEngine","Adding an already active target "+s);continue}const u=yield Yb(r.localStore,s),l=yield qh(r.localStore,u);yield ag(r,i(u),l.targetId,!1,l.resumeToken),Zh(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield Qp(r.localStore,s,!1).then(()=>{rg(r.remoteStore,s),Xl(r,s)}).catch(eu))}}),g.apply(this,arguments)}function v(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=O0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lT.bind(null,e),e.dc.nu=nA.bind(null,e.eventManager),e.dc.Pc=rA.bind(null,e.eventManager),e}function I(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ED.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ID.bind(null,e),e}class x{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.serializer=tg(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return QI(this.persistence,new l0,e.initialUser,this.serializer)}createPersistence(e){return new my(o0.zs,this.serializer)}createSharedClientState(e){return new rD}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class F extends x{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield I(r.Vc.syncEngine),yield Yl(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return QI(this.persistence,new l0,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new GI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new PE(t,this.persistence);return new OE(e.asyncQueue,r)}createPersistence(e){const t=c0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?oi.withCacheSize(this.cacheSizeBytes):oi.DEFAULT;return new u0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,nT(),Cy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new rD}}class G extends F{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const s=r.Vc.syncEngine;r.sharedClientState instanceof Ey&&(r.sharedClientState.syncEngine={jr:lA.bind(null,s),zr:a.bind(null,s),Wr:d.bind(null,s),$i:o.bind(null,s),Qr:cA.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,ye.Z)(function*(l){yield function dA(n,e){return SD.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=nT();if(!Ey.D(t))throw new Te(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=c0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ey(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class K{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>wD(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=fT.bind(null,r.syncEngine),yield Py(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new tA}createDatastore(e){const t=tg(e.databaseInfo.databaseId),r=new KS(e.databaseInfo);return new sD(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>wD(this.syncEngine,m,0),l=eT.D()?new eT:new ZS,new v0(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,m,w,b){const A=new N0(r,s,u,l,m,w);return b&&(A.vc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ye(t);Se("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield ai(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function we(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Be{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Je{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new qn,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),s=Number(r);isNaN(s)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(s);return new iA(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ye.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ct{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Te(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ye.Z)(function*(u,l){const m=Ye(u),w=Vl(m.serializer)+"/documents",b={documents:l.map(Y=>ty(m.serializer,Y))},A=yield m.vo("BatchGetDocuments",w,b,l.length),N=new Map;A.forEach(Y=>{const _e=function CI(n,e){return"found"in e?function(t,r){ut(!!r.found);const s=So(t,r.found.name),u=kn(r.found.updateTime),l=r.found.createTime?kn(r.found.createTime):mt.min(),m=new ii({mapValue:{fields:r.found.fields}});return Bn.newFoundDocument(s,u,l,m)}(n,e):"missing"in e?function(t,r){ut(!!r.missing),ut(!!r.readTime);const s=So(t,r.missing),u=kn(r.readTime);return Bn.newNoDocument(s,u)}(n,e):tt()}(m.serializer,Y);N.set(_e.key.toString(),_e)});const H=[];return l.forEach(Y=>{const _e=N.get(Y.toString());ut(!!_e),H.push(_e)}),H}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Qe.fromPath(s);e.mutations.push(new jp(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(s,u){const l=Ye(s),m=Vl(l.serializer)+"/documents",w={writes:u.map(b=>Ph(l.serializer,b))};yield l.Io("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mt.min())?Zn.exists(!1):Zn.updateTime(t):Zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Te(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zn.updateTime(t)}return Zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class St{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new y0(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ye.Z)(function*(){const t=new ct(e.datastore),r=e.qc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Uc(u)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!_h(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!dI(t)}return!1}}class Re{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Wr.UNAUTHENTICATED,this.clientId=a_.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ye.Z)(function*(m){Se("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Se("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Jl(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Ot(n,e){return Fn.apply(this,arguments)}function Fn(){return Fn=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Se("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ye.Z)(function*(u){r.isEqual(u)||(yield d0(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Fn.apply(this,arguments)}function tr(n,e){return xD.apply(this,arguments)}function xD(){return xD=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield gT(n);Se("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>T0(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>T0(e.remoteStore,u)),n._onlineComponents=e}),xD.apply(this,arguments)}function hA(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function gT(n){return mT.apply(this,arguments)}function mT(){return mT=(0,ye.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Se("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ot(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!hA(t))throw t;Oi("Error using user provided cache. Falling back to memory cache: "+t),yield Ot(n,new x)}}else Se("FirestoreClient","Using default OfflineComponentProvider"),yield Ot(n,new x);return n._offlineComponents}),mT.apply(this,arguments)}function MD(n){return yT.apply(this,arguments)}function yT(){return yT=(0,ye.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Se("FirestoreClient","Using user provided OnlineComponentProvider"),yield tr(n,n._uninitializedComponentsProvider._online)):(Se("FirestoreClient","Using default OnlineComponentProvider"),yield tr(n,new K))),n._onlineComponents}),yT.apply(this,arguments)}function fA(n){return gT(n).then(e=>e.persistence)}function RD(n){return gT(n).then(e=>e.localStore)}function pA(n){return MD(n).then(e=>e.remoteStore)}function vT(n){return MD(n).then(e=>e.syncEngine)}function jy(n){return _T.apply(this,arguments)}function _T(){return _T=(0,ye.Z)(function*(n){const e=yield MD(n),t=e.eventManager;return t.onListen=cT.bind(null,e.syncEngine),t.onUnlisten=sA.bind(null,e.syncEngine),t}),_T.apply(this,arguments)}function mA(n,e,t={}){const r=new qn;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,l,m,w){const b=new Be({next:N=>{u.enqueueAndForget(()=>A0(s,A));const H=N.docs.has(l);!H&&N.fromCache?w.reject(new Te(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&m&&"server"===m.source?w.reject(new Te(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new fD(su(l.path),b,{includeMetadataChanges:!0,Ku:!0});return Fy(s,A)}(yield jy(n),n.asyncQueue,e,t,r)})),r.promise}function yA(n,e,t={}){const r=new qn;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,l,m,w){const b=new Be({next:N=>{u.enqueueAndForget(()=>A0(s,A)),N.fromCache&&"server"===m.source?w.reject(new Te(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new fD(l,b,{includeMetadataChanges:!0,Ku:!0});return Fy(s,A)}(yield jy(n),n.asyncQueue,e,t,r)})),r.promise}function vA(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const _A=new Map;function wT(n,e,t){if(!t)throw new Te(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wA(n,e,t,r){if(!0===e&&!0===r)throw new Te(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function EA(n){if(!Qe.isDocumentKey(n))throw new Te(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function IA(n){if(Qe.isDocumentKey(n))throw new Te(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ND(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ND(n);throw new Te(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function DA(n,e){if(e<=0)throw new Te(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class CA{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=vA(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class j0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Te(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CA(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ph;switch(t.type){case"firstParty":return new SE(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Te(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_A.get(e);t&&(Se("ComponentProvider","Removing Datastore"),_A.delete(e),t.terminate())}(this),Promise.resolve()}}class nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class Li{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Li(this.firestore,e,this._query)}}class xc extends Li{constructor(e,t,r){super(e,t,su(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new Qe(e))}withConverter(e){return new xc(this.firestore,e,this._path)}}function TA(n,e,...t){if(n=(0,Yt.m9)(n),wT("collection","path",e),n instanceof j0){const r=nn.fromString(e,...t);return IA(r),new xc(n,null,r)}{if(!(n instanceof nr||n instanceof xc))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return IA(r),new xc(n.firestore,null,r)}}function OD(n,e,...t){if(n=(0,Yt.m9)(n),1===arguments.length&&(e=a_.A()),wT("doc","path",e),n instanceof j0){const r=nn.fromString(e,...t);return EA(r),new nr(n,null,new Qe(r))}{if(!(n instanceof nr||n instanceof xc))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return EA(r),new nr(n.firestore,n instanceof xc?n.converter:null,new Qe(r))}}function SA(n,e){return n=(0,Yt.m9)(n),e=(0,Yt.m9)(e),(n instanceof nr||n instanceof xc)&&(e instanceof nr||e instanceof xc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ET(n,e){return n=(0,Yt.m9)(n),e=(0,Yt.m9)(e),n instanceof Li&&e instanceof Li&&n.firestore===e.firestore&&Ch(n._query,e._query)&&n.converter===e.converter}class B1{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new y0(this,"async_queue_retry"),this.Xc=()=>{const t=Cy();t&&Se("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Cy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Cy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new qn;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!tu(t))throw t;Se("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,An("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=Kh.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&tt()}verifyOperationInProgress(){}sa(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function IT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class j1{constructor(){this._progressObserver={},this._taskCompletionResolver=new qn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class rr extends j0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new B1,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||AA(this),this._firestoreClient.terminate()}}function Lr(n){return n._firestoreClient||AA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function AA(n){var e,t,r;const s=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new GE(n._databaseId,m,n._persistenceKey,(b=s).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,vA(b.experimentalLongPollingOptions),b.useFetchStreams));var m,b;n._firestoreClient=new Re(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function xA(n,e,t){const r=new qn;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield Ot(n,t),yield tr(n,e),r.resolve()}catch(s){const u=s;if(!hA(u))throw u;Oi("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function MA(n){if(n._initialized||n._terminated)throw new Te(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Mc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mc(kr.fromBase64String(e))}catch(t){throw new Te(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Mc(kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ed{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Te(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cg{constructor(e){this._methodName=e}}class PD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const J1=/^__.*__$/;class X1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new uu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ll(e,this.data,t,this.fieldTransforms)}}class RA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new uu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class kD{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new kD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return VD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(NA(this.ca)&&J1.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class eR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||tg(e)}ya(e,t,r,s=!1){return new kD({ca:e,methodName:t,ga:r,path:cr.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lg(n){const e=n._freezeSettings(),t=tg(n._databaseId);return new eR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FD(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);TT("Data must be an object, but it was:",l,r);const m=kA(r,l);let w,b;if(u.merge)w=new Pi(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const H=G0(e,N,t);if(!l.contains(H))throw new Te(ae.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);LA(A,H)||A.push(H)}w=new Pi(A),b=l.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,b=l.fieldTransforms;return new X1(new ii(m),w,b)}class H0 extends cg{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof H0}}function OA(n,e,t){return new kD({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class DT extends cg{_toFieldTransform(e){return new Vp(e.path,new Lp)}isEqual(e){return e instanceof DT}}class tR extends cg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=OA(this,e,!0),r=this.pa.map(u=>dg(u,t)),s=new Ah(r);return new Vp(e.path,s)}isEqual(e){return this===e}}class nR extends cg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=OA(this,e,!0),r=this.pa.map(u=>dg(u,t)),s=new sa(r);return new Vp(e.path,s)}isEqual(e){return this===e}}class rR extends cg{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new xh(e.serializer,M_(e.serializer,this.Ia));return new Vp(e.path,t)}isEqual(e){return this===e}}function CT(n,e,t,r){const s=n.ya(1,e,t);TT("Data must be an object, but it was:",s,r);const u=[],l=ii.empty();na(r,(w,b)=>{const A=LD(e,w,t);b=(0,Yt.m9)(b);const N=s.da(A);if(b instanceof H0)u.push(A);else{const H=dg(b,N);null!=H&&(u.push(A),l.set(A,H))}});const m=new Pi(u);return new RA(l,m,s.fieldTransforms)}function bT(n,e,t,r,s,u){const l=n.ya(1,e,t),m=[G0(e,r,t)],w=[s];if(u.length%2!=0)throw new Te(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(G0(e,u[H])),w.push(u[H+1]);const b=[],A=ii.empty();for(let H=m.length-1;H>=0;--H)if(!LA(b,m[H])){const Y=m[H];let _e=w[H];_e=(0,Yt.m9)(_e);const Ue=l.da(Y);if(_e instanceof H0)b.push(Y);else{const Ve=dg(_e,Ue);null!=Ve&&(b.push(Y),A.set(Y,Ve))}}const N=new Pi(b);return new RA(A,N,l.fieldTransforms)}function PA(n,e,t,r=!1){return dg(t,n.ya(r?4:3,e))}function dg(n,e){if(FA(n=(0,Yt.m9)(n)))return TT("Unsupported field value:",e,n),kA(n,e);if(n instanceof cg)return function(t,r){if(!NA(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let m=dg(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Yt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return M_(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Un.fromDate(t);return{timestampValue:Cc(r.serializer,s)}}if(t instanceof Un){const s=new Un(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Cc(r.serializer,s)}}if(t instanceof PD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Mc)return{bytesValue:_I(r.serializer,t._byteString)};if(t instanceof nr){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ey(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${ND(t)}`)}(n,e)}function kA(n,e){const t={};return Do(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):na(n,(r,s)=>{const u=dg(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function FA(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Un||n instanceof PD||n instanceof Mc||n instanceof nr||n instanceof cg)}function TT(n,e,t){if(!FA(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ND(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function G0(n,e,t){if((e=(0,Yt.m9)(e))instanceof ed)return e._internalPath;if("string"==typeof e)return LD(n,e);throw VD("Field path arguments must be of type string or ",n,!1,void 0,t)}const iR=new RegExp("[~\\*/\\[\\]]");function LD(n,e,t){if(e.search(iR)>=0)throw VD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ed(...e.split("."))._internalPath}catch{throw VD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function VD(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${s}`),w+=")"),new Te(ae.INVALID_ARGUMENT,m+n+w)}function LA(n,e){return n.some(t=>t.isEqual(e))}class z0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(UD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sR extends z0{data(){return super.data()}}function UD(n,e){return"string"==typeof e?LD(n,e):e instanceof ed?e._internalPath:e._delegate._internalPath}function VA(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Te(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ST{}class q0 extends ST{}function Jh(n,e,...t){let r=[];e instanceof ST&&r.push(e),r=r.concat(t),function(s){const u=s.filter(m=>m instanceof $y).length,l=s.filter(m=>m instanceof W0).length;if(u>1||u>0&&l>0)throw new Te(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class W0 extends q0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new W0(e,t,r)}_apply(e){const t=this._parse(e);return $A(e._query,t),new Li(e.firestore,e.converter,zm(e._query,t))}_parse(e){const t=lg(e.firestore);return function(s,u,l,m,w,b,A){let N;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){jA(A,b);const H=[];for(const Y of A)H.push(BA(m,s,Y));N={arrayValue:{values:H}}}else N=BA(m,s,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||jA(A,b),N=PA(l,"where",A,"in"===b||"not-in"===b);return rn.create(w,b,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class $y extends ST{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $y(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:_n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const m of l)$A(u,m),u=zm(u,m)}(e._query,t),new Li(e.firestore,e.converter,zm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class AT extends q0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new AT(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Dh(s,u);return function(m,w){if(null===Wn(m)){const b=C_(m);null!==b&&HA(0,b,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new Li(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new is(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class BD extends q0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new BD(e,t,r)}_apply(e){return new Li(e.firestore,e.converter,kp(e._query,this._limit,this._limitType))}}class jD extends q0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jD(e,t,r)}_apply(e){const t=UA(e,this.type,this._docOrFields,this._inclusive);return new Li(e.firestore,e.converter,(s=t,new is((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class $D extends q0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new $D(e,t,r)}_apply(e){const t=UA(e,this.type,this._docOrFields,this._inclusive);return new Li(e.firestore,e.converter,(s=t,new is((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function UA(n,e,t,r){if(t[0]=(0,Yt.m9)(t[0]),t[0]instanceof z0)return function(s,u,l,m,w){if(!m)throw new Te(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const A of Dc(s))if(A.field.isKeyField())b.push(wc(u,m.key));else{const N=m.data.field(A.field);if(Mp(N))throw new Te(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const H=A.field.canonicalString();throw new Te(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}b.push(N)}return new Ec(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=lg(n.firestore);return function(u,l,m,w,b,A){const N=u.explicitOrderBy;if(b.length>N.length)throw new Te(ae.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let Y=0;Y<b.length;Y++){const _e=b[Y];if(N[Y].field.isKeyField()){if("string"!=typeof _e)throw new Te(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof _e}`);if(!Gm(u)&&-1!==_e.indexOf("/"))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${_e}' contains a slash.`);const Ue=u.path.child(nn.fromString(_e));if(!Qe.isDocumentKey(Ue))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ue}' is not because it contains an odd number of segments.`);const Ve=new Qe(Ue);H.push(wc(l,Ve))}else{const Ue=PA(m,w,_e);H.push(Ue)}}return new Ec(H,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function BA(n,e,t){if("string"==typeof(t=(0,Yt.m9)(t))){if(""===t)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gm(e)&&-1!==t.indexOf("/"))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nn.fromString(t));if(!Qe.isDocumentKey(r))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wc(n,new Qe(r))}if(t instanceof nr)return wc(n,t._key);throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ND(t)}.`)}function jA(n,e){if(!Array.isArray(n)||0===n.length)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $A(n,e){if(e.isInequality()){const r=C_(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=Wn(n);null!==u&&HA(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Te(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function HA(n,e,t){if(!t.isEqual(e))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class xT{convertValue(e,t="none"){switch(iu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return na(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new PD(Pn(e.latitude),Pn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Om(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Rp(e));default:return null}}convertTimestamp(e){const t=ra(e);return new Un(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nn.fromString(e);ut(NI(r));const s=new ru(r.get(1),r.get(3)),u=new Qe(r.popFirst(5));return s.isEqual(t)||An(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function HD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class pR extends xT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}class hg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class td extends z0{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Z0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(UD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Z0 extends td{data(e={}){return super.data(e)}}class Xh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new hg(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Z0(this._firestore,this._userDataWriter,r.key,r,new hg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Z0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new hg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const m=new Z0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new hg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:mR(l.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function zA(n,e){return n instanceof td&&e instanceof td?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Xh&&e instanceof Xh&&n._firestore===e._firestore&&ET(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ef extends xT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}function qA(n,e,t){n=cn(n,nr);const r=cn(n.firestore,rr),s=HD(n.converter,e,t);return Hy(r,[FD(lg(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Zn.none())])}function WA(n,e,t,...r){n=cn(n,nr);const s=cn(n.firestore,rr),u=lg(s);let l;return l="string"==typeof(e=(0,Yt.m9)(e))||e instanceof ed?bT(u,"updateDoc",n._key,e,t,r):CT(u,"updateDoc",n._key,e),Hy(s,[l.toMutation(n._key,Zn.exists(!0))])}function ZA(n,...e){var t,r,s;n=(0,Yt.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||IT(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(IT(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(s=N.complete)||void 0===s?void 0:s.bind(N)}let w,b,A;if(n instanceof nr)b=cn(n.firestore,rr),A=su(n._key.path),w={next:N=>{e[l]&&e[l](MT(b,n,N))},error:e[l+1],complete:e[l+2]};else{const N=cn(n,Li);b=cn(N.firestore,rr),A=N._query;const H=new ef(b);w={next:Y=>{e[l]&&e[l](new Xh(b,H,N,Y))},error:e[l+1],complete:e[l+2]},VA(n._query)}return function(N,H,Y,_e){const Ue=new Be(_e),Ve=new fD(H,Ue,Y);return N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return Fy(yield jy(N),Ve)})),()=>{Ue.Dc(),N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return A0(yield jy(N),Ve)}))}}(Lr(b),A,m,w)}function Hy(n,e){return function(t,r){const s=new qn;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function oA(n,e,t){return _D.apply(this,arguments)}(yield vT(t),r,s)})),s.promise}(Lr(n),e)}function MT(n,e,t){const r=t.docs.get(e._key),s=new ef(n);return new td(n,s,e._key,r,new hg(t.hasPendingWrites,t.fromCache),e.converter)}const PR={maxAttempts:5};class KA{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lg(e)}set(e,t,r){this._verifyNotCommitted();const s=tf(e,this._firestore),u=HD(s.converter,t,r),l=FD(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,Zn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=tf(e,this._firestore);let l;return l="string"==typeof(t=(0,Yt.m9)(t))||t instanceof ed?bT(this._dataReader,"WriteBatch.update",u._key,t,r,s):CT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tf(e,this._firestore);return this._mutations=this._mutations.concat(new Rh(t._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tf(n,e){if((n=(0,Yt.m9)(n)).firestore!==e)throw new Te(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class kR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=lg(e)}get(e){const t=tf(e,this._firestore),r=new pR(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return tt();const u=s[0];if(u.isFoundDocument())return new z0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new z0(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const s=tf(e,this._firestore),u=HD(s.converter,t,r),l=FD(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=tf(e,this._firestore);let l;return l="string"==typeof(t=(0,Yt.m9)(t))||t instanceof ed?bT(this._dataReader,"Transaction.update",u._key,t,r,s):CT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=tf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tf(e,this._firestore),r=new ef(this._firestore);return super.get(e).then(s=>new td(this._firestore,r,t._key,s._document,new hg(!1,!1),t.converter))}}!function(n,e=!0){mc=vo.SDK_VERSION,(0,vo._registerComponent)(new sl.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new rr(new bE(t.getProvider("auth-internal")),new AE(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Te(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(m.options.projectId,w)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,vo.registerVersion)(CE,"3.13.0",n),(0,vo.registerVersion)(CE,"3.13.0","esm2017")}();function RT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function QA(){if(typeof Uint8Array>"u")throw new Te("unimplemented","Uint8Arrays are not available in this environment.")}function JA(){if(!function lb(){return typeof atob<"u"}())throw new Te("unimplemented","Blobs are unavailable in Firestore in this environment.")}class K0{constructor(e){this._delegate=e}static fromBase64String(e){return JA(),new K0(Mc.fromBase64String(e))}static fromUint8Array(e){return QA(),new K0(Mc.fromUint8Array(e))}toBase64(){return JA(),this._delegate.toBase64()}toUint8Array(){return QA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function NT(n){return function GR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class zR{enableIndexedDbPersistence(e,t){return function H1(n,e){MA(n=cn(n,rr));const t=Lr(n);if(t._uninitializedComponentsProvider)throw new Te(ae.FAILED_PRECONDITION,"SDK cache is already specified.");Oi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new K;return xA(t,s,new F(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function G1(n){MA(n=cn(n,rr));const e=Lr(n);if(e._uninitializedComponentsProvider)throw new Te(ae.FAILED_PRECONDITION,"SDK cache is already specified.");Oi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new K;return xA(e,r,new G(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function z1(n){if(n._initialized&&!n._terminated)throw new Te(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new qn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Io.D())return Promise.resolve();const s=r+"main";yield Io.delete(s)}),function(r){return t.apply(this,arguments)})(c0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class XA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ru||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Oi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function bA(n,e,t,r={}){var s;const u=(n=cn(n,j0))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&Oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let m,w;if("string"==typeof r.mockUserToken)m=r.mockUserToken,w=Wr.MOCK_USER;else{m=(0,Yt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Te(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Wr(b)}n._authCredentials=new gh(new Sl(m,w))}}(this._delegate,e,t,r)}enableNetwork(){return function W1(n){return function R1(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield fA(n),t=yield pA(n);return e.setNetworkEnabled(!0),function(r){const s=Ye(r);return s.vu.delete(0),ng(s)}(t)}))}(Lr(n=cn(n,rr)))}(this._delegate)}disableNetwork(){return function Z1(n){return function N1(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield fA(n),t=yield pA(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(s){const u=Ye(s);u.vu.add(0),yield ai(u),u.bu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Lr(n=cn(n,rr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,wA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function q1(n){return function(e){const t=new qn;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function dT(n,e){return Uy.apply(this,arguments)}(yield vT(e),t)})),t.promise}(Lr(n=cn(n,rr)))}(this._delegate)}onSnapshotsInSync(e){return function bR(n,e){return function k1(n,e){const t=new Be(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield jy(n),s=t,Ye(r).ku.add(s),void s.next();var r,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield jy(n),s=t,void Ye(r).ku.delete(s);var r,s}))}}(Lr(n=cn(n,rr)),IT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gy(this,TA(this._delegate,e))}catch(t){throw Ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new ua(this,OD(this._delegate,e))}catch(t){throw Ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Cs(this,function U1(n,e){if(n=cn(n,j0),wT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Li(n,null,(t=e,new is(nn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function FR(n,e,t){n=cn(n,rr);const r=Object.assign(Object.assign({},PR),t);return function(s){if(s.maxAttempts<1)throw new Te(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const m=new qn;return s.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const w=yield function gA(n){return MD(n).then(e=>e.datastore)}(s);new St(s.asyncQueue,w,l,u,m).run()})),m.promise}(Lr(n),s=>e(new kR(n,s)),r)}(this._delegate,t=>e(new ex(this,t)))}batch(){return Lr(this._delegate),new tx(new KA(this._delegate,e=>Hy(this._delegate,e)))}loadBundle(e){return function K1(n,e){const t=Lr(n=cn(n,rr)),r=new j1;return function F1(n,e,t,r){const s=function(u,l){let m;return m="string"==typeof u?hI().encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return we(w,b);if(w instanceof ArrayBuffer)return we(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Je(w,l);var w}(t,tg(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function C(n,e,t){const r=Ye(n);var s;(s=(0,ye.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function(H,Y){const _e=Ye(H),Ue=kn(Y.createTime);return _e.persistence.runTransaction("hasNewerBundle","readonly",Ve=>_e.qs.getBundleMetadata(Ve,Y.id)).then(Ve=>!!Ve&&Ve.createTime.compareTo(Ue)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(gD(w));const b=new Ly(w,u.localStore,l.serializer);let A=yield l.bc();for(;A;){const H=yield b.zu(A);H&&m._updateProgress(H),A=yield l.bc()}const N=yield b.complete();return yield Ac(u,N.Ju,void 0),yield function(H,Y){const _e=Ye(H);return _e.persistence.runTransaction("Save bundle","readwrite",Ue=>_e.qs.saveBundleMetadata(Ue,Y))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Hu)}catch(w){return Oi("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var H}),function(u,l,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield vT(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Y1(n,e){return function L1(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const s=Ye(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.qs.getNamedQuery(u,r))}(yield RD(n),e)}))}(Lr(n=cn(n,rr)),e).then(t=>t?new Li(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Cs(this,t):null)}}class GD extends xT{constructor(e){super(),this.firestore=e}convertBytes(e){return new K0(new Mc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ua.forKey(t,this.firestore,null)}}class ex{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new GD(e)}get(e){const t=pg(e);return this._delegate.get(t).then(r=>new Y0(this._firestore,new td(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=pg(e);return r?(RT("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=pg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=pg(e);return this._delegate.delete(t),this}}class tx{constructor(e){this._delegate=e}set(e,t,r){const s=pg(e);return r?(RT("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=pg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=pg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class fg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Z0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Q0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=fg.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new fg(e,new GD(e),t),s.set(t,u)),u}}fg.INSTANCES=new WeakMap;class ua{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ua(t,new nr(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new ua(t,new nr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Gy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gy(this.firestore,TA(this._delegate,e))}catch(t){throw Ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Yt.m9)(e))instanceof nr&&SA(this._delegate,e)}set(e,t){t=RT("DocumentReference.set",t);try{return t?qA(this._delegate,e,t):qA(this._delegate,e)}catch(r){throw Ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?WA(this._delegate,e):WA(this._delegate,e,t,...r)}catch(s){throw Ds(s,"updateDoc()","DocumentReference.update()")}}delete(){return function DR(n){return Hy(cn(n.firestore,rr),[new Rh(n._key,Zn.none())])}(this._delegate)}onSnapshot(...e){const t=nx(e),r=rx(e,s=>new Y0(this.firestore,new td(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return ZA(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function vR(n){n=cn(n,nr);const e=cn(n.firestore,rr),t=Lr(e),r=new ef(e);return function O1(n,e){const t=new qn;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,l){try{const m=yield function(w,b){const A=Ye(w);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,b))}(s,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Te(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Jl(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield RD(n),e,t);var r})),t.promise}(t,n._key).then(s=>new td(e,r,n._key,s,new hg(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function _R(n){n=cn(n,nr);const e=cn(n.firestore,rr);return mA(Lr(e),n._key,{source:"server"}).then(t=>MT(e,n,t))}(this._delegate):function yR(n){n=cn(n,nr);const e=cn(n.firestore,rr);return mA(Lr(e),n._key).then(t=>MT(e,n,t))}(this._delegate),t.then(r=>new Y0(this.firestore,new td(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ua(this.firestore,this._delegate.withConverter(e?fg.getInstance(this.firestore,e):null))}}function Ds(n,e,t){return n.message=n.message.replace(e,t),n}function nx(n){for(const e of n)if("object"==typeof e&&!NT(e))return e;return{}}function rx(n,e){var t,r;let s;return s=NT(n[0])?n[0]:NT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class Y0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ua(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zA(this._delegate,e._delegate)}}class Q0 extends Y0{data(e){const t=this._delegate.data(e);return function fh(n,e){n||tt()}(void 0!==t),t}}class Cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GD(e)}where(e,t,r){try{return new Cs(this.firestore,Jh(this._delegate,function oR(n,e,t){const r=e,s=UD("where",n);return W0._create(s,r,t)}(e,t,r)))}catch(s){throw Ds(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Cs(this.firestore,Jh(this._delegate,function aR(n,e="asc"){const t=e,r=UD("orderBy",n);return AT._create(r,t)}(e,t)))}catch(r){throw Ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Cs(this.firestore,Jh(this._delegate,function uR(n){return DA("limit",n),BD._create("limit",n,"F")}(e)))}catch(t){throw Ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Cs(this.firestore,Jh(this._delegate,function cR(n){return DA("limitToLast",n),BD._create("limitToLast",n,"L")}(e)))}catch(t){throw Ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Cs(this.firestore,Jh(this._delegate,function lR(...n){return jD._create("startAt",n,!0)}(...e)))}catch(t){throw Ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Cs(this.firestore,Jh(this._delegate,function dR(...n){return jD._create("startAfter",n,!1)}(...e)))}catch(t){throw Ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Cs(this.firestore,Jh(this._delegate,function hR(...n){return $D._create("endBefore",n,!1)}(...e)))}catch(t){throw Ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Cs(this.firestore,Jh(this._delegate,function fR(...n){return $D._create("endAt",n,!0)}(...e)))}catch(t){throw Ds(t,"endAt()","Query.endAt()")}}isEqual(e){return ET(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ER(n){n=cn(n,Li);const e=cn(n.firestore,rr),t=Lr(e),r=new ef(e);return function P1(n,e){const t=new qn;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,l){try{const m=yield g0(s,u,!0),w=new Sc(u,m.ir),b=w.sc(m.documents),A=w.applyChanges(b,!1);l.resolve(A.snapshot)}catch(m){const w=Jl(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield RD(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Xh(e,r,n,s))}(this._delegate):"server"===e?.source?function IR(n){n=cn(n,Li);const e=cn(n.firestore,rr),t=Lr(e),r=new ef(e);return yA(t,n._query,{source:"server"}).then(s=>new Xh(e,r,n,s))}(this._delegate):function wR(n){n=cn(n,Li);const e=cn(n.firestore,rr),t=Lr(e),r=new ef(e);return VA(n._query),yA(t,n._query).then(s=>new Xh(e,r,n,s))}(this._delegate),t.then(r=>new OT(this.firestore,new Xh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=nx(e),r=rx(e,s=>new OT(this.firestore,new Xh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return ZA(this._delegate,t,r)}withConverter(e){return new Cs(this.firestore,this._delegate.withConverter(e?fg.getInstance(this.firestore,e):null))}}class WR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Q0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class OT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Q0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new WR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Q0(this._firestore,r))})}isEqual(e){return zA(this._delegate,e._delegate)}}class Gy extends Cs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ua(this.firestore,e):null}doc(e){try{return new ua(this.firestore,void 0===e?OD(this._delegate):OD(this._delegate,e))}catch(t){throw Ds(t,"doc()","CollectionReference.doc()")}}add(e){return function CR(n,e){const t=cn(n.firestore,rr),r=OD(n),s=HD(n.converter,e);return Hy(t,[FD(lg(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ua(this.firestore,t))}isEqual(e){return SA(this._delegate,e._delegate)}withConverter(e){return new Gy(this.firestore,this._delegate.withConverter(e?fg.getInstance(this.firestore,e):null))}}function pg(n){return cn(n,nr)}class PT{constructor(...e){this._delegate=new ed(...e)}static documentId(){return new PT(cr.keyField().canonicalString())}isEqual(e){return(e=(0,Yt.m9)(e))instanceof ed&&this._delegate._internalPath.isEqual(e._internalPath)}}class gg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function VR(){return new DT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gg(e)}static delete(){const e=function LR(){return new H0("deleteField")}();return e._methodName="FieldValue.delete",new gg(e)}static arrayUnion(...e){const t=function UR(...n){return new tR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gg(t)}static arrayRemove(...e){const t=function BR(...n){return new nR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gg(t)}static increment(e){const t=function jR(n){return new rR("increment",n)}(e);return t._methodName="FieldValue.increment",new gg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ZR={Firestore:XA,GeoPoint:PD,Timestamp:Un,Blob:K0,Transaction:ex,WriteBatch:tx,DocumentReference:ua,DocumentSnapshot:Y0,Query:Cs,QueryDocumentSnapshot:Q0,QuerySnapshot:OT,CollectionReference:Gy,FieldPath:PT,FieldValue:gg,setLogLevel:function qR(n){!function Dp(n){yc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function ix(n,e){return function QR(n,e=Kg.z){return new Zi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function kT(n,e){return ix(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function zD(n,e){return kT(n,e).pipe(f(void 0),p(),(0,yt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=s.find(A=>A.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function sx(n,e,t){return zD(n,t).pipe(T((r,s)=>function XR(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function eN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function M(n,e=Zu.y){return n=n??U,(0,mr.e)((t,r)=>{let s,u=!0;t.subscribe((0,mn.x)(r,l=>{const m=e(l);(u||!n(s,m))&&(u=!1,s=m,r.next(l))}))})}(),(0,yt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function FT(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function ox(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function YR(n){(function KR(n,e){n.INTERNAL.registerComponent(new sl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},ZR)))})(n,(e,t)=>new XA(e,t,new zR)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Me.Z);class ax{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=zD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(f(void 0),p(),yr(([r,s])=>s.length>0||!r),(0,yt.U)(([r,s])=>s),ur.iC)}auditTrail(e){return this.stateChanges(e).pipe(T((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ox(e);return sx(this.query,t,this.afs.schedulers.outsideAngular).pipe(ur.iC)}valueChanges(e={}){return kT(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ur.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(ur.iC)}add(e){return this.ref.add(e)}doc(e){return new ux(this.ref.doc(e),this.afs)}}class ux{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=dx(r,t);return new ax(s,u,this.afs)}snapshotChanges(){return function JR(n,e){return ix(n,e).pipe(f(void 0),p(),(0,yt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ur.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,en.D)(this.ref.get(e)).pipe(ur.iC)}}class tN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zD(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),yr(t=>t.length>0),ur.iC):zD(this.query,this.afs.schedulers.outsideAngular).pipe(ur.iC)}auditTrail(e){return this.stateChanges(e).pipe(T((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ox(e);return sx(this.query,t,this.afs.schedulers.outsideAngular).pipe(ur.iC)}valueChanges(e={}){return kT(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),ur.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(ur.iC)}}const cx=new h.OlP("angularfire2.enableFirestorePersistence"),lx=new h.OlP("angularfire2.firestore.persistenceSettings"),nN=new h.OlP("angularfire2.firestore.settings"),rN=new h.OlP("angularfire2.firestore.use-emulator");function dx(n,e=(t=>t)){return{query:e(n),ref:n}}let hx=(()=>{class n{constructor(t,r,s,u,l,m,w,b,A,N,H,Y,_e,Ue,Ve,It,bt){this.schedulers=w;const _t=(0,Mr.on)(t,m,r),Pt=A;N&&Bs(_t,m,H,_e,Ue,Ve,Y,It),[this.firestore,this.persistenceEnabled$]=(0,Mr.cc)(`${_t.name}.firestore`,"AngularFirestore",_t.name,()=>{const Ht=m.runOutsideAngular(()=>_t.firestore());if(u&&Ht.settings(u),Pt&&Ht.useEmulator(...Pt),s&&!hs(l)){const dn=()=>{try{return(0,en.D)(Ht.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(us){return typeof console<"u"&&console.warn(us),et(!1)}};return[Ht,m.runOutsideAngular(dn)]}return[Ht,et(!1)]},[u,Pt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=dx(s,r),m=this.schedulers.ngZone.run(()=>u);return new ax(m,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new tN(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new ux(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Mr.Dh),h.LFG(Mr.xv,8),h.LFG(cx,8),h.LFG(nN,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(ur.HU),h.LFG(lx,8),h.LFG(rN,8),h.LFG(js,8),h.LFG(ml,8),h.LFG(Wg,8),h.LFG(Us,8),h.LFG(ac,8),h.LFG(ep,8),h.LFG(yl,8),h.LFG(pl,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),iN=(()=>{class n{constructor(){_i.Z.registerVersion("angularfire",ur.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:cx,useValue:!0},{provide:lx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[hx]}),n})();const sN_firebaseConfig={apiKey:"AIzaSyB_Rb9jYYDwyWBt2OkNl_aDRYNXCPUvsPo",authDomain:"like-card-ff819.firebaseapp.com",projectId:"like-card-ff819",storageBucket:"like-card-ff819.appspot.com",messagingSenderId:"981630356996",appId:"1:981630356996:web:b3e33a28315124dde4ef51",measurementId:"G-3Z6728SY1K"};class du extends Rr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:oN}=Array,{getPrototypeOf:aN,prototype:uN,keys:cN}=Object;function fx(n){if(1===n.length){const e=n[0];if(oN(e))return{args:e,keys:null};if(function lN(n){return n&&"object"==typeof n&&aN(n)===uN}(e)){const t=cN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:dN}=Array;function px(n){return(0,yt.U)(e=>function hN(n,e){return dN(e)?n(...e):n(e)}(n,e))}function gx(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var fN=k(9672);function mx(...n){const e=(0,Ai.yG)(n),t=(0,Ai.jO)(n),{args:r,keys:s}=fx(n);if(0===r.length)return(0,en.D)([],e);const u=new Zi.y(function pN(n,e,t=Zu.y){return r=>{yx(e,()=>{const{length:s}=n,u=new Array(s);let l=s,m=s;for(let w=0;w<s;w++)yx(e,()=>{const b=(0,en.D)(n[w],e);let A=!1;b.subscribe((0,mn.x)(r,N=>{u[w]=N,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>gx(s,l):Zu.y));return t?u.pipe(px(t)):u}function yx(n,e,t){n?(0,fN.f)(t,n,e):e()}function vx(n){return new Zi.y(e=>{(0,yo.Xf)(n()).subscribe(e)})}var gN=k(9635);function J0(n,e){const t=(0,Ku.m)(n)?n:()=>n,r=s=>s.error(t());return new Zi.y(e?s=>e.schedule(r,0,s):r)}var _x=k(727);function LT(){return(0,mr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,mn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class wx extends Zi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,mr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new _x.w0;const t=this.getSubject();e.add(this.source.subscribe((0,mn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=_x.w0.EMPTY)}return e}refCount(){return LT()(this)}}var bs=k(5577);function mg(n,e){return(0,Ku.m)(e)?(0,bs.z)(n,e,1):(0,bs.z)(n,1)}var os=k(8505);function nf(n){return(0,mr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,mn.x)(t,void 0,void 0,l=>{u=(0,yo.Xf)(n(l,nf(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function VT(n){return n<=0?()=>Fs.E:(0,mr.e)((e,t)=>{let r=[];e.subscribe((0,mn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Ex(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yr((s,u)=>n(s,u,r)):Zu.y,VT(1),t?ka(e):Vs(()=>new Ki))}function UT(n){return(0,mr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const $t="primary",X0=Symbol("RouteTitle");class vN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function zy(n){return new vN(n)}function _N(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))s[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Rc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Ix(n[s],e[s]))return!1;return!0}function Ix(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Dx(n){return Array.prototype.concat.apply([],n)}function Cx(n){return n.length>0?n[n.length-1]:null}function Vi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function rf(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,en.D)(Promise.resolve(n)):et(n)}const qD=!1,EN={exact:function Sx(n,e,t){if(!yg(n.segments,e.segments)||!WD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Sx(n.children[r],e.children[r],t))return!1;return!0},subset:Ax},bx={exact:function IN(n,e){return Rc(n,e)},subset:function DN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ix(n[t],e[t]))},ignored:()=>!0};function Tx(n,e,t){return EN[t.paths](n.root,e.root,t.matrixParams)&&bx[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ax(n,e,t){return xx(n,e,e.segments,t)}function xx(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!yg(s,t)||e.hasChildren()||!WD(s,t,r))}if(n.segments.length===t.length){if(!yg(n.segments,t)||!WD(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Ax(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(yg(n.segments,s)&&WD(n.segments,s,r)&&n.children[$t])&&xx(n.children[$t],e,u,r)}}function WD(n,e,t){return e.every((r,s)=>bx[t](n[s].parameters,r.parameters))}class sf{constructor(e=new Qt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zy(this.queryParams)),this._queryParamMap}toString(){return TN.serialize(this)}}class Qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Vi(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ZD(this)}}class ew{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=zy(this.parameters)),this._parameterMap}toString(){return Nx(this)}}function yg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let tw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new BT},providedIn:"root"}),n})();class BT{parse(e){const t=new kN(e);return new sf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${nw(e.root,!0)}`,r=function xN(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${KD(t)}=${KD(s)}`).join("&"):`${KD(t)}=${KD(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),s="string"==typeof e.fragment?`#${function SN(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${s}`}}const TN=new BT;function ZD(n){return n.segments.map(e=>Nx(e)).join("/")}function nw(n,e){if(!n.hasChildren())return ZD(n);if(e){const t=n.children[$t]?nw(n.children[$t],!1):"",r=[];return Vi(n.children,(s,u)=>{u!==$t&&r.push(`${u}:${nw(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function bN(n,e){let t=[];return Vi(n.children,(r,s)=>{s===$t&&(t=t.concat(e(r,s)))}),Vi(n.children,(r,s)=>{s!==$t&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===$t?[nw(n.children[$t],!1)]:[`${s}:${nw(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[$t]?`${ZD(n)}/${t[0]}`:`${ZD(n)}/(${t.join("//")})`}}function Mx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function KD(n){return Mx(n).replace(/%3B/gi,";")}function jT(n){return Mx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function YD(n){return decodeURIComponent(n)}function Rx(n){return YD(n.replace(/\+/g,"%20"))}function Nx(n){return`${jT(n.path)}${function AN(n){return Object.keys(n).map(e=>`;${jT(e)}=${jT(n[e])}`).join("")}(n.parameters)}`}const MN=/^[^\/()?;=#]+/;function QD(n){const e=n.match(MN);return e?e[0]:""}const RN=/^[^=?&#]+/,ON=/^[^&#]+/;class kN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[$t]=new Qt(e,t)),r}parseSegment(){const e=QD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,qD);return this.capture(e),new ew(YD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=QD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=QD(this.remaining);s&&(r=s,this.capture(r))}e[YD(t)]=YD(r)}parseQueryParam(e){const t=function NN(n){const e=n.match(RN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function PN(n){const e=n.match(ON);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=Rx(t),u=Rx(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=QD(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new h.vHH(4010,qD);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=$t);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[$t]:new Qt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,qD)}}function $T(n){return n.segments.length>0?new Qt([],{[$t]:n}):n}function JD(n){const e={};for(const r of Object.keys(n.children)){const u=JD(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function FN(n){if(1===n.numberOfChildren&&n.children[$t]){const e=n.children[$t];return new Qt(n.segments.concat(e.segments),e.children)}return n}(new Qt(n.segments,e))}function vg(n){return n instanceof sf}const HT=!1;function LN(n,e,t,r,s){if(0===t.length)return qy(e.root,e.root,e.root,r,s);const u=function Lx(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Fx(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Vi(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new Fx(t,e,r)}(t);return u.toRoot()?qy(e.root,e.root,new Qt([],{}),r,s):function l(w){const b=function UN(n,e,t,r){if(n.isAbsolute)return new Wy(e.root,!0,0);if(-1===r)return new Wy(t,t===e.root,0);return function Vx(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new h.vHH(4005,HT&&"Invalid number of '../'");s=r.segments.length}return new Wy(r,!1,s-u)}(t,r+(rw(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=b.processChildren?Zy(b.segmentGroup,b.index,u.commands):GT(b.segmentGroup,b.index,u.commands);return qy(e.root,b.segmentGroup,A,r,s)}(n.snapshot?._lastPathIndex)}function rw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function iw(n){return"object"==typeof n&&null!=n&&n.outlets}function qy(n,e,t,r,s){let l,u={};r&&Vi(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),l=n===e?t:kx(n,e,t);const m=$T(JD(l));return new sf(m,u,s)}function kx(n,e,t){const r={};return Vi(n.children,(s,u)=>{r[u]=s===e?t:kx(s,e,t)}),new Qt(n.segments,r)}class Fx{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&rw(r[0]))throw new h.vHH(4003,HT&&"Root segment cannot have matrix parameters");const s=r.find(iw);if(s&&s!==Cx(r))throw new h.vHH(4004,HT&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function GT(n,e,t){if(n||(n=new Qt([],{})),0===n.segments.length&&n.hasChildren())return Zy(n,e,t);const r=function jN(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],m=t[r];if(iw(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!Bx(w,b,l))return u;r+=2}else{if(!Bx(w,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Qt(n.segments.slice(0,r.pathIndex),{});return u.children[$t]=new Qt(n.segments.slice(r.pathIndex),n.children),Zy(u,0,s)}return r.match&&0===s.length?new Qt(n.segments,{}):r.match&&!n.hasChildren()?zT(n,e,t):r.match?Zy(n,0,s):zT(n,e,t)}function Zy(n,e,t){if(0===t.length)return new Qt(n.segments,{});{const r=function BN(n){return iw(n[0])?n[0].outlets:{[$t]:n}}(t),s={};if(!r[$t]&&n.children[$t]&&1===n.numberOfChildren&&0===n.children[$t].segments.length){const u=Zy(n.children[$t],e,t);return new Qt(n.segments,u.children)}return Vi(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=GT(n.children[l],e,u))}),Vi(n.children,(u,l)=>{void 0===r[l]&&(s[l]=u)}),new Qt(n.segments,s)}}function zT(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(iw(u)){const w=$N(u.outlets);return new Qt(r,w)}if(0===s&&rw(t[0])){r.push(new ew(n.segments[e].path,Ux(t[0]))),s++;continue}const l=iw(u)?u.outlets[$t]:`${u}`,m=s<t.length-1?t[s+1]:null;l&&m&&rw(m)?(r.push(new ew(l,Ux(m))),s+=2):(r.push(new ew(l,{})),s++)}return new Qt(r,{})}function $N(n){const e={};return Vi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=zT(new Qt([],{}),0,t))}),e}function Ux(n){const e={};return Vi(n,(t,r)=>e[r]=`${t}`),e}function Bx(n,e,t){return n==t.path&&Rc(e,t.parameters)}const sw="imperative";class Nc{constructor(e,t){this.id=e,this.url=t}}class qT extends Nc{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _g extends Nc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class XD extends Nc{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class eC extends Nc{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class WT extends Nc{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class HN extends Nc{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GN extends Nc{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zN extends Nc{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qN extends Nc{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WN extends Nc{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZN{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class KN{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class YN{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QN{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JN{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XN{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let nO=(()=>{class n{createUrlTree(t,r,s,u,l,m){return LN(t||r.root,s,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),iO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(e){return nO.\u0275fac(e)},providedIn:"root"}),n})();class $x{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ZT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ZT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=KT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return KT(e,this._root).map(t=>t.value)}}function ZT(n,e){if(n===e.value)return e;for(const t of e.children){const r=ZT(n,t);if(r)return r}return null}function KT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=KT(n,t);if(r.length)return r.unshift(e),r}return[]}class nd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ky(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Hx extends $x{constructor(e,t){super(e),this.snapshot=t,YT(this,e)}toString(){return this.snapshot.toString()}}function Gx(n,e){const t=function sO(n,e){const l=new tC([],{},{},"",{},$t,e,null,n.root,-1,{});return new qx("",new nd(l,[]))}(n,e),r=new du([new ew("",{})]),s=new du({}),u=new du({}),l=new du({}),m=new du(""),w=new Yy(r,s,l,m,u,$t,e,t.root);return w.snapshot=t.root,new Hx(new nd(w,[]),t)}class Yy{constructor(e,t,r,s,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,yt.U)(b=>b[X0]))??et(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>zy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>zy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function oO(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class tC{get title(){return this.data?.[X0]}constructor(e,t,r,s,u,l,m,w,b,A,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qx extends $x{constructor(e,t){super(t),this.url=e,YT(this,t)}toString(){return Wx(this._root)}}function YT(n,e){e.value._routerState=n,e.children.forEach(t=>YT(n,t))}function Wx(n){const e=n.children.length>0?` { ${n.children.map(Wx).join(", ")} } `:"";return`${n.value}${e}`}function QT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Rc(e.params,t.params)||n.params.next(t.params),function wN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Rc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function JT(n,e){const t=Rc(n.params,e.params)&&function CN(n,e){return yg(n,e)&&n.every((t,r)=>Rc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||JT(n.parent,e.parent))}function ow(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function uO(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return ow(n,r,s);return ow(n,r)})}(n,e,t);return new nd(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>ow(n,m)),l}}const r=function cO(n){return new Yy(new du(n.url),new du(n.params),new du(n.queryParams),new du(n.fragment),new du(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>ow(n,u));return new nd(r,s)}}const XT="ngNavigationCancelingError";function Zx(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=vg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Kx(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Kx(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[XT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Yx(n){return Qx(n)&&vg(n.url)}function Qx(n){return n&&n[XT]}class lO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new aw,this.attachRef=null}}let aw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new lO,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nC=!1;let eS=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=$t,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(aw),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,nC);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,nC);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,nC);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,nC);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new dO(t,m,s.injector);if(r&&function hO(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=s.createComponent(b,s.length,w)}else this.activated=s.createComponent(l,{index:s.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class dO{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Yy?this.route:e===aw?this.childContexts:this.parent.get(e,t)}}let tS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[eS],encapsulation:2}),n})();function Jx(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function rS(n){const e=n.children&&n.children.map(rS),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$t&&(t.component=tS),t}function ca(n){return n.outlet||$t}function Xx(n,e){const t=n.filter(r=>ca(r)===e);return t.push(...n.filter(r=>ca(r)!==e)),t}function uw(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class yO{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),QT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Ky(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),Vi(s,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Ky(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Ky(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Ky(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new XN(u.value.snapshot))}),e.children.length&&this.forwardEvent(new QN(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(QT(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),QT(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=uw(s.snapshot),w=m?.get(h._Vd)??null;l.attachRef=null,l.route=s,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class eM{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class rC{constructor(e,t){this.component=e,this.route=t}}function vO(n,e,t){const r=n._root;return cw(r,e?e._root:null,t,[r.value])}function Qy(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function cw(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ky(e);return n.children.forEach(l=>{(function wO(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function EO(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!yg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!yg(n.url,e.url)||!Rc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!JT(n,e)||!Rc(n.queryParams,e.queryParams);default:return!JT(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new eM(r)):(u.data=l.data,u._resolvedData=l._resolvedData),cw(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new rC(m.outlet.component,l))}else l&&lw(e,m,s),s.canActivateChecks.push(new eM(r)),cw(n,null,u.component?m?m.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),Vi(u,(l,m)=>lw(l,t.getContext(m),s)),s}function lw(n,e,t){const r=Ky(n),s=n.value;Vi(r,(u,l)=>{lw(u,s.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new rC(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function dw(n){return"function"==typeof n}function iS(n){return n instanceof Ki||"EmptyError"===n?.name}const iC=Symbol("INITIAL_VALUE");function Jy(){return Sn(n=>mx(n.map(e=>e.pipe(Ls(1),f(iC)))).pipe((0,yt.U)(e=>{for(const t of e)if(!0!==t){if(t===iC)return iC;if(!1===t||t instanceof sf)return t}return!0}),yr(e=>e!==iC),Ls(1)))}function tM(n){return(0,gN.z)((0,os.b)(e=>{if(vg(e))throw Zx(0,e)}),(0,yt.U)(e=>!0===e))}const sS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nM(n,e,t,r,s){const u=oS(n,e,t);return u.matched?function VO(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?et(s.map(l=>{const m=Qy(l,n);return rf(function SO(n){return n&&dw(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(Jy(),tM()):et(!0)}(r=Jx(e,r),e,t).pipe((0,yt.U)(l=>!0===l?u:{...sS})):et(u)}function oS(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...sS}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||_N)(t,n,e);if(!s)return{...sS};const u={};Vi(s.posParams,(m,w)=>{u[w]=m.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function sC(n,e,t,r){if(t.length>0&&function jO(n,e,t){return t.some(r=>oC(n,e,r)&&ca(r)!==$t)}(n,t,r)){const u=new Qt(e,function BO(n,e,t,r){const s={};s[$t]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ca(u)!==$t){const l=new Qt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,s[ca(u)]=l}return s}(n,e,r,new Qt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function $O(n,e,t){return t.some(r=>oC(n,e,r))}(n,t,r)){const u=new Qt(n.segments,function UO(n,e,t,r,s){const u={};for(const l of r)if(oC(n,t,l)&&!s[ca(l)]){const m=new Qt([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[ca(l)]=m}return{...s,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new Qt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function oC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function rM(n,e,t,r){return!!(ca(n)===r||r!==$t&&oC(e,t,n))&&("**"===n.path||oS(e,n,t).matched)}function iM(n,e,t){return 0===e.length&&!n.children[t]}const aC=!1;class uC{constructor(e){this.segmentGroup=e||null}}class sM{constructor(e){this.urlTree=e}}function hw(n){return J0(new uC(n))}function oM(n){return J0(new sM(n))}function HO(n){return J0(new h.vHH(4e3,aC&&`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class qO{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=sC(this.urlTree.root,[],[],this.config).segmentGroup,t=new Qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,$t).pipe((0,yt.U)(u=>this.createUrlTree(JD(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(nf(u=>{if(u instanceof sM)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof uC?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,$t).pipe((0,yt.U)(s=>this.createUrlTree(JD(s),e.queryParams,e.fragment))).pipe(nf(s=>{throw s instanceof uC?this.noMatchError(s):s}))}noMatchError(e){return new h.vHH(4002,aC&&`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=$T(e);return new sf(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,yt.U)(u=>new Qt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,en.D)(s).pipe(mg(u=>{const l=r.children[u],m=Xx(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,yt.U)(w=>({segment:w,outlet:u})))}),T((u,l)=>(u[l.outlet]=l.segment,u),{}),Ex())}expandSegment(e,t,r,s,u,l){return(0,en.D)(r).pipe(mg(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,l).pipe(nf(b=>{if(b instanceof uC)return et(null);throw b}))),Yi(m=>!!m),nf((m,w)=>{if(iS(m))return iM(t,s,u)?et(new Qt([],{})):hw(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,l,m){return rM(s,t,u,l)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l):hw(t):hw(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?oM(u):this.lineralizeSegments(r,u).pipe((0,bs.z)(l=>{const m=new Qt(l,{});return this.expandSegment(e,m,t,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:A}=oS(t,s,u);if(!m)return hw(t);const N=this.applyRedirectCommands(w,s.redirectTo,A);return s.redirectTo.startsWith("/")?oM(N):this.lineralizeSegments(s,N).pipe((0,bs.z)(H=>this.expandSegment(e,t,r,H.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=Jx(r,e),r.loadChildren?(r._loadedRoutes?et({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,yt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Qt(s,{})))):et(new Qt(s,{}))):nM(t,r,s,e).pipe(Sn(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,s).pipe((0,bs.z)(A=>{const N=A.injector??e,H=A.routes,{segmentGroup:Y,slicedSegments:_e}=sC(t,m,w,H),Ue=new Qt(Y.segments,Y.children);if(0===_e.length&&Ue.hasChildren())return this.expandChildren(N,H,Ue).pipe((0,yt.U)(_t=>new Qt(m,_t)));if(0===H.length&&0===_e.length)return et(new Qt(m,{}));const Ve=ca(r)===u;return this.expandSegment(N,Ue,H,_e,Ve?$t:u,!0).pipe((0,yt.U)(bt=>new Qt(m.concat(bt.segments),bt.children)))})):hw(t)))}getChildConfig(e,t,r){return t.children?et({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?et({routes:t._loadedRoutes,injector:t._loadedInjector}):function LO(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?et(!0):et(s.map(l=>{const m=Qy(l,n);return rf(function DO(n){return n&&dw(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(Jy(),tM())}(e,t,r).pipe((0,bs.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,os.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function GO(n){return J0(Kx(aC&&`Cannot load children because the guard of the route "path: '${n.path}'" returned false`,3))}(t))):et({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return et(r);if(s.numberOfChildren>1||!s.children[$t])return HO(e.redirectTo);s=s.children[$t]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new sf(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Vi(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return Vi(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,s)}),new Qt(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new h.vHH(4001,aC&&`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class ZO{}class QO{constructor(e,t,r,s,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=sC(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,$t).pipe((0,yt.U)(t=>{if(null===t)return null;const r=new tC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new nd(r,t),u=new qx(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=zx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,en.D)(Object.keys(r.children)).pipe(mg(s=>{const u=r.children[s],l=Xx(t,s);return this.processSegmentGroup(e,l,u,s)}),T((s,u)=>s&&u?(s.push(...u),s):null),function mN(n,e=!1){return(0,mr.e)((t,r)=>{let s=0;t.subscribe((0,mn.x)(r,u=>{const l=n(u,s++);(l||e)&&r.next(u),!l&&r.complete()}))})}(s=>null!==s),ka(null),Ex(),(0,yt.U)(s=>{if(null===s)return null;const u=uM(s);return function JO(n){n.sort((e,t)=>e.value.outlet===$t?-1:t.value.outlet===$t?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,en.D)(t).pipe(mg(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,s,u)),Yi(l=>!!l),nf(l=>{if(iS(l))return iM(r,s,u)?et([]):et(null);throw l}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!rM(t,r,s,u))return et(null);let l;if("**"===t.path){const m=s.length>0?Cx(s).parameters:{},w=lM(r)+s.length;l=et({snapshot:new tC(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dM(t),ca(t),t.component??t._loadedComponent??null,t,cM(r),w,hM(t)),consumedSegments:[],remainingSegments:[]})}else l=nM(r,t,s,e).pipe((0,yt.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:A})=>{if(!m)return null;const N=lM(r)+w.length;return{snapshot:new tC(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dM(t),ca(t),t.component??t._loadedComponent??null,t,cM(r),N,hM(t)),consumedSegments:w,remainingSegments:b}}));return l.pipe(Sn(m=>{if(null===m)return et(null);const{snapshot:w,consumedSegments:b,remainingSegments:A}=m;e=t._injector??e;const N=t._loadedInjector??e,H=function XO(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Y,slicedSegments:_e}=sC(r,b,A,H.filter(Ve=>void 0===Ve.redirectTo));if(0===_e.length&&Y.hasChildren())return this.processChildren(N,H,Y).pipe((0,yt.U)(Ve=>null===Ve?null:[new nd(w,Ve)]));if(0===H.length&&0===_e.length)return et([new nd(w,[])]);const Ue=ca(t)===u;return this.processSegment(N,H,Y,_e,Ue?$t:u).pipe((0,yt.U)(Ve=>null===Ve?null:[new nd(w,Ve)]))}))}}function eP(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function uM(n){const e=[],t=new Set;for(const r of n){if(!eP(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=uM(r.children);e.push(new nd(r.value,s))}return e.filter(r=>!t.has(r))}function cM(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function lM(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function dM(n){return n.data||{}}function hM(n){return n.resolve||{}}function fM(n){return"string"==typeof n.title||null===n.title}function aS(n){return Sn(e=>{const t=n(e);return t?(0,en.D)(t).pipe((0,yt.U)(()=>e)):et(e)})}const Xy=new h.OlP("ROUTES");let uS=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return et(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=rf(t.loadComponent()).pipe((0,yt.U)(gM),(0,os.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),UT(()=>{this.componentLoaders.delete(t)})),s=new wx(r,()=>new Rr.x).pipe(LT());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return et({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,yt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,A=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=Dx(w.get(Xy,[],h.XFs.Self|h.XFs.Optional)));return{routes:b.map(rS),injector:w}}),UT(()=>{this.childrenLoaders.delete(r)})),l=new wx(u,()=>new Rr.x).pipe(LT());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return rf(t()).pipe((0,yt.U)(gM),(0,bs.z)(r=>r instanceof h.YKP||Array.isArray(r)?et(r):(0,en.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gM(n){return function uP(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let lC=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Rr.x,this.configLoader=(0,h.f3M)(uS),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(tw),this.rootContexts=(0,h.f3M)(aw),this.navigationId=0,this.afterPreactivation=()=>et(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new KN(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new ZN(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new du({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:sw,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(yr(r=>0!==r.id),(0,yt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Sn(r=>{let s=!1,u=!1;return et(r).pipe((0,os.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Sn(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new eC(l.id,t.serializeUrl(r.rawUrl),A,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Fs.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return mM(l.source)&&(t.browserUrlTree=l.extractedUrl),et(l).pipe(Sn(A=>{const N=this.transitions?.getValue();return this.events.next(new qT(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),N!==this.transitions?.getValue()?Fs.E:Promise.resolve(A)}),function WO(n,e,t,r){return Sn(s=>function zO(n,e,t,r,s){return new qO(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,yt.U)(u=>({...s,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,os.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},r.urlAfterRedirects=A.urlAfterRedirects}),function nP(n,e,t,r,s){return(0,bs.z)(u=>function YO(n,e,t,r,s,u,l="emptyOnly"){return new QO(n,e,t,r,s,l,u).recognize().pipe(Sn(m=>null===m?function KO(n){return new Zi.y(e=>e.error(n))}(new ZO):et(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,s).pipe((0,yt.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,os.b)(A=>{if(r.targetSnapshot=A.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!A.extras.skipLocationChange){const H=t.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);t.setBrowserUrl(H,A)}t.browserUrlTree=A.urlAfterRedirects}const N=new HN(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(N)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:A,extractedUrl:N,source:H,restoredState:Y,extras:_e}=l,Ue=new qT(A,this.urlSerializer.serialize(N),H,Y);this.events.next(Ue);const Ve=Gx(N,this.rootComponentType).snapshot;return et(r={...l,targetSnapshot:Ve,urlAfterRedirects:N,extras:{..._e,skipLocationChange:!1,replaceUrl:!1}})}{const A="";return this.events.next(new eC(l.id,t.serializeUrl(r.extractedUrl),A,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Fs.E}}),(0,os.b)(l=>{const m=new GN(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,yt.U)(l=>r={...l,guards:vO(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function xO(n,e){return(0,bs.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?et({...t,guardsResult:!0}):function MO(n,e,t,r){return(0,en.D)(n).pipe((0,bs.z)(s=>function FO(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?et(u.map(m=>{const w=uw(e)??s,b=Qy(m,w);return rf(function TO(n){return n&&dw(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(Yi())})).pipe(Jy()):et(!0)}(s.component,s.route,t,e,r)),Yi(s=>!0!==s,!0))}(l,r,s,n).pipe((0,bs.z)(m=>m&&function IO(n){return"boolean"==typeof n}(m)?function RO(n,e,t,r){return(0,en.D)(e).pipe(mg(s=>y(function OO(n,e){return null!==n&&e&&e(new YN(n)),et(!0)}(s.route.parent,r),function NO(n,e){return null!==n&&e&&e(new JN(n)),et(!0)}(s.route,r),function kO(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function _O(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>vx(()=>et(l.guards.map(w=>{const b=uw(l.node)??t,A=Qy(w,b);return rf(function bO(n){return n&&dw(n.canActivateChild)}(A)?A.canActivateChild(r,n):b.runInContext(()=>A(r,n))).pipe(Yi())})).pipe(Jy())));return et(u).pipe(Jy())}(n,s.path,t),function PO(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return et(!0);const s=r.map(u=>vx(()=>{const l=uw(e)??t,m=Qy(u,l);return rf(function CO(n){return n&&dw(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Yi())}));return et(s).pipe(Jy())}(n,s.route,t))),Yi(s=>!0!==s,!0))}(r,u,n,e):et(m)),(0,yt.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,os.b)(l=>{if(r.guardsResult=l.guardsResult,vg(l.guardsResult))throw Zx(0,l.guardsResult);const m=new zN(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),yr(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),aS(l=>{if(l.guards.canActivateChecks.length)return et(l).pipe((0,os.b)(m=>{const w=new qN(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),Sn(m=>{let w=!1;return et(m).pipe(function rP(n,e){return(0,bs.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return et(t);let u=0;return(0,en.D)(s).pipe(mg(l=>function iP(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!fM(s)&&(u[X0]=s.title),function sP(n,e,t,r){const s=function oP(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return et({});const u={};return(0,en.D)(s).pipe((0,bs.z)(l=>function aP(n,e,t,r){const s=uw(e)??r,u=Qy(n,s);return rf(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Yi(),(0,os.b)(m=>{u[l]=m}))),VT(1),function yN(n){return(0,yt.U)(()=>n)}(u),nf(l=>iS(l)?Fs.E:J0(l)))}(u,n,e,r).pipe((0,yt.U)(l=>(n._resolvedData=l,n.data=zx(n,t).resolve,s&&fM(s)&&(n.data[X0]=s.title),null)))}(l.route,r,n,e)),(0,os.b)(()=>u++),VT(1),(0,bs.z)(l=>u===s.length?et(t):Fs.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,os.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,os.b)(m=>{const w=new WN(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),aS(l=>{const m=w=>{const b=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,os.b)(A=>{w.component=A}),(0,yt.U)(()=>{})));for(const A of w.children)b.push(...m(A));return b};return mx(m(l.targetSnapshot.root)).pipe(ka(),Ls(1))}),aS(()=>this.afterPreactivation()),(0,yt.U)(l=>{const m=function aO(n,e,t){const r=ow(n,e._root,t?t._root:void 0);return new Hx(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,os.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,yt.U)(r=>(new yO(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),Ls(1),(0,os.b)({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new _g(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),UT(()=>{s||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),nf(l=>{if(u=!0,Qx(l)){Yx(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new XD(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),Yx(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||mM(r.source)};t.scheduleNavigation(w,sw,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new WT(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return Fs.E}))}))}cancelNavigationTransition(t,r,s){const u=new XD(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mM(n){return n!==sw}let yM=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===$t);return r}getResolvedTitleForRoute(t){return t.data[X0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(cP)},providedIn:"root"}),n})(),cP=(()=>{class n extends yM{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Df))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(hP)},providedIn:"root"}),n})();class dP{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let hP=(()=>{class n extends dP{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dC=new h.OlP("",{providedIn:"root",factory:()=>({})});let pP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(gP)},providedIn:"root"}),n})(),gP=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mP(n){throw n}function yP(n,e,t){return e.parse("/")}const vP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_P={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ui=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(dC,{optional:!0})||{},this.errorHandler=this.options.errorHandler||mP,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||yP,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(pP),this.routeReuseStrategy=(0,h.f3M)(lP),this.urlCreationStrategy=(0,h.f3M)(iO),this.titleStrategy=(0,h.f3M)(yM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Dx((0,h.f3M)(Xy,{optional:!0})??[]),this.navigationTransitions=(0,h.f3M)(lC),this.urlSerializer=(0,h.f3M)(tw),this.location=(0,h.f3M)(je),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new sf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Gx(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),sw,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const w={...s};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(rS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,b=w?this.currentUrlTree.fragment:l;let A=null;switch(m){case"merge":A={...this.currentUrlTree.queryParams,...u};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),this.urlCreationStrategy.createUrlTree(s,this.routerState,this.currentUrlTree,t,A,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=vg(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,sw,null,r)}navigate(t,r={skipLocationChange:!1}){return function wP(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...vP}:!1===r?{..._P}:r,vg(t))return Tx(this.currentUrlTree,t,s);const u=this.parseUrl(t);return Tx(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,b,A;return l?(m=l.resolve,w=l.reject,b=l.promise):b=new Promise((N,H)=>{m=N,w=H}),A="computed"===this.canceledNavigationResolution?s&&s.\u0275routerPageId?s.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:A,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fw=(()=>{class n{constructor(t,r,s,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=l,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Rr.x;const w=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===w||"area"===w,this.isAnchorElement?this.subscription=t.events.subscribe(b=>{b instanceof _g&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ui),h.Y36(Yy),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(ot))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class vM{}let DP=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(yr(t=>t instanceof _g),mg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,en.D)(s).pipe((0,uc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):et(null);const u=s.pipe((0,bs.z)(l=>null===l?et(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,en.D)([u,l]).pipe((0,uc.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ui),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(vM),h.LFG(uS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lS=new h.OlP("");let _M=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof qT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _g&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof jx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new jx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();var Ro=(()=>((Ro=Ro||{})[Ro.COMPLETE=0]="COMPLETE",Ro[Ro.FAILED=1]="FAILED",Ro[Ro.REDIRECTING=2]="REDIRECTING",Ro))();const ev=!1;function af(n,e){return{\u0275kind:n,\u0275providers:e}}const dS=new h.OlP("",{providedIn:"root",factory:()=>!1});function EM(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(Ui),s=n.get(IM);1===n.get(hS)&&r.initialNavigation(),n.get(DM,null,h.XFs.Optional)?.setUpPreloading(),n.get(lS,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const IM=new h.OlP(ev?"bootstrap done indicator":"",{factory:()=>new Rr.x}),hS=new h.OlP(ev?"initial navigation":"",{providedIn:"root",factory:()=>1});function AP(){let n=[];return n=ev?[{provide:h.Xts,multi:!0,useFactory:()=>{const e=(0,h.f3M)(Ui);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function eO(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],af(1,n)}const DM=new h.OlP(ev?"router preloader":"");function xP(n){return af(0,[{provide:DM,useExisting:DP},{provide:vM,useExisting:n}])}const pw=!1,CM=new h.OlP(pw?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),MP=[je,{provide:tw,useClass:BT},Ui,aw,{provide:Yy,useFactory:function wM(n){return n.routerState.root},deps:[Ui]},uS,pw?{provide:dS,useValue:!0}:[]];function RP(){return new h.PXZ("Router",Ui)}let bM=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[MP,pw&&r?.enableTracing?AP().\u0275providers:[],{provide:Xy,multi:!0,useValue:t},{provide:CM,useFactory:kP,deps:[[Ui,new h.FiY,new h.tp0]]},{provide:dC,useValue:r||{}},r?.useHash?{provide:ot,useClass:Oe}:{provide:ot,useClass:Ne},{provide:lS,useFactory:()=>{const n=(0,h.f3M)(ga),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(dC),r=(0,h.f3M)(lC),s=(0,h.f3M)(tw);return t.scrollOffset&&n.setOffset(t.scrollOffset),new _M(s,r,n,e,t)}},r?.preloadingStrategy?xP(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:RP},r?.initialNavigation?FP(r):[],[{provide:TM,useFactory:EM},{provide:h.tb,multi:!0,useExisting:TM}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Xy,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(CM,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[tS]}),n})();function kP(n){if(pw&&n)throw new h.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function FP(n){return["disabled"===n.initialNavigation?af(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(Ui);return()=>{e.setUpLocationChangeListener()}}},{provide:hS,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?af(2,[{provide:hS,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(pe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Ui),u=e.get(IM);(function CP(n,e){n.events.pipe(yr(t=>t instanceof _g||t instanceof XD||t instanceof WT||t instanceof eC),(0,yt.U)(t=>t instanceof _g||t instanceof eC?Ro.COMPLETE:t instanceof XD&&(0===t.code||1===t.code)?Ro.REDIRECTING:Ro.FAILED),yr(t=>t!==Ro.REDIRECTING),Ls(1)).subscribe(()=>{e()})})(s,()=>{r(!0)}),e.get(lC).afterPreactivation=()=>(r(!0),u.closed?et(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const TM=new h.OlP(pw?"Router Initializer":"");let hC=(()=>{class n{constructor(t){this.afAuth=t}login(t,r){return this.afAuth.signInWithEmailAndPassword(t,r)}register(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r)}logout(){return this.afAuth.signOut()}getUser(){return this.afAuth.authState}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(js))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),wg=(()=>{class n extends SM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Oc=new h.OlP("NgValueAccessor"),BP={provide:Oc,useExisting:(0,h.Gpc)(()=>gw),multi:!0},$P=new h.OlP("CompositionEventMode");let gw=(()=>{class n extends SM{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jP(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36($P,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([BP]),h.qOj]}),n})();const HP=!1;const as=new h.OlP("NgValidators"),cf=new h.OlP("NgAsyncValidators");function NM(n){return function uf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function fC(n){return null}function VM(n){return null!=n}function UM(n){const e=(0,h.QGY)(n)?(0,en.D)(n):n;if(HP&&!(0,h.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new h.vHH(-1101,t)}return e}function BM(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function jM(n,e){return e.map(t=>t(n))}function $M(n){return n.map(e=>function zP(n){return!n.validate}(e)?e:t=>e.validate(t))}function fS(n){return null!=n?function HM(n){if(!n)return null;const e=n.filter(VM);return 0==e.length?null:function(t){return BM(jM(t,e))}}($M(n)):null}function pS(n){return null!=n?function GM(n){if(!n)return null;const e=n.filter(VM);return 0==e.length?null:function(t){return function VP(...n){const e=(0,Ai.jO)(n),{args:t,keys:r}=fx(n),s=new Zi.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,b=l;for(let A=0;A<l;A++){let N=!1;(0,yo.Xf)(t[A]).subscribe((0,mn.x)(u,H=>{N||(N=!0,b--),m[A]=H},()=>w--,void 0,()=>{(!w||!N)&&(b||u.next(r?gx(r,m):m),u.complete())}))}});return e?s.pipe(px(e)):s}(jM(t,e).map(UM)).pipe((0,yt.U)(BM))}}($M(n)):null}function zM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function gS(n){return n?Array.isArray(n)?n:[n]:[]}function pC(n,e){return Array.isArray(n)?n.includes(e):n===e}function ZM(n,e){const t=gS(e);return gS(n).forEach(s=>{pC(t,s)||t.push(s)}),t}function KM(n,e){return gS(e).filter(t=>!pC(n,t))}class YM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=pS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ts extends YM{get formDirective(){return null}get path(){return null}}class lf extends YM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class QM{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let mS=(()=>{class n extends QM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(lf,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),yS=(()=>{class n extends QM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ts,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();function JM(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const wS=!1,mw="VALID",mC="INVALID",tv="PENDING",yw="DISABLED";function ES(n){return(yC(n)?n.validators:n)||null}function IS(n,e){return(yC(e)?e.asyncValidators:n)||null}function yC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class t1{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===mw}get invalid(){return this.status===mC}get pending(){return this.status==tv}get disabled(){return this.status===yw}get enabled(){return this.status!==yw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ZM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ZM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(KM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(KM(e,this._rawAsyncValidators))}hasValidator(e){return pC(this._rawValidators,e)}hasAsyncValidator(e){return pC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=tv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=mw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mw||this.status===tv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yw:mw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=tv,this._hasOwnPendingAsyncValidator=!0;const t=UM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?yw:this.errors?mC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(tv)?tv:this._anyControlsHaveStatus(mC)?mC:mw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function JP(n){return Array.isArray(n)?fS(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function XP(n){return Array.isArray(n)?pS(n):n||null}(this._rawAsyncValidators)}}class DS extends t1{constructor(e,t,r){super(ES(t),IS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function e1(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new h.vHH(1002,wS?function QP(n,e){return`Must supply a value for form control ${JM(n,e)}`}(e,s):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function XM(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,wS?function KP(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new h.vHH(1001,wS?function YP(n,e){return`Cannot find form control ${JM(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const nv=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>vC}),vC="always";function vw(n,e,t=vC){CS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function nk(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&n1(n,e)})}(n,e),function ik(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function rk(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&n1(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function tk(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function EC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function CS(n,e){const t=function qM(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(zM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function WM(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(zM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();EC(e._rawValidators,s),EC(e._rawAsyncValidators,s)}function n1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const ck={provide:Ts,useExisting:(0,h.Gpc)(()=>ww)},_w=(()=>Promise.resolve())();let ww=(()=>{class n extends Ts{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new DS({},fS(t),pS(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){_w.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),vw(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){_w.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){_w.then(()=>{const r=this._findContainer(t.path),s=new DS({});(function r1(n,e){CS(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){_w.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){_w.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function i1(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(as,10),h.Y36(cf,10),h.Y36(nv,8))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([ck]),h.qOj]}),n})();function s1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function o1(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const a1=class extends t1{constructor(e=null,t,r){super(ES(t),IS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=o1(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){s1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){s1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){o1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},hk={provide:lf,useExisting:(0,h.Gpc)(()=>DC)},l1=(()=>Promise.resolve())();let DC=(()=>{class n extends lf{constructor(t,r,s,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new a1,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function SS(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===gw?t=u:function ak(n){return Object.getPrototypeOf(n.constructor)===wg}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function TS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){vw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){l1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,h.D6c)(r);l1.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function _C(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ts,9),h.Y36(as,10),h.Y36(cf,10),h.Y36(Oc,10),h.Y36(h.sBO,8),h.Y36(nv,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([hk]),h.qOj,h.TTD]}),n})(),AS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const fk={provide:Oc,useExisting:(0,h.Gpc)(()=>xS),multi:!0};let xS=(()=>{class n extends wg{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[h._Bn([fk]),h.qOj]}),n})(),d1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),Eg=(()=>{class n{constructor(){this._validator=fC}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):fC,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const Mk={provide:as,useExisting:(0,h.Gpc)(()=>Ew),multi:!0};let Ew=(()=>{class n extends Eg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=t=>NM}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([Mk]),h.qOj]}),n})(),Fk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[d1]}),n})(),Vk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nv,useValue:t.callSetDisabledState??vC}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Fk]}),n})();const x1=function(){return{standalone:!0}};let Uk=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.email="",this.password=""}onSubmit(){this.authService.login(this.email,this.password).then(t=>{console.log("Login successful"),this.router.navigate(["/profile"])}).catch(t=>{console.error("Something went wrong",t)})}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(hC),h.Y36(Ui))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:27,vars:6,consts:[[1,"flex","min-h-full","flex-col","justify-center","px-6","py-12","lg:px-8"],[1,"sm:mx-auto","sm:w-full","sm:max-w-sm"],[1,"mt-10","text-center","text-2xl","font-bold","leading-9","tracking-tight","text-gray-900"],[1,"mt-10","sm:mx-auto","sm:w-full","sm:max-w-sm"],[1,"space-y-6",3,"submit"],["for","email",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2"],["placeholder","example@example.com","type","email","required","",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6","p-2",3,"ngModel","ngModelOptions","ngModelChange"],[1,"flex","items-center","justify-between"],["for","password",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"text-sm"],["href","#",1,"font-semibold","text-indigo-600","hover:text-indigo-500"],["placeholder","123456","type","password","required","",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6","p-2",3,"ngModel","ngModelOptions","ngModelChange"],["type","submit",1,"flex","w-full","justify-center","rounded-md","bg-indigo-600","px-3","py-1.5","text-sm","font-semibold","leading-6","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600"],[1,"mt-10","text-center","text-sm","text-gray-500"],["routerLink","/register",1,"font-semibold","leading-6","text-indigo-600","hover:text-indigo-500"]],template:function(r,s){1&r&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),h._uU(3,"Sign in to Your Account"),h.qZA()(),h.TgZ(4,"div",3)(5,"form",4),h.NdJ("submit",function(){return s.onSubmit()}),h.TgZ(6,"div")(7,"label",5),h._uU(8,"Email address"),h.qZA(),h.TgZ(9,"div",6)(10,"input",7),h.NdJ("ngModelChange",function(l){return s.email=l}),h.qZA()()(),h.TgZ(11,"div")(12,"div",8)(13,"label",9),h._uU(14,"Password"),h.qZA(),h.TgZ(15,"div",10)(16,"a",11),h._uU(17,"Forgot password?"),h.qZA()()(),h.TgZ(18,"div",6)(19,"input",12),h.NdJ("ngModelChange",function(l){return s.password=l}),h.qZA()()(),h.TgZ(20,"div")(21,"button",13),h._uU(22,"Sign In"),h.qZA()()(),h.TgZ(23,"p",14),h._uU(24," Don't you have an account? "),h.TgZ(25,"a",15),h._uU(26,"Create an Account"),h.qZA()()()()),2&r&&(h.xp6(10),h.Q6J("ngModel",s.email)("ngModelOptions",h.DdM(4,x1)),h.xp6(9),h.Q6J("ngModel",s.password)("ngModelOptions",h.DdM(5,x1)))},dependencies:[AS,gw,mS,yS,Ew,DC,ww,fw]})}return n})(),kS=(()=>{class n{constructor(t){this.firestore=t}createUser(t){return this.firestore.collection("users").add(t)}getUserByUID(t){return this.firestore.collection("users",r=>r.where("uid","==",t)).snapshotChanges().pipe((0,yt.U)(r=>r.map(s=>{const u=s.payload.doc.data();return{id:s.payload.doc.id,...u}})[0]))}getAllUsers(){return this.firestore.collection("users").snapshotChanges().pipe((0,yt.U)(t=>t.map(r=>{const s=r.payload.doc.data();return{id:r.payload.doc.id,...s}})))}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(hx))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ig=function(){return{standalone:!0}};let Bk=(()=>{class n{constructor(t,r,s){this.authService=t,this.firestoreService=r,this.router=s,this.email="",this.password="",this.fullName="",this.phone="",this.applicationFor="",this.salary=0,this.about=""}onSubmit(){this.authService.register(this.email,this.password).then(t=>{this.firestoreService.createUser({email:this.email,fullName:this.fullName,phone:this.phone,applicationFor:this.applicationFor,salary:this.salary,about:this.about,uid:t.user?.uid}).then(()=>{console.log("User data saved to Firestore"),this.router.navigate(["/profile"])})}).catch(t=>{console.error("Registration error:",t)})}isFormInvalid(){return""===this.email||""===this.fullName||""===this.phone||""===this.applicationFor||0===this.salary||""===this.about||""===this.password}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(hC),h.Y36(kS),h.Y36(Ui))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-register"]],decls:51,vars:24,consts:[[1,"flex","min-h-full","flex-col","justify-center","px-6","py-12","lg:px-8"],[1,"sm:mx-auto","sm:w-full","sm:max-w-sm"],[1,"mt-10","text-center","text-2xl","font-bold","leading-9","tracking-tight","text-gray-900"],[1,"mt-10","sm:mx-auto","sm:w-full","sm:max-w-sm"],[1,"space-y-6",3,"submit"],["for","email",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-2"],["placeholder","example@example.com","type","email","required","",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6","p-2",3,"ngModel","ngModelOptions","ngModelChange"],[1,"flex","items-center","justify-between"],["for","password",1,"block","text-sm","font-medium","leading-6","text-gray-900"],[1,"text-sm","text-gray-500","mt-1"],["placeholder","123456","type","password","required","",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6","p-2",3,"ngModel","ngModelOptions","ngModelChange"],["for","fullName",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["placeholder","John Doe","type","text","required","",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6","p-2",3,"ngModel","ngModelOptions","ngModelChange"],["for","phone",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["placeholder","+90 000 000 00 00","type","text","required","",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6","p-2",3,"ngModel","ngModelOptions","ngModelChange"],["for","applicationFor",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["placeholder","Full Stack Developer","type","text","required","",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6","p-2",3,"ngModel","ngModelOptions","ngModelChange"],["for","salary",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["placeholder","0","type","number","required","",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6","p-2",3,"ngModel","ngModelOptions","ngModelChange"],["for","about",1,"block","text-sm","font-medium","leading-6","text-gray-900"],["placeholder","Lorem ipsum dolor sit amet, consectetur adipiscing elit...","type","text","required","",1,"block","w-full","rounded-md","border-0","py-1.5","text-gray-900","shadow-sm","ring-1","ring-inset","ring-gray-300","placeholder:text-gray-400","focus:ring-2","focus:ring-inset","focus:ring-indigo-600","sm:text-sm","sm:leading-6","p-2",3,"ngModel","ngModelOptions","ngModelChange"],["type","submit",1,"flex","w-full","justify-center","rounded-md","bg-indigo-600","px-3","py-1.5","text-sm","font-semibold","leading-6","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"disabled"],[1,"mt-10","text-center","text-sm","text-gray-500"],["routerLink","/login",1,"font-semibold","leading-6","text-indigo-600","hover:text-indigo-500"]],template:function(r,s){1&r&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),h._uU(3," Create an Account "),h.qZA()(),h.TgZ(4,"div",3)(5,"form",4),h.NdJ("submit",function(){return s.onSubmit()}),h.TgZ(6,"div")(7,"label",5),h._uU(8,"Email address"),h.qZA(),h.TgZ(9,"div",6)(10,"input",7),h.NdJ("ngModelChange",function(l){return s.email=l}),h.qZA()()(),h.TgZ(11,"div")(12,"div",8)(13,"label",9),h._uU(14,"Password"),h.qZA()(),h.TgZ(15,"p",10),h._uU(16,"Your password must be at least 6 digits"),h.qZA(),h.TgZ(17,"div",6)(18,"input",11),h.NdJ("ngModelChange",function(l){return s.password=l}),h.qZA()()(),h.TgZ(19,"div")(20,"label",12),h._uU(21,"Full Name"),h.qZA(),h.TgZ(22,"div",6)(23,"input",13),h.NdJ("ngModelChange",function(l){return s.fullName=l}),h.qZA()()(),h.TgZ(24,"div")(25,"label",14),h._uU(26,"Phone"),h.qZA(),h.TgZ(27,"div",6)(28,"input",15),h.NdJ("ngModelChange",function(l){return s.phone=l}),h.qZA()()(),h.TgZ(29,"div")(30,"label",16),h._uU(31,"Application For"),h.qZA(),h.TgZ(32,"div",6)(33,"input",17),h.NdJ("ngModelChange",function(l){return s.applicationFor=l}),h.qZA()()(),h.TgZ(34,"div")(35,"label",18),h._uU(36,"Salary"),h.qZA(),h.TgZ(37,"div",6)(38,"input",19),h.NdJ("ngModelChange",function(l){return s.salary=l}),h.qZA()()(),h.TgZ(39,"div")(40,"label",20),h._uU(41,"About"),h.qZA(),h.TgZ(42,"div",6)(43,"input",21),h.NdJ("ngModelChange",function(l){return s.about=l}),h.qZA()()(),h.TgZ(44,"div")(45,"button",22),h._uU(46," Register "),h.qZA()()(),h.TgZ(47,"p",23),h._uU(48," Do you have an account? "),h.TgZ(49,"a",24),h._uU(50,"Sign In"),h.qZA()()()()),2&r&&(h.xp6(10),h.Q6J("ngModel",s.email)("ngModelOptions",h.DdM(17,Ig)),h.xp6(8),h.Q6J("ngModel",s.password)("ngModelOptions",h.DdM(18,Ig)),h.xp6(5),h.Q6J("ngModel",s.fullName)("ngModelOptions",h.DdM(19,Ig)),h.xp6(5),h.Q6J("ngModel",s.phone)("ngModelOptions",h.DdM(20,Ig)),h.xp6(5),h.Q6J("ngModel",s.applicationFor)("ngModelOptions",h.DdM(21,Ig)),h.xp6(5),h.Q6J("ngModel",s.salary)("ngModelOptions",h.DdM(22,Ig)),h.xp6(5),h.Q6J("ngModel",s.about)("ngModelOptions",h.DdM(23,Ig)),h.xp6(2),h.ekj("disabled",s.isFormInvalid()),h.Q6J("disabled",s.isFormInvalid()))},dependencies:[AS,gw,xS,mS,yS,Ew,DC,ww,fw],styles:[".disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.5;pointer-events:none}"]})}return n})(),jk=(()=>{class n{constructor(t,r,s){this.authService=t,this.firestoreService=r,this.router=s,this.userData={},this.user$=this.authService.getUser()}ngOnInit(){this.user$.subscribe(t=>{t&&this.firestoreService.getUserByUID(t.uid).subscribe(r=>{this.userData=r})})}logout(){this.authService.logout().then(()=>{this.router.navigate(["/login"]),console.log("Logout successful")})}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(hC),h.Y36(kS),h.Y36(Ui))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-profile"]],decls:119,vars:8,consts:[[1,"min-h-full"],[1,"bg-gray-800"],[1,"mx-auto","max-w-7xl","px-4","sm:px-6","lg:px-8"],[1,"flex","h-16","items-center","justify-between"],[1,"flex","items-center"],[1,"hidden","md:block"],[1,"flex","items-baseline","space-x-4"],["href","/profile","aria-current","page",1,"rounded-md","bg-gray-900","px-3","py-2","text-sm","font-medium","text-white"],["href","/team",1,"rounded-md","px-3","py-2","text-sm","font-medium","text-gray-300","hover:bg-gray-700","hover:text-white"],[1,"ml-4","flex","items-center","md:ml-6"],["type","button",1,"relative","rounded-full","bg-gray-800","p-1","text-gray-400","hover:text-white","focus:outline-none","focus:ring-2","focus:ring-white","focus:ring-offset-2","focus:ring-offset-gray-800",3,"click"],[1,"absolute","-inset-1.5"],[1,"sr-only"],["fill","#ffffff","height","20px","width","20px","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 384.971 384.971",0,"xml","space","preserve","stroke","#ffffff"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["id","Sign_Out"],["d","M180.455,360.91H24.061V24.061h156.394c6.641,0,12.03-5.39,12.03-12.03s-5.39-12.03-12.03-12.03H12.03 C5.39,0.001,0,5.39,0,12.031V372.94c0,6.641,5.39,12.03,12.03,12.03h168.424c6.641,0,12.03-5.39,12.03-12.03 C192.485,366.299,187.095,360.91,180.455,360.91z"],["d","M381.481,184.088l-83.009-84.2c-4.704-4.752-12.319-4.74-17.011,0c-4.704,4.74-4.704,12.439,0,17.179l62.558,63.46H96.279 c-6.641,0-12.03,5.438-12.03,12.151c0,6.713,5.39,12.151,12.03,12.151h247.74l-62.558,63.46c-4.704,4.752-4.704,12.439,0,17.179 c4.704,4.752,12.319,4.752,17.011,0l82.997-84.2C386.113,196.588,386.161,188.756,381.481,184.088z"],[1,"relative","ml-3"],["type","button","id","user-menu-button","aria-expanded","false","aria-haspopup","true",1,"relative","flex","max-w-xs","items-center","rounded-full","bg-gray-800","text-sm","focus:outline-none","focus:ring-2","focus:ring-white","focus:ring-offset-2","focus:ring-offset-gray-800"],["src","https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80","alt","",1,"h-8","w-8","rounded-full"],[1,"-mr-2","flex","md:hidden"],["type","button","aria-controls","mobile-menu","aria-expanded","false",1,"relative","inline-flex","items-center","justify-center","rounded-md","bg-gray-800","p-2","text-gray-400","hover:bg-gray-700","hover:text-white","focus:outline-none","focus:ring-2","focus:ring-white","focus:ring-offset-2","focus:ring-offset-gray-800"],[1,"absolute","-inset-0.5"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"block","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"hidden","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],["id","mobile-menu",1,"md:hidden"],[1,"space-y-1","px-2","pb-3","pt-2","sm:px-3"],["href","/profile","aria-current","page",1,"block","rounded-md","bg-gray-900","px-3","py-2","text-base","font-medium","text-white"],["href","/team",1,"block","rounded-md","px-3","py-2","text-base","font-medium","text-gray-300","hover:bg-gray-700","hover:text-white"],[1,"border-t","border-gray-700","pb-3","pt-4"],[1,"flex","items-center","px-5"],[1,"flex-shrink-0"],["src","https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80","alt","",1,"h-10","w-10","rounded-full"],[1,"ml-3"],[1,"text-base","font-medium","leading-none","text-white"],[1,"text-sm","font-medium","leading-none","text-gray-400"],["type","button",1,"relative","ml-auto","flex-shrink-0","rounded-full","bg-gray-800","p-1","text-gray-400","hover:text-white","focus:outline-none","focus:ring-2","focus:ring-white","focus:ring-offset-2","focus:ring-offset-gray-800",3,"click"],[1,"mx-auto","max-w-7xl","px-4","py-6","sm:px-6","lg:px-8"],[1,"px-4","sm:px-0"],[1,"text-base","font-semibold","leading-7","text-gray-900"],[1,"mt-1","max-w-2xl","text-sm","leading-6","text-gray-500"],[1,"mt-6","border-t","border-gray-100"],[1,"divide-y","divide-gray-100"],[1,"px-4","py-6","sm:grid","sm:grid-cols-3","sm:gap-4","sm:px-0"],[1,"text-sm","font-medium","leading-6","text-gray-900"],[1,"mt-1","text-sm","leading-6","text-gray-700","sm:col-span-2","sm:mt-0"]],template:function(r,s){1&r&&(h.TgZ(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),h._uU(8,"Profile"),h.qZA(),h.TgZ(9,"a",8),h._uU(10,"Team"),h.qZA()()()(),h.TgZ(11,"div",5)(12,"div",9)(13,"button",10),h.NdJ("click",function(){return s.logout()}),h._UZ(14,"span",11),h.TgZ(15,"span",12),h._uU(16,"Sign Out"),h.qZA(),h.O4$(),h.TgZ(17,"svg",13),h._UZ(18,"g",14)(19,"g",15),h.TgZ(20,"g",16)(21,"g")(22,"g",17),h._UZ(23,"path",18)(24,"path",19),h.qZA(),h._UZ(25,"g")(26,"g")(27,"g")(28,"g")(29,"g")(30,"g"),h.qZA()()()(),h.kcU(),h.TgZ(31,"div",20)(32,"div")(33,"button",21),h._UZ(34,"span",11),h.TgZ(35,"span",12),h._uU(36,"Open user menu"),h.qZA(),h._UZ(37,"img",22),h.qZA()()()()(),h.TgZ(38,"div",23)(39,"button",24),h._UZ(40,"span",25),h.TgZ(41,"span",12),h._uU(42,"Open main menu"),h.qZA(),h.O4$(),h.TgZ(43,"svg",26),h._UZ(44,"path",27),h.qZA(),h.TgZ(45,"svg",28),h._UZ(46,"path",29),h.qZA()()()()(),h.kcU(),h.TgZ(47,"div",30)(48,"div",31)(49,"a",32),h._uU(50,"Profile"),h.qZA(),h.TgZ(51,"a",33),h._uU(52,"Team"),h.qZA()(),h.TgZ(53,"div",34)(54,"div",35)(55,"div",36),h._UZ(56,"img",37),h.qZA(),h.TgZ(57,"div",38)(58,"div",39),h._uU(59),h.qZA(),h.TgZ(60,"div",40),h._uU(61),h.qZA()(),h.TgZ(62,"button",41),h.NdJ("click",function(){return s.logout()}),h._UZ(63,"span",11),h.TgZ(64,"span",12),h._uU(65,"Sign Out"),h.qZA(),h.O4$(),h.TgZ(66,"svg",13),h._UZ(67,"g",14)(68,"g",15),h.TgZ(69,"g",16)(70,"g")(71,"g",17),h._UZ(72,"path",18)(73,"path",19),h.qZA(),h._UZ(74,"g")(75,"g")(76,"g")(77,"g")(78,"g")(79,"g"),h.qZA()()()()()()()(),h.kcU(),h.TgZ(80,"main")(81,"div",42)(82,"div",43)(83,"h3",44),h._uU(84," User Information "),h.qZA(),h.TgZ(85,"p",45),h._uU(86," Personal details "),h.qZA()(),h.TgZ(87,"div",46)(88,"dl",47)(89,"div",48)(90,"dt",49),h._uU(91," Full name "),h.qZA(),h.TgZ(92,"dd",50),h._uU(93),h.qZA()(),h.TgZ(94,"div",48)(95,"dt",49),h._uU(96,"Phone"),h.qZA(),h.TgZ(97,"dd",50),h._uU(98),h.qZA()(),h.TgZ(99,"div",48)(100,"dt",49),h._uU(101," Email address "),h.qZA(),h.TgZ(102,"dd",50),h._uU(103),h.qZA()(),h.TgZ(104,"div",48)(105,"dt",49),h._uU(106," Application for "),h.qZA(),h.TgZ(107,"dd",50),h._uU(108),h.qZA()(),h.TgZ(109,"div",48)(110,"dt",49),h._uU(111,"Salary"),h.qZA(),h.TgZ(112,"dd",50),h._uU(113),h.qZA()(),h.TgZ(114,"div",48)(115,"dt",49),h._uU(116,"About"),h.qZA(),h.TgZ(117,"dd",50),h._uU(118),h.qZA()()()()()()()),2&r&&(h.xp6(59),h.hij(" ",s.userData.fullName," "),h.xp6(2),h.hij(" ",s.userData.email," "),h.xp6(32),h.hij(" ",s.userData.fullName," "),h.xp6(5),h.hij(" ",s.userData.phone," "),h.xp6(5),h.hij(" ",s.userData.email," "),h.xp6(5),h.hij(" ",s.userData.applicationFor," "),h.xp6(5),h.hij(" ",s.userData.salary," "),h.xp6(5),h.hij(" ",s.userData.about," "))}})}return n})();const $k=function(n,e){return{filled:n,unfilled:e}};function Hk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li")(1,"div",49),h._UZ(2,"img",50),h.TgZ(3,"div")(4,"h3",51),h._uU(5),h.qZA(),h.TgZ(6,"p",52),h._uU(7),h.qZA()(),h.TgZ(8,"button",53),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.toggleHeart(u))}),h.O4$(),h.TgZ(9,"svg",54),h._UZ(10,"path",55),h.qZA()()()()}if(2&n){const t=e.$implicit;h.xp6(5),h.hij(" ",t.fullName," "),h.xp6(2),h.hij(" ",t.applicationFor," "),h.xp6(2),h.Q6J("ngClass",h.WLB(3,$k,t.isHeartFilled,!t.isHeartFilled))}}const Gk=[{path:"login",component:Uk},{path:"register",component:Bk},{path:"profile",component:jk},{path:"team",component:(()=>{class n{constructor(t,r,s){this.authService=t,this.firestoreService=r,this.router=s,this.allUsers=[],this.user$=this.authService.getUser()}ngOnInit(){this.user$.subscribe(t=>{t&&(this.firestoreService.getUserByUID(t.uid).subscribe(r=>{this.currentUser=r}),this.firestoreService.getAllUsers().subscribe(r=>{this.allUsers=r.filter(s=>s.uid!==t.uid).map(s=>({...s,isHeartFilled:!1}))}))})}logout(){this.authService.logout().then(()=>{this.router.navigate(["/login"]),console.log("Logout successful")})}toggleHeart(t){t.isHeartFilled=!t.isHeartFilled}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(hC),h.Y36(kS),h.Y36(Ui))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-team"]],decls:90,vars:3,consts:[[1,"min-h-full"],[1,"bg-gray-800"],[1,"mx-auto","max-w-7xl","px-4","sm:px-6","lg:px-8"],[1,"flex","h-16","items-center","justify-between"],[1,"flex","items-center"],[1,"hidden","md:block"],[1,"flex","items-baseline","space-x-4"],["href","/profile",1,"rounded-md","px-3","py-2","text-sm","font-medium","text-gray-300","hover:bg-gray-700","hover:text-white"],["href","/team","aria-current","page",1,"rounded-md","bg-gray-900","px-3","py-2","text-sm","font-medium","text-white"],[1,"ml-4","flex","items-center","md:ml-6"],["type","button",1,"relative","rounded-full","bg-gray-800","p-1","text-gray-400","hover:text-white","focus:outline-none","focus:ring-2","focus:ring-white","focus:ring-offset-2","focus:ring-offset-gray-800",3,"click"],[1,"absolute","-inset-1.5"],[1,"sr-only"],["fill","#ffffff","height","20px","width","20px","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 384.971 384.971",0,"xml","space","preserve","stroke","#ffffff"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["id","Sign_Out"],["d","M180.455,360.91H24.061V24.061h156.394c6.641,0,12.03-5.39,12.03-12.03s-5.39-12.03-12.03-12.03H12.03 C5.39,0.001,0,5.39,0,12.031V372.94c0,6.641,5.39,12.03,12.03,12.03h168.424c6.641,0,12.03-5.39,12.03-12.03 C192.485,366.299,187.095,360.91,180.455,360.91z"],["d","M381.481,184.088l-83.009-84.2c-4.704-4.752-12.319-4.74-17.011,0c-4.704,4.74-4.704,12.439,0,17.179l62.558,63.46H96.279 c-6.641,0-12.03,5.438-12.03,12.151c0,6.713,5.39,12.151,12.03,12.151h247.74l-62.558,63.46c-4.704,4.752-4.704,12.439,0,17.179 c4.704,4.752,12.319,4.752,17.011,0l82.997-84.2C386.113,196.588,386.161,188.756,381.481,184.088z"],[1,"relative","ml-3"],["type","button","id","user-menu-button","aria-expanded","false","aria-haspopup","true",1,"relative","flex","max-w-xs","items-center","rounded-full","bg-gray-800","text-sm","focus:outline-none","focus:ring-2","focus:ring-white","focus:ring-offset-2","focus:ring-offset-gray-800"],["src","https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80","alt","",1,"h-8","w-8","rounded-full"],[1,"-mr-2","flex","md:hidden"],["type","button","aria-controls","mobile-menu","aria-expanded","false",1,"relative","inline-flex","items-center","justify-center","rounded-md","bg-gray-800","p-2","text-gray-400","hover:bg-gray-700","hover:text-white","focus:outline-none","focus:ring-2","focus:ring-white","focus:ring-offset-2","focus:ring-offset-gray-800"],[1,"absolute","-inset-0.5"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"block","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"hidden","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],["id","mobile-menu",1,"md:hidden"],[1,"space-y-1","px-2","pb-3","pt-2","sm:px-3"],["href","/profile","aria-current","page",1,"block","rounded-b-md","px-3","py-2","text-base","font-medium","text-white"],["href","/team",1,"block","rounded-md","bg-gray-900","px-3","py-2","text-base","font-medium","text-gray-300","hover:bg-gray-700","hover:text-white"],[1,"border-t","border-gray-700","pb-3","pt-4"],[1,"flex","items-center","px-5"],[1,"flex-shrink-0"],["src","https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80","alt","",1,"h-10","w-10","rounded-full"],[1,"ml-3"],[1,"text-base","font-medium","leading-none","text-white"],[1,"text-sm","font-medium","leading-none","text-gray-400"],["type","button",1,"relative","ml-auto","flex-shrink-0","rounded-full","bg-gray-800","p-1","text-gray-400","hover:text-white","focus:outline-none","focus:ring-2","focus:ring-white","focus:ring-offset-2","focus:ring-offset-gray-800",3,"click"],[1,"bg-white","py-24","sm:py-10"],[1,"mx-auto","grid","max-w-7xl","gap-x-8","gap-y-20","px-6","lg:px-8"],[1,"max-w-2xl"],[1,"text-3xl","font-bold","tracking-tight","text-gray-900","sm:text-4xl"],[1,"mt-6","text-lg","leading-8","text-gray-600"],["role","list",1,"grid","gap-x-8","gap-y-12","sm:grid-cols-2","sm:gap-y-16","xl:col-span-2"],[4,"ngFor","ngForOf"],[1,"flex","items-center","gap-x-6"],["src","../../../assets/images/user.jpg","alt","",1,"h-16","w-16","rounded-full"],[1,"text-base","font-semibold","leading-7","tracking-tight","text-gray-900"],[1,"text-sm","font-semibold","leading-6","text-indigo-600"],["aria-label","Like",1,"heart-icon",3,"click"],["id","heart","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","width","24","height","24",1,"octicon","octicon-heart",3,"ngClass"],["id","heart-path","fill","none","stroke","currentColor","stroke-width","1.4","d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"]],template:function(r,s){1&r&&(h.TgZ(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),h._uU(8,"Profile"),h.qZA(),h.TgZ(9,"a",8),h._uU(10,"Team"),h.qZA()()()(),h.TgZ(11,"div",5)(12,"div",9)(13,"button",10),h.NdJ("click",function(){return s.logout()}),h._UZ(14,"span",11),h.TgZ(15,"span",12),h._uU(16,"Sign Out"),h.qZA(),h.O4$(),h.TgZ(17,"svg",13),h._UZ(18,"g",14)(19,"g",15),h.TgZ(20,"g",16)(21,"g")(22,"g",17),h._UZ(23,"path",18)(24,"path",19),h.qZA(),h._UZ(25,"g")(26,"g")(27,"g")(28,"g")(29,"g")(30,"g"),h.qZA()()()(),h.kcU(),h.TgZ(31,"div",20)(32,"div")(33,"button",21),h._UZ(34,"span",11),h.TgZ(35,"span",12),h._uU(36,"Open user menu"),h.qZA(),h._UZ(37,"img",22),h.qZA()()()()(),h.TgZ(38,"div",23)(39,"button",24),h._UZ(40,"span",25),h.TgZ(41,"span",12),h._uU(42,"Open main menu"),h.qZA(),h.O4$(),h.TgZ(43,"svg",26),h._UZ(44,"path",27),h.qZA(),h.TgZ(45,"svg",28),h._UZ(46,"path",29),h.qZA()()()()(),h.kcU(),h.TgZ(47,"div",30)(48,"div",31)(49,"a",32),h._uU(50,"Profile"),h.qZA(),h.TgZ(51,"a",33),h._uU(52,"Team"),h.qZA()(),h.TgZ(53,"div",34)(54,"div",35)(55,"div",36),h._UZ(56,"img",37),h.qZA(),h.TgZ(57,"div",38)(58,"div",39),h._uU(59),h.qZA(),h.TgZ(60,"div",40),h._uU(61),h.qZA()(),h.TgZ(62,"button",41),h.NdJ("click",function(){return s.logout()}),h._UZ(63,"span",11),h.TgZ(64,"span",12),h._uU(65,"Sign Out"),h.qZA(),h.O4$(),h.TgZ(66,"svg",13),h._UZ(67,"g",14)(68,"g",15),h.TgZ(69,"g",16)(70,"g")(71,"g",17),h._UZ(72,"path",18)(73,"path",19),h.qZA(),h._UZ(74,"g")(75,"g")(76,"g")(77,"g")(78,"g")(79,"g"),h.qZA()()()()()()()(),h.kcU(),h.TgZ(80,"main")(81,"div",42)(82,"div",43)(83,"div",44)(84,"h2",45),h._uU(85," Meet our leadership "),h.qZA(),h.TgZ(86,"p",46),h._uU(87," You can see and vote team members here. "),h.qZA()(),h.TgZ(88,"ul",47),h.YNc(89,Hk,11,6,"li",48),h.qZA()()()()()),2&r&&(h.xp6(59),h.Oqu(null==s.currentUser?null:s.currentUser.fullName),h.xp6(2),h.hij(" ",null==s.currentUser?null:s.currentUser.email," "),h.xp6(28),h.Q6J("ngForOf",s.allUsers))},dependencies:[Rt,Oo],styles:[".heart-icon[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:24px}.heart-icon[_ngcontent-%COMP%]   .filled[_ngcontent-%COMP%]   #heart-path[_ngcontent-%COMP%]{fill:#bf3989;stroke:#bf3989}.heart-icon[_ngcontent-%COMP%]   .unfilled[_ngcontent-%COMP%]   #heart-path[_ngcontent-%COMP%]{fill:#fff;stroke:#bf3989}"]})}return n})()},{path:"",redirectTo:"/login",pathMatch:"full"}];let zk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({imports:[bM.forRoot(Gk),bM]})}return n})(),qk=(()=>{class n{constructor(){this.title="github-like-card-project"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,s){1&r&&h._UZ(0,"router-outlet")},dependencies:[eS]})}return n})(),Wk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n,bootstrap:[qk]});static#n=this.\u0275inj=h.cJS({imports:[Zo,Vk,zk,Mr.hO.initializeApp(sN_firebaseConfig),Zg,iN]})}return n})();Yc().bootstrapModule(Wk).catch(n=>console.error(n))},9751:(gt,xe,k)=>{k.d(xe,{y:()=>Ee});var h=k(2961),Q=k(727),P=k(8822),ie=k(9635),se=k(2416),oe=k(576),me=k(2806);let Ee=(()=>{class q{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const We=new q;return We.source=this,We.operator=Ae,We}subscribe(Ae,We,ot){const ge=function B(q){return q&&q instanceof h.Lv||function $(q){return q&&(0,oe.m)(q.next)&&(0,oe.m)(q.error)&&(0,oe.m)(q.complete)}(q)&&(0,Q.Nn)(q)}(Ae)?Ae:new h.Hp(Ae,We,ot);return(0,me.x)(()=>{const{operator:Ne,source:Oe}=this;ge.add(Ne?Ne.call(ge,Oe):Oe?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(We){Ae.error(We)}}forEach(Ae,We){return new(We=pe(We))((ot,ge)=>{const Ne=new h.Hp({next:Oe=>{try{Ae(Oe)}catch(je){ge(je),Ne.unsubscribe()}},error:ge,complete:ot});this.subscribe(Ne)})}_subscribe(Ae){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(Ae)}[P.L](){return this}pipe(...Ae){return(0,ie.U)(Ae)(this)}toPromise(Ae){return new(Ae=pe(Ae))((We,ot)=>{let ge;this.subscribe(Ne=>ge=Ne,Ne=>ot(Ne),()=>We(ge))})}}return q.create=Ge=>new q(Ge),q})();function pe(q){var Ge;return null!==(Ge=q??se.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(gt,xe,k)=>{k.d(xe,{x:()=>me});var h=k(9751),Q=k(727);const ie=(0,k(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=k(8737),oe=k(2806);let me=(()=>{class pe extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const q=new Ee(this,this);return q.operator=B,q}_throwIfClosed(){if(this.closed)throw new ie}next(B){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next(B)}})}error(B){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:q}=this;for(;q.length;)q.shift().error(B)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:q,isStopped:Ge,observers:Ae}=this;return q||Ge?Q.Lc:(this.currentObservers=null,Ae.push(B),new Q.w0(()=>{this.currentObservers=null,(0,se.P)(Ae,B)}))}_checkFinalizedStatuses(B){const{hasError:q,thrownError:Ge,isStopped:Ae}=this;q?B.error(Ge):Ae&&B.complete()}asObservable(){const B=new h.y;return B.source=this,B}}return pe.create=($,B)=>new Ee($,B),pe})();class Ee extends me{constructor($,B){super(),this.destination=$,this.source=B}next($){var B,q;null===(q=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===q||q.call(B,$)}error($){var B,q;null===(q=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===q||q.call(B,$)}complete(){var $,B;null===(B=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===B||B.call($)}_subscribe($){var B,q;return null!==(q=null===(B=this.source)||void 0===B?void 0:B.subscribe($))&&void 0!==q?q:Q.Lc}}},2961:(gt,xe,k)=>{k.d(xe,{Hp:()=>ot,Lv:()=>q});var h=k(576),Q=k(727),P=k(2416),ie=k(7849);function se(){}const oe=pe("C",void 0,void 0);function pe(Pe,Ie,De){return{kind:Pe,value:Ie,error:De}}var $=k(3410),B=k(2806);class q extends Q.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,Q.Nn)(Ie)&&Ie.add(this)):this.destination=je}static create(Ie,De,qe){return new ot(Ie,De,qe)}next(Ie){this.isStopped?Oe(function Ee(Pe){return pe("N",Pe,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?Oe(function me(Pe){return pe("E",void 0,Pe)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?Oe(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Ae(Pe,Ie){return Ge.call(Pe,Ie)}class We{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:De}=this;if(De.next)try{De.next(Ie)}catch(qe){ge(qe)}}error(Ie){const{partialObserver:De}=this;if(De.error)try{De.error(Ie)}catch(qe){ge(qe)}else ge(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(De){ge(De)}}}class ot extends q{constructor(Ie,De,qe){let Fe;if(super(),(0,h.m)(Ie)||!Ie)Fe={next:Ie??void 0,error:De??void 0,complete:qe??void 0};else{let nt;this&&P.v.useDeprecatedNextContext?(nt=Object.create(Ie),nt.unsubscribe=()=>this.unsubscribe(),Fe={next:Ie.next&&Ae(Ie.next,nt),error:Ie.error&&Ae(Ie.error,nt),complete:Ie.complete&&Ae(Ie.complete,nt)}):Fe=Ie}this.destination=new We(Fe)}}function ge(Pe){P.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Pe):(0,ie.h)(Pe)}function Oe(Pe,Ie){const{onStoppedNotification:De}=P.v;De&&$.z.setTimeout(()=>De(Pe,Ie))}const je={closed:!0,next:se,error:function Ne(Pe){throw Pe},complete:se}},727:(gt,xe,k)=>{k.d(xe,{Lc:()=>oe,w0:()=>se,Nn:()=>me});var h=k(576);const P=(0,k(3888).d)(pe=>function(B){pe(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((q,Ge)=>`${Ge+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ie=k(8737);class se{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Ae of B)Ae.remove(this);else B.remove(this);const{initialTeardown:q}=this;if((0,h.m)(q))try{q()}catch(Ae){$=Ae instanceof P?Ae.errors:[Ae]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Ae of Ge)try{Ee(Ae)}catch(We){$=$??[],We instanceof P?$=[...$,...We.errors]:$.push(We)}}if($)throw new P($)}}add($){var B;if($&&$!==this)if(this.closed)Ee($);else{if($ instanceof se){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push($)}}_hasParent($){const{_parentage:B}=this;return B===$||Array.isArray(B)&&B.includes($)}_addParent($){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push($),B):B?[B,$]:$}_removeParent($){const{_parentage:B}=this;B===$?this._parentage=null:Array.isArray(B)&&(0,ie.P)(B,$)}remove($){const{_finalizers:B}=this;B&&(0,ie.P)(B,$),$ instanceof se&&$._removeParent(this)}}se.EMPTY=(()=>{const pe=new se;return pe.closed=!0,pe})();const oe=se.EMPTY;function me(pe){return pe instanceof se||pe&&"closed"in pe&&(0,h.m)(pe.remove)&&(0,h.m)(pe.add)&&(0,h.m)(pe.unsubscribe)}function Ee(pe){(0,h.m)(pe)?pe():pe.unsubscribe()}},2416:(gt,xe,k)=>{k.d(xe,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,xe,k)=>{k.d(xe,{E:()=>Q});const Q=new(k(9751).y)(se=>se.complete())},8996:(gt,xe,k)=>{k.d(xe,{D:()=>Ie});var h=k(8421),Q=k(5363),P=k(9468),oe=k(9751),Ee=k(2202),pe=k(576),$=k(9672);function q(De,qe){if(!De)throw new Error("Iterable cannot be null");return new oe.y(Fe=>{(0,$.f)(Fe,qe,()=>{const nt=De[Symbol.asyncIterator]();(0,$.f)(Fe,qe,()=>{nt.next().then(ne=>{ne.done?Fe.complete():Fe.next(ne.value)})},0,!0)})})}var Ge=k(3670),Ae=k(8239),We=k(1144),ot=k(6495),ge=k(2206),Ne=k(4532),Oe=k(3260);function Ie(De,qe){return qe?function Pe(De,qe){if(null!=De){if((0,Ge.c)(De))return function ie(De,qe){return(0,h.Xf)(De).pipe((0,P.R)(qe),(0,Q.Q)(qe))}(De,qe);if((0,We.z)(De))return function me(De,qe){return new oe.y(Fe=>{let nt=0;return qe.schedule(function(){nt===De.length?Fe.complete():(Fe.next(De[nt++]),Fe.closed||this.schedule())})})}(De,qe);if((0,Ae.t)(De))return function se(De,qe){return(0,h.Xf)(De).pipe((0,P.R)(qe),(0,Q.Q)(qe))}(De,qe);if((0,ge.D)(De))return q(De,qe);if((0,ot.T)(De))return function B(De,qe){return new oe.y(Fe=>{let nt;return(0,$.f)(Fe,qe,()=>{nt=De[Ee.h](),(0,$.f)(Fe,qe,()=>{let ne,Dt;try{({value:ne,done:Dt}=nt.next())}catch(Xe){return void Fe.error(Xe)}Dt?Fe.complete():Fe.next(ne)},0,!0)}),()=>(0,pe.m)(nt?.return)&&nt.return()})}(De,qe);if((0,Oe.L)(De))return function je(De,qe){return q((0,Oe.Q)(De),qe)}(De,qe)}throw(0,Ne.z)(De)}(De,qe):(0,h.Xf)(De)}},8421:(gt,xe,k)=>{k.d(xe,{Xf:()=>Ge});var h=k(7582),Q=k(1144),P=k(8239),ie=k(9751),se=k(3670),oe=k(2206),me=k(4532),Ee=k(6495),pe=k(3260),$=k(576),B=k(7849),q=k(8822);function Ge(Pe){if(Pe instanceof ie.y)return Pe;if(null!=Pe){if((0,se.c)(Pe))return function Ae(Pe){return new ie.y(Ie=>{const De=Pe[q.L]();if((0,$.m)(De.subscribe))return De.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,Q.z)(Pe))return function We(Pe){return new ie.y(Ie=>{for(let De=0;De<Pe.length&&!Ie.closed;De++)Ie.next(Pe[De]);Ie.complete()})}(Pe);if((0,P.t)(Pe))return function ot(Pe){return new ie.y(Ie=>{Pe.then(De=>{Ie.closed||(Ie.next(De),Ie.complete())},De=>Ie.error(De)).then(null,B.h)})}(Pe);if((0,oe.D)(Pe))return Ne(Pe);if((0,Ee.T)(Pe))return function ge(Pe){return new ie.y(Ie=>{for(const De of Pe)if(Ie.next(De),Ie.closed)return;Ie.complete()})}(Pe);if((0,pe.L)(Pe))return function Oe(Pe){return Ne((0,pe.Q)(Pe))}(Pe)}throw(0,me.z)(Pe)}function Ne(Pe){return new ie.y(Ie=>{(function je(Pe,Ie){var De,qe,Fe,nt;return(0,h.mG)(this,void 0,void 0,function*(){try{for(De=(0,h.KL)(Pe);!(qe=yield De.next()).done;)if(Ie.next(qe.value),Ie.closed)return}catch(ne){Fe={error:ne}}finally{try{qe&&!qe.done&&(nt=De.return)&&(yield nt.call(De))}finally{if(Fe)throw Fe.error}}Ie.complete()})})(Pe,Ie).catch(De=>Ie.error(De))})}},6451:(gt,xe,k)=>{k.d(xe,{T:()=>oe});var h=k(8189),Q=k(8421),P=k(515),ie=k(7669),se=k(8996);function oe(...me){const Ee=(0,ie.yG)(me),pe=(0,ie._6)(me,1/0),$=me;return $.length?1===$.length?(0,Q.Xf)($[0]):(0,h.J)(pe)((0,se.D)($,Ee)):P.E}},5403:(gt,xe,k)=>{k.d(xe,{x:()=>Q});var h=k(2961);function Q(ie,se,oe,me,Ee){return new P(ie,se,oe,me,Ee)}class P extends h.Lv{constructor(se,oe,me,Ee,pe,$){super(se),this.onFinalize=pe,this.shouldUnsubscribe=$,this._next=oe?function(B){try{oe(B)}catch(q){se.error(q)}}:super._next,this._error=Ee?function(B){try{Ee(B)}catch(q){se.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(B){se.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(gt,xe,k)=>{k.d(xe,{U:()=>P});var h=k(4482),Q=k(5403);function P(ie,se){return(0,h.e)((oe,me)=>{let Ee=0;oe.subscribe((0,Q.x)(me,pe=>{me.next(ie.call(se,pe,Ee++))}))})}},8189:(gt,xe,k)=>{k.d(xe,{J:()=>P});var h=k(5577),Q=k(4671);function P(ie=1/0){return(0,h.z)(Q.y,ie)}},5577:(gt,xe,k)=>{k.d(xe,{z:()=>Ee});var h=k(4004),Q=k(8421),P=k(4482),ie=k(9672),se=k(5403),me=k(576);function Ee(pe,$,B=1/0){return(0,me.m)($)?Ee((q,Ge)=>(0,h.U)((Ae,We)=>$(q,Ae,Ge,We))((0,Q.Xf)(pe(q,Ge))),B):("number"==typeof $&&(B=$),(0,P.e)((q,Ge)=>function oe(pe,$,B,q,Ge,Ae,We,ot){const ge=[];let Ne=0,Oe=0,je=!1;const Pe=()=>{je&&!ge.length&&!Ne&&$.complete()},Ie=qe=>Ne<q?De(qe):ge.push(qe),De=qe=>{Ae&&$.next(qe),Ne++;let Fe=!1;(0,Q.Xf)(B(qe,Oe++)).subscribe((0,se.x)($,nt=>{Ge?.(nt),Ae?Ie(nt):$.next(nt)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(Ne--;ge.length&&Ne<q;){const nt=ge.shift();We?(0,ie.f)($,We,()=>De(nt)):De(nt)}Pe()}catch(nt){$.error(nt)}}))};return pe.subscribe((0,se.x)($,Ie,()=>{je=!0,Pe()})),()=>{ot?.()}}(q,Ge,pe,B)))}},5363:(gt,xe,k)=>{k.d(xe,{Q:()=>ie});var h=k(9672),Q=k(4482),P=k(5403);function ie(se,oe=0){return(0,Q.e)((me,Ee)=>{me.subscribe((0,P.x)(Ee,pe=>(0,h.f)(Ee,se,()=>Ee.next(pe),oe),()=>(0,h.f)(Ee,se,()=>Ee.complete(),oe),pe=>(0,h.f)(Ee,se,()=>Ee.error(pe),oe)))})}},3099:(gt,xe,k)=>{k.d(xe,{B:()=>se});var h=k(8421),Q=k(7579),P=k(2961),ie=k(4482);function se(me={}){const{connector:Ee=(()=>new Q.x),resetOnError:pe=!0,resetOnComplete:$=!0,resetOnRefCountZero:B=!0}=me;return q=>{let Ge,Ae,We,ot=0,ge=!1,Ne=!1;const Oe=()=>{Ae?.unsubscribe(),Ae=void 0},je=()=>{Oe(),Ge=We=void 0,ge=Ne=!1},Pe=()=>{const Ie=Ge;je(),Ie?.unsubscribe()};return(0,ie.e)((Ie,De)=>{ot++,!Ne&&!ge&&Oe();const qe=We=We??Ee();De.add(()=>{ot--,0===ot&&!Ne&&!ge&&(Ae=oe(Pe,B))}),qe.subscribe(De),!Ge&&ot>0&&(Ge=new P.Hp({next:Fe=>qe.next(Fe),error:Fe=>{Ne=!0,Oe(),Ae=oe(je,pe,Fe),qe.error(Fe)},complete:()=>{ge=!0,Oe(),Ae=oe(je,$),qe.complete()}}),(0,h.Xf)(Ie).subscribe(Ge))})(q)}}function oe(me,Ee,...pe){if(!0===Ee)return void me();if(!1===Ee)return;const $=new P.Hp({next:()=>{$.unsubscribe(),me()}});return(0,h.Xf)(Ee(...pe)).subscribe($)}},9468:(gt,xe,k)=>{k.d(xe,{R:()=>Q});var h=k(4482);function Q(P,ie=0){return(0,h.e)((se,oe)=>{oe.add(P.schedule(()=>se.subscribe(oe),ie))})}},8505:(gt,xe,k)=>{k.d(xe,{b:()=>se});var h=k(576),Q=k(4482),P=k(5403),ie=k(4671);function se(oe,me,Ee){const pe=(0,h.m)(oe)||me||Ee?{next:oe,error:me,complete:Ee}:oe;return pe?(0,Q.e)(($,B)=>{var q;null===(q=pe.subscribe)||void 0===q||q.call(pe);let Ge=!0;$.subscribe((0,P.x)(B,Ae=>{var We;null===(We=pe.next)||void 0===We||We.call(pe,Ae),B.next(Ae)},()=>{var Ae;Ge=!1,null===(Ae=pe.complete)||void 0===Ae||Ae.call(pe),B.complete()},Ae=>{var We;Ge=!1,null===(We=pe.error)||void 0===We||We.call(pe,Ae),B.error(Ae)},()=>{var Ae,We;Ge&&(null===(Ae=pe.unsubscribe)||void 0===Ae||Ae.call(pe)),null===(We=pe.finalize)||void 0===We||We.call(pe)}))}):ie.y}},4408:(gt,xe,k)=>{k.d(xe,{o:()=>se});var h=k(727);class Q extends h.w0{constructor(me,Ee){super()}schedule(me,Ee=0){return this}}const P={setInterval(oe,me,...Ee){const{delegate:pe}=P;return pe?.setInterval?pe.setInterval(oe,me,...Ee):setInterval(oe,me,...Ee)},clearInterval(oe){const{delegate:me}=P;return(me?.clearInterval||clearInterval)(oe)},delegate:void 0};var ie=k(8737);class se extends Q{constructor(me,Ee){super(me,Ee),this.scheduler=me,this.work=Ee,this.pending=!1}schedule(me,Ee=0){var pe;if(this.closed)return this;this.state=me;const $=this.id,B=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(B,$,Ee)),this.pending=!0,this.delay=Ee,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(B,this.id,Ee),this}requestAsyncId(me,Ee,pe=0){return P.setInterval(me.flush.bind(me,this),pe)}recycleAsyncId(me,Ee,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return Ee;null!=Ee&&P.clearInterval(Ee)}execute(me,Ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(me,Ee);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,Ee){let $,pe=!1;try{this.work(me)}catch(B){pe=!0,$=B||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:me,scheduler:Ee}=this,{actions:pe}=Ee;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(pe,this),null!=me&&(this.id=this.recycleAsyncId(Ee,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(gt,xe,k)=>{k.d(xe,{v:()=>P});var h=k(6063);class Q{constructor(se,oe=Q.now){this.schedulerActionCtor=se,this.now=oe}schedule(se,oe=0,me){return new this.schedulerActionCtor(this,se).schedule(me,oe)}}Q.now=h.l.now;class P extends Q{constructor(se,oe=Q.now){super(se,oe),this.actions=[],this._active=!1}flush(se){const{actions:oe}=this;if(this._active)return void oe.push(se);let me;this._active=!0;do{if(me=se.execute(se.state,se.delay))break}while(se=oe.shift());if(this._active=!1,me){for(;se=oe.shift();)se.unsubscribe();throw me}}}},4986:(gt,xe,k)=>{k.d(xe,{z:()=>P});var h=k(4408);const P=new(k(7565).v)(h.o)},6063:(gt,xe,k)=>{k.d(xe,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(gt,xe,k)=>{k.d(xe,{z:()=>h});const h={setTimeout(Q,P,...ie){const{delegate:se}=h;return se?.setTimeout?se.setTimeout(Q,P,...ie):setTimeout(Q,P,...ie)},clearTimeout(Q){const{delegate:P}=h;return(P?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(gt,xe,k)=>{k.d(xe,{h:()=>Q});const Q=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,xe,k)=>{k.d(xe,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(gt,xe,k)=>{k.d(xe,{_6:()=>oe,jO:()=>ie,yG:()=>se});var h=k(576);function P(me){return me[me.length-1]}function ie(me){return(0,h.m)(P(me))?me.pop():void 0}function se(me){return function Q(me){return me&&(0,h.m)(me.schedule)}(P(me))?me.pop():void 0}function oe(me,Ee){return"number"==typeof P(me)?me.pop():Ee}},8737:(gt,xe,k)=>{function h(Q,P){if(Q){const ie=Q.indexOf(P);0<=ie&&Q.splice(ie,1)}}k.d(xe,{P:()=>h})},3888:(gt,xe,k)=>{function h(Q){const ie=Q(se=>{Error.call(se),se.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}k.d(xe,{d:()=>h})},2806:(gt,xe,k)=>{k.d(xe,{O:()=>ie,x:()=>P});var h=k(2416);let Q=null;function P(se){if(h.v.useDeprecatedSynchronousErrorHandling){const oe=!Q;if(oe&&(Q={errorThrown:!1,error:null}),se(),oe){const{errorThrown:me,error:Ee}=Q;if(Q=null,me)throw Ee}}else se()}function ie(se){h.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=se)}},9672:(gt,xe,k)=>{function h(Q,P,ie,se=0,oe=!1){const me=P.schedule(function(){ie(),oe?Q.add(this.schedule(null,se)):this.unsubscribe()},se);if(Q.add(me),!oe)return me}k.d(xe,{f:()=>h})},4671:(gt,xe,k)=>{function h(Q){return Q}k.d(xe,{y:()=>h})},1144:(gt,xe,k)=>{k.d(xe,{z:()=>h});const h=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(gt,xe,k)=>{k.d(xe,{D:()=>Q});var h=k(576);function Q(P){return Symbol.asyncIterator&&(0,h.m)(P?.[Symbol.asyncIterator])}},576:(gt,xe,k)=>{function h(Q){return"function"==typeof Q}k.d(xe,{m:()=>h})},3670:(gt,xe,k)=>{k.d(xe,{c:()=>P});var h=k(8822),Q=k(576);function P(ie){return(0,Q.m)(ie[h.L])}},6495:(gt,xe,k)=>{k.d(xe,{T:()=>P});var h=k(2202),Q=k(576);function P(ie){return(0,Q.m)(ie?.[h.h])}},8239:(gt,xe,k)=>{k.d(xe,{t:()=>Q});var h=k(576);function Q(P){return(0,h.m)(P?.then)}},3260:(gt,xe,k)=>{k.d(xe,{L:()=>ie,Q:()=>P});var h=k(7582),Q=k(576);function P(se){return(0,h.FC)(this,arguments,function*(){const me=se.getReader();try{for(;;){const{value:Ee,done:pe}=yield(0,h.qq)(me.read());if(pe)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(Ee)}}finally{me.releaseLock()}})}function ie(se){return(0,Q.m)(se?.getReader)}},4482:(gt,xe,k)=>{k.d(xe,{A:()=>Q,e:()=>P});var h=k(576);function Q(ie){return(0,h.m)(ie?.lift)}function P(ie){return se=>{if(Q(se))return se.lift(function(oe){try{return ie(oe,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(gt,xe,k)=>{k.d(xe,{U:()=>P,z:()=>Q});var h=k(4671);function Q(...ie){return P(ie)}function P(ie){return 0===ie.length?h.y:1===ie.length?ie[0]:function(oe){return ie.reduce((me,Ee)=>Ee(me),oe)}}},7849:(gt,xe,k)=>{k.d(xe,{h:()=>P});var h=k(2416),Q=k(3410);function P(ie){Q.z.setTimeout(()=>{const{onUnhandledError:se}=h.v;if(!se)throw ie;se(ie)})}},4532:(gt,xe,k)=>{function h(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(xe,{z:()=>h})},4650:(gt,xe,k)=>{k.d(xe,{$8M:()=>Wo,$WT:()=>hr,$Z:()=>nh,AFp:()=>Wh,AaK:()=>Ee,CHM:()=>_a,CRH:()=>lu,CZH:()=>Kl,CqO:()=>ns,D6c:()=>U0,DdM:()=>RI,EJc:()=>tT,EpF:()=>vh,F4k:()=>l_,FYo:()=>jw,FiY:()=>Pa,GfV:()=>Or,Gpc:()=>B,JOm:()=>tn,KtG:()=>wa,LFG:()=>an,Lbi:()=>rD,Lck:()=>EI,MMx:()=>Vl,NdJ:()=>Tp,O4$:()=>ba,OlP:()=>qt,Oqu:()=>Nl,P3R:()=>Hd,PXZ:()=>cD,Q6J:()=>nn,QGY:()=>Am,Qsj:()=>Cv,R0b:()=>ai,RDi:()=>$g,Rgc:()=>Fh,SBq:()=>wl,Sil:()=>tg,Suo:()=>X_,TTD:()=>Vc,TgZ:()=>Qe,WLB:()=>oa,X6Q:()=>dD,XFs:()=>ft,Xpm:()=>Ci,Xts:()=>Gr,Y36:()=>th,YKP:()=>ey,YNc:()=>Un,Yjl:()=>Vt,Yz7:()=>at,Z0I:()=>Cn,ZZ4:()=>ug,_Bn:()=>wI,_UZ:()=>bp,_Vd:()=>sp,_c5:()=>V0,_uU:()=>bo,aQg:()=>By,c2e:()=>Iy,cJS:()=>ht,cg1:()=>D_,dDg:()=>I0,dqk:()=>Jt,eFA:()=>Ry,eJc:()=>$h,ekj:()=>na,eoX:()=>uD,f3M:()=>Ln,g9A:()=>Ey,h0i:()=>kn,hGG:()=>fT,hij:()=>To,iGM:()=>Zp,ifc:()=>ve,ip1:()=>wy,jDz:()=>z_,kL8:()=>jm,kcU:()=>Os,lG2:()=>wt,lqb:()=>vl,lri:()=>E0,n5z:()=>Uu,oAB:()=>X,oxw:()=>Sp,q4F:()=>zr,qLn:()=>ap,qOj:()=>dh,qZA:()=>Al,rWj:()=>aD,sBO:()=>S0,s_b:()=>Vh,soG:()=>Dy,tb:()=>Yl,tp0:()=>zu,uIk:()=>tt,vHH:()=>ge,vpe:()=>ss,wAp:()=>Et,xp6:()=>dp,z2F:()=>Mo,zSh:()=>ip,zs3:()=>Za});var h=k(7579),Q=k(727),P=k(9751),ie=k(6451),se=k(3099);function oe(i){for(let o in i)if(i[o]===oe)return o;throw Error("Could not find renamed property on target object.")}function me(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function Ee(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Ee).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function pe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const $=oe({__forward_ref__:oe});function B(i){return i.__forward_ref__=B,i.toString=function(){return Ee(this())},i}function q(i){return Ge(i)?i():i}function Ge(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===B}function Ae(i){return i&&!!i.\u0275providers}const ot="https://g.co/ng/security#xss";class ge extends Error{constructor(o,a){super(Ne(o,a)),this.code=o}}function Ne(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}function Oe(i){return"string"==typeof i?i:null==i?"":String(i)}function qe(i,o){throw new ge(-201,!1)}function fe(i,o){null==i&&function re(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function at(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function ht(i){return{providers:i.providers||[],imports:i.imports||[]}}function Gt(i){return ui(i,En)||ui(i,br)}function Cn(i){return null!==Gt(i)}function ui(i,o){return i.hasOwnProperty(o)?i[o]:null}function xn(i){return i&&(i.hasOwnProperty(wr)||i.hasOwnProperty(Tr))?i[wr]:null}const En=oe({\u0275prov:oe}),wr=oe({\u0275inj:oe}),br=oe({ngInjectableDef:oe}),Tr=oe({ngInjectorDef:oe});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Kr;function Er(i){const o=Kr;return Kr=i,o}function Vr(i,o,a){const c=Gt(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&ft.Optional?null:void 0!==o?o:void qe(Ee(i))}const Jt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ci={},Yr="__NG_DI_FLAG__",dr="ngTempTokenPath",Ur="ngTokenPath",Mn=/\n/gm,Qr="\u0275",pn="__source";let As;function zt(i){const o=As;return As=i,o}function $i(i,o=ft.Default){if(void 0===As)throw new ge(-203,!1);return null===As?Vr(i,void 0,o):As.get(i,o&ft.Optional?null:void 0,o)}function an(i,o=ft.Default){return(function Pc(){return Kr}()||$i)(q(i),o)}function Ln(i,o=ft.Default){return an(i,Kn(o))}function Kn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Ii(i){const o=[];for(let a=0;a<i.length;a++){const c=q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new ge(900,!1);let d,g=ft.Default;for(let v=0;v<c.length;v++){const I=c[v],C=Di(I);"number"==typeof C?-1===C?d=I.token:g|=C:d=I}o.push(an(d,g))}else o.push(an(c))}return o}function In(i,o){return i[Yr]=o,i.prototype[Yr]=o,i}function Di(i){return i[Yr]}function L(i){return{toString:i}.toString()}var z=(()=>((z=z||{})[z.OnPush=0]="OnPush",z[z.Default=1]="Default",z))(),ve=(()=>{return(i=ve||(ve={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",ve;var i})();const J={},Le=[],Ct=oe({\u0275cmp:oe}),Zt=oe({\u0275dir:oe}),jn=oe({\u0275pipe:oe}),bn=oe({\u0275mod:oe}),ln=oe({\u0275fac:oe}),jt=oe({__NG_ELEMENT_ID__:oe});let Sr=0;function Ci(i){return L(()=>{const o=hu(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===z.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||ve.Emulated,id:"c"+Sr++,styles:i.styles||Le,_:null,schemas:i.schemas||null,tView:null};df(a);const c=i.dependencies;return a.directiveDefs=No(c,!1),a.pipeDefs=No(c,!0),a})}function la(i){return pt(i)||Xt(i)}function de(i){return null!==i}function X(i){return L(()=>({type:i.type,bootstrap:i.bootstrap||Le,declarations:i.declarations||Le,imports:i.imports||Le,exports:i.exports||Le,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function dt(i,o){if(null==i)return J;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=c,o&&(o[d]=g)}return a}function wt(i){return L(()=>{const o=hu(i);return df(o),o})}function Vt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function pt(i){return i[Ct]||null}function Xt(i){return i[Zt]||null}function Kt(i){return i[jn]||null}function hr(i){const o=pt(i)||Xt(i)||Kt(i);return null!==o&&o.standalone}function Yn(i,o){const a=i[bn]||null;if(!a&&!0===o)throw new Error(`Type ${Ee(i)} does not have '\u0275mod' property.`);return a}function hu(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||Le,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dt(i.inputs,o),outputs:dt(i.outputs)}}function df(i){i.features?.forEach(o=>o(i))}function No(i,o){if(!i)return null;const a=o?Kt:la;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(de)}const di=0,Ze=1,Rt=2,Dn=3,hi=4,hn=5,Qn=6,Oo=7,Vn=8,da=9,Ks=10,Lt=11,ha=12,Ys=13,cs=14,Qs=15,$n=16,Po=17,ls=18,Gi=19,ko=20,Ir=21,yn=22,fa=1,kc=2,Fo=7,xs=8,Js=9,fr=10;function Xr(i){return Array.isArray(i)&&"object"==typeof i[fa]}function ei(i){return Array.isArray(i)&&!0===i[fa]}function pa(i){return 0!=(4&i.flags)}function Lo(i){return i.componentOffset>-1}function Fc(i){return 1==(1&i.flags)}function fi(i){return!!i.template}function pu(i){return 0!=(256&i[Rt])}function zi(i,o){return i.hasOwnProperty(ln)?i[ln]:null}class Xs{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Vc(){return ga}function ga(i){return i.type.prototype.ngOnChanges&&(i.setInput=Uc),ad}function ad(){const i=gf(this),o=i?.current;if(o){const a=i.previous;if(a===J)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function Uc(i,o,a,c){const d=this.declaredInputs[a],g=gf(i)||function yu(i,o){return i[Ms]=o}(i,{previous:J,current:null}),v=g.current||(g.current={}),I=g.previous,C=I[d];v[d]=new Xs(C&&C.currentValue,o,I===J),i[c]=o}Vc.ngInherit=!0;const Ms="__ngSimpleChanges__";function gf(i){return i[Ms]||null}const jr=function(i,o,a){},Ar="svg";function pr(i){for(;Array.isArray(i);)i=i[di];return i}function fs(i,o){return pr(o[i])}function gr(i,o){return pr(o[i.index])}function cd(i,o){return i.data[o]}function ir(i,o){const a=o[i];return Xr(a)?a:a[di]}function ps(i){return 64==(64&i[Rt])}function Ns(i,o){return null==o?null:i[o]}function Bo(i){i[ls]=0}function ya(i,o){i[hn]+=o;let a=i,c=i[Dn];for(;null!==c&&(1===o&&1===a[hn]||-1===o&&0===a[hn]);)c[hn]+=o,a=c,c=c[Dn]}const xt={lFrame:$c(null),bindingsEnabled:!0};function Eu(){return xt.bindingsEnabled}function he(){return xt.lFrame.lView}function kt(){return xt.lFrame.tView}function _a(i){return xt.lFrame.contextLView=i,i[Vn]}function wa(i){return xt.lFrame.contextLView=null,i}function sr(){let i=eo();for(;null!==i&&64===i.type;)i=i.parent;return i}function eo(){return xt.lFrame.currentTNode}function $r(i,o){const a=xt.lFrame;a.currentTNode=i,a.isParent=o}function pd(){return xt.lFrame.isParent}function Jn(){const i=xt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function to(){return xt.lFrame.bindingIndex++}function Cu(i,o){const a=xt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Xn(o)}function Xn(i){xt.lFrame.currentDirectiveIndex=i}function jc(){return xt.lFrame.currentQueryIndex}function bu(i){xt.lFrame.currentQueryIndex=i}function md(i){const o=i[Ze];return 2===o.type?o.declTNode:1===o.type?i[Qn]:null}function Tu(i,o,a){if(a&ft.SkipSelf){let d=o,g=i;for(;!(d=d.parent,null!==d||a&ft.Host||(d=md(g),null===d||(g=g[Qs],10&d.type))););if(null===d)return!1;o=d,i=g}const c=xt.lFrame=Da();return c.currentTNode=o,c.lView=i,!0}function Su(i){const o=Da(),a=i[Ze];xt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Da(){const i=xt.lFrame,o=null===i?null:i.child;return null===o?$c(i):o}function $c(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Ca(){const i=xt.lFrame;return xt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const yd=Ca;function Au(){const i=Ca();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Dr(){return xt.lFrame.selectedIndex}function ms(i){xt.lFrame.selectedIndex=i}function Tn(){const i=xt.lFrame;return cd(i.tView,i.selectedIndex)}function ba(){xt.lFrame.currentNamespace=Ar}function Os(){!function vf(){xt.lFrame.currentNamespace=null}()}function Mu(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:R}=g;v&&(i.contentHooks??(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks??(i.contentHooks=[])).push(a,I),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(a,I)),C&&(i.viewHooks??(i.viewHooks=[])).push(-a,C),x&&((i.viewHooks??(i.viewHooks=[])).push(a,x),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(a,x)),null!=R&&(i.destroyHooks??(i.destroyHooks=[])).push(a,R)}}function Hc(i,o,a){zc(i,o,3,a)}function Gc(i,o,a,c){(3&i[Rt])===a&&zc(i,o,a,c)}function _d(i,o){let a=i[Rt];(3&a)===o&&(a&=2047,a+=1,i[Rt]=a)}function zc(i,o,a,c){const g=c??-1,v=o.length-1;let I=0;for(let C=void 0!==c?65535&i[ls]:0;C<v;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(i[ls]+=65536),(I<g||-1==g)&&($o(i,a,o,C),i[ls]=(4294901760&i[ls])+C+2),C++}function $o(i,o,a,c){const d=a[c]<0,g=a[c+1],I=i[d?-a[c]:a[c]];if(d){if(i[Rt]>>11<i[ls]>>16&&(3&i[Rt])===o){i[Rt]+=2048,jr(4,I,g);try{g.call(I)}finally{jr(5,I,g)}}}else{jr(4,I,g);try{g.call(I)}finally{jr(5,I,g)}}}const Ho=-1;class ys{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Go(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const g=a[c++],v=a[c++],I=a[c++];i.setAttribute(o,v,I,g)}else{const g=d,v=a[++c];io(g)?i.setProperty(o,g,v):i.setAttribute(o,g,v),c++}}return c}function qc(i){return 3===i||4===i||6===i}function io(i){return 64===i.charCodeAt(0)}function so(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||Ou(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function Ou(i,o,a,c,d){let g=0,v=i.length;if(-1===o)v=-1;else for(;g<i.length;){const I=i[g++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=g-1;break}}}for(;g<i.length;){const I=i[g];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(i[g+1]=d));if(c===i[g+1])return void(i[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==v&&(i.splice(v,0,o),g=v+1),i.splice(g++,0,a),null!==c&&i.splice(g++,0,c),null!==d&&i.splice(g++,0,d)}function oo(i){return i!==Ho}function Ps(i){return 32767&i}function ao(i,o){let a=function wd(i){return i>>16}(i),c=o;for(;a>0;)c=c[Qs],a--;return c}let Pu=!0;function Sa(i){const o=Pu;return Pu=i,o}const ku=255,Ed=5;let uo=0;const Ti={};function Wc(i,o){const a=qo(i,o);if(-1!==a)return a;const c=o[Ze];c.firstCreatePass&&(i.injectorIndex=o.length,zo(c.data,i),zo(o,null),zo(c.blueprint,null));const d=Id(i,o),g=i.injectorIndex;if(oo(d)){const v=Ps(d),I=ao(d,o),C=I[Ze].data;for(let x=0;x<8;x++)o[g+x]=I[v+x]|C[v+x]}return o[g+8]=d,g}function zo(i,o){i.push(0,0,0,0,0,0,0,0,o)}function qo(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Id(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Ma(d),null===c)return Ho;if(a++,d=d[Qs],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Ho}function gn(i,o,a){!function vs(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(jt)&&(c=a[jt]),null==c&&(c=a[jt]=uo++);const d=c&ku;o.data[i+(d>>Ed)]|=1<<d}(i,o,a)}function Fu(i,o,a){if(a&ft.Optional||void 0!==i)return i;qe()}function Zc(i,o,a,c){if(a&ft.Optional&&void 0===c&&(c=null),!(a&(ft.Self|ft.Host))){const d=i[da],g=Er(void 0);try{return d?d.get(o,c,a&ft.Optional):Vr(o,c,a&ft.Optional)}finally{Er(g)}}return Fu(c,0,a)}function Lu(i,o,a,c=ft.Default,d){if(null!==i){if(1024&o[Rt]){const v=function Yc(i,o,a,c,d){let g=i,v=o;for(;null!==g&&null!==v&&1024&v[Rt]&&!(256&v[Rt]);){const I=Vu(g,v,a,c|ft.Self,Ti);if(I!==Ti)return I;let C=g.parent;if(!C){const x=v[Ir];if(x){const R=x.get(a,Ti,c);if(R!==Ti)return R}C=Ma(v),v=v[Qs]}g=C}return d}(i,o,a,c,Ti);if(v!==Ti)return v}const g=Vu(i,o,a,c,Ti);if(g!==Ti)return g}return Zc(o,a,c,d)}function Vu(i,o,a,c,d){const g=function Kc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(jt)?i[jt]:void 0;return"number"==typeof o?o>=0?o&ku:Ef:o}(a);if("function"==typeof g){if(!Tu(o,i,c))return c&ft.Host?Fu(d,0,c):Zc(o,a,c,d);try{const v=g(c);if(null!=v||c&ft.Optional)return v;qe()}finally{yd()}}else if("number"==typeof g){let v=null,I=qo(i,o),C=Ho,x=c&ft.Host?o[$n][Qn]:null;for((-1===I||c&ft.SkipSelf)&&(C=-1===I?Id(i,o):o[I+8],C!==Ho&&xa(c,!1)?(v=o[Ze],I=Ps(C),o=ao(C,o)):I=-1);-1!==I;){const R=o[Ze];if(Aa(g,I,R.data)){const F=or(I,o,a,v,c,x);if(F!==Ti)return F}C=o[I+8],C!==Ho&&xa(c,o[Ze].data[I+8]===x)&&Aa(g,I,o)?(v=R,I=Ps(C),o=ao(C,o)):I=-1}}return d}function or(i,o,a,c,d,g){const v=o[Ze],I=v.data[i+8],R=co(I,v,a,null==c?Lo(I)&&Pu:c!=v&&0!=(3&I.type),d&ft.Host&&g===I);return null!==R?Hn(o,v,R,I):Ti}function co(i,o,a,c,d){const g=i.providerIndexes,v=o.data,I=1048575&g,C=i.directiveStart,R=g>>20,G=d?I+R:i.directiveEnd;for(let K=c?I:I+R;K<G;K++){const we=v[K];if(K<C&&a===we||K>=C&&we.type===a)return K}if(d){const K=v[C];if(K&&fi(K)&&K.type===a)return C}return null}function Hn(i,o,a,c){let d=i[a];const g=o.data;if(function Rg(i){return i instanceof ys}(d)){const v=d;v.resolving&&function Pe(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new ge(-200,`Circular dependency in DI detected for ${i}${a}`)}(function je(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Oe(i)}(g[a]));const I=Sa(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?Er(v.injectImpl):null;Tu(i,c,ft.Default);try{d=i[a]=v.factory(void 0,g,i,c),o.firstCreatePass&&a>=c.directiveStart&&function Mg(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const v=ga(o);(a.preOrderHooks??(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-i,d),g&&((a.preOrderHooks??(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],o)}finally{null!==C&&Er(C),Sa(I),v.resolving=!1,yd()}}return d}function Aa(i,o,a){return!!(a[o+(i>>Ed)]&1<<i)}function xa(i,o){return!(i&ft.Self||i&ft.Host&&o)}class _s{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return Lu(this._tNode,this._lView,o,Kn(c),a)}}function Ef(){return new _s(sr(),he())}function Uu(i){return L(()=>{const o=i.prototype.constructor,a=o[ln]||lo(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const g=d[ln]||lo(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function lo(i){return Ge(i)?()=>{const o=lo(q(i));return o&&o()}:zi(i)}function Ma(i){const o=i[Ze],a=o.type;return 2===a?o.declTNode:1===a?i[Qn]:null}function Wo(i){return function Dd(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const g=a[d];if(qc(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(sr(),i)}const Zo="__parameters__";function fo(i,o,a){return L(()=>{const c=function ho(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const v=new d(...g);return I.annotation=v,I;function I(C,x,R){const F=C.hasOwnProperty(Zo)?C[Zo]:Object.defineProperty(C,Zo,{value:[]})[Zo];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(v),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class qt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=at({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Wi(i,o){i.forEach(a=>Array.isArray(a)?Wi(a,o):o(a))}function Tf(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function go(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Hr(i,o,a){let c=Rr(i,o);return c>=0?i[1|c]=a:(c=~c,function el(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function Mr(i,o){const a=Rr(i,o);if(a>=0)return i[1|a]}function Rr(i,o){return function en(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const g=c+(d-c>>1),v=i[g<<a];if(o===v)return g<<a;v>o?d=g:c=g+1}return~(d<<a)}(i,o,1)}const Pa=In(fo("Optional"),8),zu=In(fo("SkipSelf"),4);var tn=(()=>((tn=tn||{})[tn.Important=1]="Important",tn[tn.DashCase=2]="DashCase",tn))();const Rd=new Map;let Nd=0;const W="__ngContext__";function te(i,o){Xr(o)?(i[W]=o[ko],function Pf(i){Rd.set(i[ko],i)}(o)):i[W]=o}let Mi;function nc(i,o){return Mi(i,o)}function ol(i){const o=i[Dn];return ei(o)?o[Dn]:o}function ul(i){return Pd(i[Ys])}function Yo(i){return Pd(i[hi])}function Pd(i){for(;null!==i&&!ei(i);)i=i[hi];return i}function Es(i,o,a,c,d){if(null!=c){let g,v=!1;ei(c)?g=c:Xr(c)&&(v=!0,c=c[di]);const I=pr(c);0===i&&null!==a?null==d?cl(o,a,I):Ba(o,a,I,d||null,!0):1===i&&null!==a?Ba(o,a,I,d||null,!0):2===i?function ll(i,o,a){const c=Vd(i,o);c&&function kg(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,I,v):3===i&&o.destroyNode(I),null!=g&&function Vg(i,o,a,c,d){const g=a[Fo];g!==pr(a)&&Es(o,i,c,g,d);for(let I=fr;I<a.length;I++){const C=a[I];dl(C[Ze],C,i,o,c,g)}}(o,i,g,a,d)}}function Uf(i,o,a){return i.createElement(o,a)}function Pg(i,o){const a=i[Js],c=a.indexOf(o),d=o[Dn];512&o[Rt]&&(o[Rt]&=-513,ya(d,-1)),a.splice(c,1)}function Qo(i,o){if(i.length<=fr)return;const a=fr+o,c=i[a];if(c){const d=c[Po];null!==d&&d!==i&&Pg(d,c),o>0&&(i[a-1][hi]=c[hi]);const g=go(i,fr+o);!function Bf(i,o){dl(i,o,o[Lt],2,null,null),o[di]=null,o[Qn]=null}(c[Ze],c);const v=g[Gi];null!==v&&v.detachView(g[Ze]),c[Dn]=null,c[hi]=null,c[Rt]&=-65}return c}function Ld(i,o){if(!(128&o[Rt])){const a=o[Lt];a.destroyNode&&dl(i,o,a,3,null,null),function Og(i){let o=i[Ys];if(!o)return rc(i[Ze],i);for(;o;){let a=null;if(Xr(o))a=o[Ys];else{const c=o[fr];c&&(a=c)}if(!a){for(;o&&!o[hi]&&o!==i;)Xr(o)&&rc(o[Ze],o),o=o[Dn];null===o&&(o=i),Xr(o)&&rc(o[Ze],o),a=o&&o[hi]}o=a}}(o)}}function rc(i,o){if(!(128&o[Rt])){o[Rt]&=-65,o[Rt]|=128,function Hf(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof ys)){const g=a[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=d[g[v]],C=g[v+1];jr(4,I,C);try{C.call(I)}finally{jr(5,I,C)}}else{jr(4,d,g);try{g.call(d)}finally{jr(5,d,g)}}}}}(i,o),function $f(i,o){const a=i.cleanup,c=o[Oo];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+3];v>=0?c[d=v]():c[d=-v].unsubscribe(),g+=2}else{const v=c[d=a[g+1]];a[g].call(v)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[Oo]=null}}(i,o),1===o[Ze].type&&o[Lt].destroy();const a=o[Po];if(null!==a&&ei(o[Dn])){a!==o[Dn]&&Pg(a,o);const c=o[Gi];null!==c&&c.detachView(i)}!function E(i){Rd.delete(i[ko])}(o)}}function ic(i,o,a){return function Gf(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[di];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=i.data[c.directiveStart+d];if(g===ve.None||g===ve.Emulated)return null}return gr(c,a)}}(i,o.parent,a)}function Ba(i,o,a,c,d){i.insertBefore(o,a,c,d)}function cl(i,o,a){i.appendChild(o,a)}function ja(i,o,a,c,d){null!==c?Ba(i,o,a,c,d):cl(i,o,a)}function Vd(i,o){return i.parentNode(o)}let qf,oc,Jo,Fg=function Ud(i,o,a){return 40&i.type?gr(i,a):null};function sc(i,o,a,c){const d=ic(i,c,o),g=o[Lt],I=function zf(i,o,a){return Fg(i,o,a)}(c.parent||o[Qn],c,o);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)ja(g,d,a[C],I,!1);else ja(g,d,a,I,!1);void 0!==qf&&qf(g,c,o,a,d)}function $a(i,o){if(null!==o){const a=o.type;if(3&a)return gr(o,i);if(4&a)return Ha(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return $a(i,c);{const d=i[o.index];return ei(d)?Ha(-1,d):pr(d)}}if(32&a)return nc(o,i)()||pr(i[o.index]);{const c=Wf(i,o);return null!==c?Array.isArray(c)?c[0]:$a(ol(i[$n]),c):$a(i,o.next)}}return null}function Wf(i,o){return null!==o?i[$n][Qn].projection[o.projection]:null}function Ha(i,o){const a=fr+i+1;if(a<o.length){const c=o[a],d=c[Ze].firstChild;if(null!==d)return $a(c,d)}return o[Fo]}function Zf(i,o,a,c,d,g,v){for(;null!=a;){const I=c[a.index],C=a.type;if(v&&0===o&&(I&&te(pr(I),c),a.flags|=2),32!=(32&a.flags))if(8&C)Zf(i,o,a.child,c,d,g,!1),Es(o,i,d,I,g);else if(32&C){const x=nc(a,c);let R;for(;R=x();)Es(o,i,d,R,g);Es(o,i,d,I,g)}else 16&C?Kf(i,o,c,a,d,g):Es(o,i,d,I,g);a=v?a.projectionNext:a.next}}function dl(i,o,a,c,d,g){Zf(a,c,i.firstChild,o,d,g,!1)}function Kf(i,o,a,c,d,g){const v=a[$n],C=v[Qn].projection[c.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)Es(o,i,d,C[x],g);else Zf(i,o,C,v[Dn],d,g,!0)}function Ga(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function hv(i,o,a){const{mergedAttrs:c,classes:d,styles:g}=a;null!==c&&Go(i,o,c),null!==d&&Ga(i,o,d),null!==g&&function Bg(i,o,a){i.setAttribute(o,"style",a)}(i,o,g)}function $g(i){oc=i}function Hg(i){return function pl(){if(void 0===Jo&&(Jo=null,Jt.trustedTypes))try{Jo=Jt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Jo}()?.createScriptURL(i)||i}class Gg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ot})`}}function ti(i){return i instanceof Gg?i.changingThisBreaksApplicationSecurity:i}function gl(i,o){const a=function Tw(i){return i instanceof Gg&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${ot})`)}return a===o}const ep=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var zn=(()=>((zn=zn||{})[zn.NONE=0]="NONE",zn[zn.HTML=1]="HTML",zn[zn.STYLE=2]="STYLE",zn[zn.SCRIPT=3]="SCRIPT",zn[zn.URL=4]="URL",zn[zn.RESOURCE_URL=5]="RESOURCE_URL",zn))();function $d(i){const o=Gd();return o?o.sanitize(zn.URL,i)||"":gl(i,"URL")?ti(i):function yl(i){return(i=String(i)).match(ep)?i:"unsafe:"+i}(Oe(i))}function tp(i){const o=Gd();if(o)return Hg(o.sanitize(zn.RESOURCE_URL,i)||"");if(gl(i,"ResourceURL"))return Hg(ti(i));throw new ge(904,!1)}function Hd(i,o,a){return function ea(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?tp:$d}(o,a)(i)}function Gd(){const i=he();return i&&i[ha]}const Gr=new qt("ENVIRONMENT_INITIALIZER"),Mw=new qt("INJECTOR",-1),zd=new qt("INJECTOR_DEF_TYPES");class np{get(o,a=ci){if(a===ci){const c=new Error(`NullInjectorError: No provider for ${Ee(o)}!`);throw c.name="NullInjectorError",c}return a}}function mv(...i){return{\u0275providers:Rw(0,i),\u0275fromNgModule:!0}}function Rw(i,...o){const a=[],c=new Set;let d;return Wi(o,g=>{const v=g;dc(v,a,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&Nw(d,a),a}function Nw(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];rp(d,g=>{o.push(g)})}}function dc(i,o,a,c){if(!(i=q(i)))return!1;let d=null,g=xn(i);const v=!g&&pt(i);if(g||v){if(v&&!v.standalone)return!1;d=i}else{const C=i.ngModule;if(g=xn(C),!g)return!1;d=C}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const x of C)dc(x,o,a,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let x;c.add(d);try{Wi(g.imports,R=>{dc(R,o,a,c)&&(x||(x=[]),x.push(R))})}finally{}void 0!==x&&Nw(x,o)}if(!I){const x=zi(d)||(()=>new d);o.push({provide:d,useFactory:x,deps:Le},{provide:zd,useValue:d,multi:!0},{provide:Gr,useValue:()=>an(d),multi:!0})}const C=g.providers;null==C||I||rp(C,R=>{o.push(R)})}}return d!==i&&void 0!==i.providers}function rp(i,o){for(let a of i)Ae(a)&&(a=a.\u0275providers),Array.isArray(a)?rp(a,o):o(a)}const Ow=oe({provide:String,useValue:oe});function yv(i){return null!==i&&"object"==typeof i&&Ow in i}function qa(i){return"function"==typeof i}const ip=new qt("Set Injector scope."),qd={},Pw={};let wv;function hc(){return void 0===wv&&(wv=new np),wv}class vl{}class Wd extends vl{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Kd(o,v=>this.processProvider(v)),this.records.set(Mw,Zd(void 0,this)),d.has("environment")&&this.records.set(vl,Zd(void 0,this));const g=this.records.get(ip);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(zd.multi,Le,ft.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=zt(this),c=Er(void 0);try{return o()}finally{zt(a),Er(c)}}get(o,a=ci,c=ft.Default){this.assertNotDestroyed(),c=Kn(c);const d=zt(this),g=Er(void 0);try{if(!(c&ft.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function Lw(i){return"function"==typeof i||"object"==typeof i&&i instanceof qt}(o)&&Gt(o);I=C&&this.injectableDefInScope(C)?Zd(Ev(o),qd):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&ft.Self?hc():this.parent).get(o,a=c&ft.Optional&&a===ci?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[dr]=v[dr]||[]).unshift(Ee(o)),d)throw v;return function Br(i,o,a,c){const d=i[dr];throw o[pn]&&d.unshift(o[pn]),i.message=function V(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==Qr?i.slice(2):i;let d=Ee(o);if(Array.isArray(o))d=o.map(Ee).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):Ee(I)))}d=`{${g.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Mn,"\n  ")}`}("\n"+i.message,d,a,c),i[Ur]=d,i[dr]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{Er(g),zt(d)}}resolveInjectorInitializers(){const o=zt(this),a=Er(void 0);try{const c=this.get(Gr.multi,Le,ft.Self);for(const d of c)d()}finally{zt(o),Er(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(Ee(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(o){let a=qa(o=q(o))?o:q(o&&o.provide);const c=function Jg(i){return yv(i)?Zd(void 0,i.useValue):Zd(Xg(i),qd)}(o);if(qa(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Zd(void 0,qd,!0),d.factory=()=>Ii(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===qd&&(a.value=Pw,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Fw(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Ev(i){const o=Gt(i),a=null!==o?o.factory:zi(i);if(null!==a)return a;if(i instanceof qt)throw new ge(204,!1);if(i instanceof Function)return function SC(i){const o=i.length;if(o>0)throw function ju(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new ge(204,!1);const a=function Wt(i){return i&&(i[En]||i[br])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ge(204,!1)}function Xg(i,o,a){let c;if(qa(i)){const d=q(i);return zi(d)||Ev(d)}if(yv(i))c=()=>q(i.useValue);else if(function Qg(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Ii(i.deps||[]));else if(function vv(i){return!(!i||!i.useExisting)}(i))c=()=>an(q(i.useExisting));else{const d=q(i&&(i.useClass||i.provide));if(!function kw(i){return!!i.deps}(i))return zi(d)||Ev(d);c=()=>new d(...Ii(i.deps))}return c}function Zd(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Kd(i,o){for(const a of i)Array.isArray(a)?Kd(a,o):a&&Ae(a)?Kd(a.\u0275providers,o):o(a)}class Iv{}class em{}class Vw{resolveComponentFactory(o){throw function Dv(i){const o=Error(`No component factory found for ${Ee(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let sp=(()=>{class i{}return i.NULL=new Vw,i})();function Uw(){return _l(sr(),he())}function _l(i,o){return new wl(gr(i,o))}let wl=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Uw,i})();function Bw(i){return i instanceof wl?i.nativeElement:i}class jw{}let Cv=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function bv(){const i=he(),a=ir(sr().index,i);return(Xr(a)?a:i)[Lt]}(),i})(),Tv=(()=>{class i{}return i.\u0275prov=at({token:i,providedIn:"root",factory:()=>null}),i})();class Or{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const zr=new Or("15.2.10"),Yd={},op="ngOriginalError";function Sv(i){return i[op]}class ap{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Sv(o);for(;a&&Sv(a);)a=Sv(a);return a||null}}function Wa(i){return i instanceof Function?i():i}function Mv(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||i.charCodeAt(d+g)<=32)return d}a=d+1}}const Rv="ng-template";function zw(i,o,a){let c=0,d=!0;for(;c<i.length;){let g=i[c++];if("string"==typeof g&&d){const v=i[c++];if(a&&"class"===g&&-1!==Mv(v.toLowerCase(),o,0))return!0}else{if(1===g){for(;c<i.length&&"string"==typeof(g=i[c++]);)if(g.toLowerCase()===o)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function lp(i){return 4===i.type&&i.value!==Rv}function PC(i,o,a){return o===(4!==i.type||a?i.value:Rv)}function kC(i,o,a){let c=4;const d=i.attrs||[],g=function Ww(i){for(let o=0;o<i.length;o++)if(qc(i[o]))return o;return i.length}(d);let v=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!PC(i,C,a)||""===C&&1===o.length){if(wi(c))return!1;v=!0}}else{const x=8&c?C:o[++I];if(8&c&&null!==i.attrs){if(!zw(i.attrs,x,a)){if(wi(c))return!1;v=!0}continue}const F=FC(8&c?"class":C,d,lp(i),a);if(-1===F){if(wi(c))return!1;v=!0;continue}if(""!==x){let G;G=F>g?"":d[F+1].toLowerCase();const K=8&c?G:null;if(K&&-1!==Mv(K,x,0)||2&c&&x!==G){if(wi(c))return!1;v=!0}}}}else{if(!v&&!wi(c)&&!wi(C))return!1;if(v&&wi(C))continue;v=!1,c=C|1&c}}return wi(c)||v}function wi(i){return 0==(1&i)}function FC(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===i)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function im(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function qw(i,o,a=!1){for(let c=0;c<o.length;c++)if(kC(i,o[c],a))return!0;return!1}function Qd(i,o){return i?":not("+o.trim()+")":o}function Kw(i){let o=i[0],a=1,c=2,d="",g=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const I=i[++a];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!wi(v)&&(o+=Qd(g,d),d=""),c=v,g=g||!wi(c);a++}return""!==d&&(o+=Qd(g,d)),o}const Nt={};function dp(i){Nv(kt(),he(),Dr()+i,!1)}function Nv(i,o,a,c){if(!c)if(3==(3&o[Rt])){const g=i.preOrderCheckHooks;null!==g&&Hc(o,g,a)}else{const g=i.preOrderHooks;null!==g&&Gc(o,g,0,a)}ms(a)}function kv(i,o=null,a=null,c){const d=Xw(i,o,a,c);return d.resolveInjectorInitializers(),d}function Xw(i,o=null,a=null,c,d=new Set){const g=[a||Le,mv(i)];return c=c||("object"==typeof i?void 0:Ee(i)),new Wd(g,o||hc(),c||null,d)}let Za=(()=>{class i{static create(a,c){if(Array.isArray(a))return kv({name:""},c,a,"");{const d=a.name??"";return kv({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=ci,i.NULL=new np,i.\u0275prov=at({token:i,providedIn:"any",factory:()=>an(Mw)}),i.__NG_ELEMENT_ID__=-1,i})();function th(i,o=ft.Default){const a=he();return null===a?an(i,o):Lu(sr(),a,q(i),o)}function nh(){throw new Error("invalid")}function Vv(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const g=a[c+1];if(-1!==g){const v=i.data[g];bu(a[c]),v.contentQueries(2,o[g],g)}}}function Ya(i,o,a,c,d,g,v,I,C,x,R){const F=o.blueprint.slice();return F[di]=d,F[Rt]=76|c,(null!==R||i&&1024&i[Rt])&&(F[Rt]|=1024),Bo(F),F[Dn]=F[Qs]=i,F[Vn]=a,F[Ks]=v||i&&i[Ks],F[Lt]=I||i&&i[Lt],F[ha]=C||i&&i[ha]||null,F[da]=x||i&&i[da]||null,F[Qn]=g,F[ko]=function Od(){return Nd++}(),F[Ir]=R,F[$n]=2==o.type?i[$n]:F,F}function rh(i,o,a,c,d){let g=i.data[o];if(null===g)g=function Uv(i,o,a,c,d){const g=eo(),v=pd(),C=i.data[o]=function ym(i,o,a,c,d,g){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C,C.prev=g)),C}(i,o,a,c,d),function gd(){return xt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=a,g.value=c,g.attrs=d;const v=function Iu(){const i=xt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return $r(g,!0),g}function ih(i,o,a,c){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function Bv(i,o,a){Su(o);try{const c=i.viewQuery;null!==c&&Cm(1,c,a);const d=i.template;null!==d&&jv(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Vv(i,o),i.staticViewQueries&&Cm(2,i.viewQuery,a);const g=i.components;null!==g&&function aE(i,o){for(let a=0;a<o.length;a++)mE(i,o[a])}(o,g)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[Rt]&=-5,Au()}}function gp(i,o,a,c){const d=o[Rt];if(128!=(128&d)){Su(o);try{Bo(o),function qi(i){return xt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&jv(i,o,a,2,c);const v=3==(3&d);if(v){const x=i.preOrderCheckHooks;null!==x&&Hc(o,x,null)}else{const x=i.preOrderHooks;null!==x&&Gc(o,x,0,null),_d(o,0)}if(function WC(i){for(let o=ul(i);null!==o;o=Yo(o)){if(!o[kc])continue;const a=o[Js];for(let c=0;c<a.length;c++){const d=a[c];512&d[Rt]||ya(d[Dn],1),d[Rt]|=512}}}(o),function Dm(i){for(let o=ul(i);null!==o;o=Yo(o))for(let a=fr;a<o.length;a++){const c=o[a],d=c[Ze];ps(c)&&gp(d,c,d.template,c[Vn])}}(o),null!==i.contentQueries&&Vv(i,o),v){const x=i.contentCheckHooks;null!==x&&Hc(o,x)}else{const x=i.contentHooks;null!==x&&Gc(o,x,1),_d(o,1)}!function pc(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)ms(~d);else{const g=d,v=a[++c],I=a[++c];Cu(v,g),I(2,o[g])}}}finally{ms(-1)}}(i,o);const I=i.components;null!==I&&function oE(i,o){for(let a=0;a<o.length;a++)gE(i,o[a])}(o,I);const C=i.viewQuery;if(null!==C&&Cm(2,C,c),v){const x=i.viewCheckHooks;null!==x&&Hc(o,x)}else{const x=i.viewHooks;null!==x&&Gc(o,x,2),_d(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Rt]&=-41,512&o[Rt]&&(o[Rt]&=-513,ya(o[Dn],-1))}finally{Au()}}}function jv(i,o,a,c,d){const g=Dr(),v=2&c;try{ms(-1),v&&o.length>yn&&Nv(i,o,yn,!1),jr(v?2:0,d),a(c,d)}finally{ms(g),jr(v?3:1,d)}}function mp(i,o,a){if(pa(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=i.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}function yp(i,o,a){Eu()&&(function dE(i,o,a,c){const d=a.directiveStart,g=a.directiveEnd;Lo(a)&&function qv(i,o,a){const c=gr(o,i),d=$v(a),g=i[Ks],v=oh(i,Ya(i,d,null,a.onPush?32:16,c,o,g,g.createRenderer(c,a),null,null,null));i[o.index]=v}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||Wc(a,o),te(c,o);const v=a.initialInputs;for(let I=d;I<g;I++){const C=i.data[I],x=Hn(o,i,I,a);te(x,o),null!==v&&Wv(0,I-d,x,C,0,v),fi(C)&&(ir(a.index,o)[Vn]=Hn(o,i,I,a))}}(i,o,a,gr(a,o)),64==(64&a.flags)&&zv(i,o,a))}function mm(i,o,a=gr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],I=-1===v?a(o,i):i[v];i[d++]=I}}}function $v(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Hv(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Hv(i,o,a,c,d,g,v,I,C,x){const R=yn+c,F=R+d,G=function jC(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Nt);return a}(R,F),K="function"==typeof x?x():x;return G[Ze]={type:i,blueprint:G,template:a,queries:null,viewQuery:I,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:K,incompleteFirstPass:!1}}function uE(i,o,a,c){const d=gc(o);null===a?d.push(c):(d.push(a),i.firstCreatePass&&Yv(i).push(c,d.length-1))}function sh(i,o,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const g=i[d];null===c?vp(a,o,d,g):c.hasOwnProperty(d)&&vp(a,o,c[d],g)}return a}function vp(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function vm(i,o,a,c){if(Eu()){const d=null===c?null:{"":-1},g=function _m(i,o){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let g=0;g<a.length;g++){const v=a[g];if(qw(o,v.selectors,!1))if(c||(c=[]),fi(v))if(null!==v.findHostDirectiveDefs){const I=[];d=d||new Map,v.findHostDirectiveDefs(v,I,d),c.unshift(...I,v),wm(i,o,I.length)}else c.unshift(v),wm(i,o,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,c,d),c.push(v)}return null===c?null:[c,d]}(i,a);let v,I;null===g?v=I=null:[v,I]=g,null!==v&&lE(i,o,a,v,d,I),d&&function ta(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new ge(-301,!1);c.push(o[d],g)}}}(a,c,d)}a.mergedAttrs=so(a.mergedAttrs,a.attrs)}function lE(i,o,a,c,d,g){for(let x=0;x<c.length;x++)gn(Wc(a,o),i,c[x].type);!function qC(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let x=0;x<c.length;x++){const R=c[x];R.providersResolver&&R.providersResolver(R)}let v=!1,I=!1,C=ih(i,o,c.length,null);for(let x=0;x<c.length;x++){const R=c[x];a.mergedAttrs=so(a.mergedAttrs,R.hostAttrs),pE(i,a,o,C,R),fE(C,R,d),null!==R.contentQueries&&(a.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=64);const F=R.type.prototype;!v&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(a.index),v=!0),!I&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(a.index),I=!0),C++}!function Gv(i,o,a){const d=o.directiveEnd,g=i.data,v=o.attrs,I=[];let C=null,x=null;for(let R=o.directiveStart;R<d;R++){const F=g[R],G=a?a.get(F):null,we=G?G.outputs:null;C=sh(F.inputs,R,C,G?G.inputs:null),x=sh(F.outputs,R,x,we);const Be=null===C||null===v||lp(o)?null:Im(C,R,v);I.push(Be)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=C,o.outputs=x}(i,a,g)}function zv(i,o,a){const c=a.directiveStart,d=a.directiveEnd,g=a.index,v=function xg(){return xt.lFrame.currentDirectiveIndex}();try{ms(g);for(let I=c;I<d;I++){const C=i.data[I],x=o[I];Xn(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&hE(C,x)}}finally{ms(-1),Xn(v)}}function hE(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function wm(i,o,a){o.componentOffset=a,(i.components??(i.components=[])).push(o.index)}function fE(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;fi(o)&&(a[""]=i)}}function pE(i,o,a,c,d){i.data[c]=d;const g=d.factory||(d.factory=zi(d.type)),v=new ys(g,fi(d),th);i.blueprint[c]=v,a[c]=v,function GC(i,o,a,c,d){const g=d.hostBindings;if(g){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const I=~o.index;(function zC(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(v)!=I&&v.push(I),v.push(a,c,g)}}(i,o,c,ih(i,a,d.hostVars,Nt),d)}function es(i,o,a,c,d,g){const v=gr(i,o);!function Em(i,o,a,c,d,g,v){if(null==g)i.removeAttribute(o,d,a);else{const I=null==v?Oe(g):v(g,c||"",d);i.setAttribute(o,d,I,a)}}(o[Lt],v,g,i.value,a,c,d)}function Wv(i,o,a,c,d,g){const v=g[o];if(null!==v){const I=c.setInput;for(let C=0;C<v.length;){const x=v[C++],R=v[C++],F=v[C++];null!==I?c.setInput(a,F,x,R):a[R]=F}}}function Im(i,o,a){let c=null,d=0;for(;d<a.length;){const g=a[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(i.hasOwnProperty(g)){null===c&&(c=[]);const v=i[g];for(let I=0;I<v.length;I+=2)if(v[I]===o){c.push(g,v[I+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Zv(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null]}function gE(i,o){const a=ir(o,i);if(ps(a)){const c=a[Ze];48&a[Rt]?gp(c,a,c.template,a[Vn]):a[hn]>0&&bl(a)}}function bl(i){for(let c=ul(i);null!==c;c=Yo(c))for(let d=fr;d<c.length;d++){const g=c[d];if(ps(g))if(512&g[Rt]){const v=g[Ze];gp(v,g,v.template,g[Vn])}else g[hn]>0&&bl(g)}const a=i[Ze].components;if(null!==a)for(let c=0;c<a.length;c++){const d=ir(a[c],i);ps(d)&&d[hn]>0&&bl(d)}}function mE(i,o){const a=ir(o,i),c=a[Ze];(function yE(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),Bv(c,a,a[Vn])}function oh(i,o){return i[Ys]?i[cs][hi]=o:i[Ys]=o,i[cs]=o,o}function ah(i){for(;i;){i[Rt]|=32;const o=ol(i);if(pu(i)&&!o)return i;i=o}return null}function wp(i,o,a,c=!0){const d=o[Ks];d.begin&&d.begin();try{gp(i,o,i.template,a)}catch(v){throw c&&Jv(o,v),v}finally{d.end&&d.end()}}function Cm(i,o,a){bu(0),o(i,a)}function gc(i){return i[Oo]||(i[Oo]=[])}function Yv(i){return i.cleanup||(i.cleanup=[])}function Jv(i,o){const a=i[da],c=a?a.get(ap,null):null;c&&c.handleError(o)}function bm(i,o,a,c,d){for(let g=0;g<a.length;){const v=a[g++],I=a[g++],C=o[v],x=i.data[v];null!==x.setInput?x.setInput(C,d,c,I):C[I]=d}}function Ei(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?g=I:1==g?d=pe(d,I):2==g&&(c=pe(c,I+": "+o[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Ep(i,o,a,c,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&c.push(pr(g)),ei(g))for(let I=fr;I<g.length;I++){const C=g[I],x=C[Ze].firstChild;null!==x&&Ep(C[Ze],C,x,c)}const v=a.type;if(8&v)Ep(i,o,a.child,c);else if(32&v){const I=nc(a,o);let C;for(;C=I();)c.push(C)}else if(16&v){const I=Wf(o,a);if(Array.isArray(I))c.push(...I);else{const C=ol(o[$n]);Ep(C[Ze],C,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class uh{get rootNodes(){const o=this._lView,a=o[Ze];return Ep(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vn]}set context(o){this._lView[Vn]=o}get destroyed(){return 128==(128&this._lView[Rt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Dn];if(ei(o)){const a=o[xs],c=a?a.indexOf(this):-1;c>-1&&(Qo(o,c),go(a,c))}this._attachedToViewContainer=!1}Ld(this._lView[Ze],this._lView)}onDestroy(o){uE(this._lView[Ze],this._lView,null,o)}markForCheck(){ah(this._cdRefInjectingView||this._lView)}detach(){this._lView[Rt]&=-65}reattach(){this._lView[Rt]|=64}detectChanges(){wp(this._lView[Ze],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function jf(i,o){dl(i,o,o[Lt],2,null,null)}(this._lView[Ze],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=o}}class ch extends uh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;wp(o[Ze],o,o[Vn],!1)}checkNoChanges(){}get context(){return null}}class vE extends sp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=pt(o);return new Ip(a,this.ngModule)}}function Hs(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class wn{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Kn(c);const d=this.injector.get(o,Yd,c);return d!==Yd||a===Yd?d:this.parentInjector.get(o,a,c)}}class Ip extends em{get inputs(){return Hs(this.componentDef.inputs)}get outputs(){return Hs(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Ni(i){return i.map(Kw).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){let g=(d=d||this.ngModule)instanceof vl?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new wn(o,g):o,I=v.get(jw,null);if(null===I)throw new ge(407,!1);const C=v.get(Tv,null),x=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=c?function $C(i,o,a){return i.selectRootElement(o,a===ve.ShadowDom)}(x,c,this.componentDef.encapsulation):Uf(x,R,function Xv(i){const o=i.toLowerCase();return"svg"===o?Ar:"math"===o?"math":null}(R)),G=this.componentDef.onPush?288:272,K=Hv(0,null,null,1,0,null,null,null,null,null),we=Ya(null,K,null,G,null,null,I,x,C,v,null);let Be,Je;Su(we);try{const ct=this.componentDef;let St,Re=null;ct.findHostDirectiveDefs?(St=[],Re=new Map,ct.findHostDirectiveDefs(ct,St,Re),St.push(ct)):St=[ct];const Ot=function _E(i,o){const a=i[Ze],c=yn;return i[c]=o,rh(a,c,2,"#host",null)}(we,F),Fn=function t_(i,o,a,c,d,g,v,I){const C=d[Ze];!function lh(i,o,a,c){for(const d of i)o.mergedAttrs=so(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Ei(o,o.mergedAttrs,!0),null!==a&&hv(c,a,o))}(c,i,o,v);const x=g.createRenderer(o,a),R=Ya(d,$v(a),null,a.onPush?32:16,d[i.index],i,g,x,I||null,null,null);return C.firstCreatePass&&wm(C,i,c.length-1),oh(d,R),d[i.index]=R}(Ot,F,ct,St,we,I,x);Je=cd(K,yn),F&&function wE(i,o,a,c){if(c)Go(i,a,["ng-version",zr.full]);else{const{attrs:d,classes:g}=function Yw(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let g=i[c];if("string"==typeof g)2===d?""!==g&&o.push(g,i[++c]):8===d&&a.push(g);else{if(!wi(d))break;d=g}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&Go(i,a,d),g&&g.length>0&&Ga(i,a,g.join(" "))}}(x,ct,F,c),void 0!==a&&function Ja(i,o,a){const c=i.projection=[];for(let d=0;d<o.length;d++){const g=a[d];c.push(null!=g?Array.from(g):null)}}(Je,this.ngContentSelectors,a),Be=function n_(i,o,a,c,d,g){const v=sr(),I=d[Ze],C=gr(v,d);lE(I,d,v,a,null,c);for(let R=0;R<a.length;R++)te(Hn(d,I,v.directiveStart+R,v),d);zv(I,d,v),C&&te(C,d);const x=Hn(d,I,v.directiveStart+v.componentOffset,v);if(i[Vn]=d[Vn]=x,null!==g)for(const R of g)R(x,o);return mp(I,v,i),x}(Fn,ct,St,Re,we,[Gs]),Bv(K,we,null)}finally{Au()}return new e_(this.componentType,Be,_l(Je,we),we,Je)}}class e_ extends Iv{constructor(o,a,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new ch(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;bm(g[Ze],g,d,o,a),ah(ir(this._tNode.index,g))}}get injector(){return new _s(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Gs(){const i=sr();Mu(he()[Ze],i)}function dh(i){let o=function qr(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(fi(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ge(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const v=i;v.inputs=Tl(i.inputs),v.declaredInputs=Tl(i.declaredInputs),v.outputs=Tl(i.outputs);const I=d.hostBindings;I&&hh(i,I);const C=d.viewQuery,x=d.contentQueries;if(C&&Sm(i,C),x&&EE(i,x),me(i.inputs,d.inputs),me(i.declaredInputs,d.declaredInputs),me(i.outputs,d.outputs),fi(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const I=g[v];I&&I.ngInherit&&I(i),I===dh&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Tm(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=so(d.hostAttrs,a=so(a,d.hostAttrs))}}(c)}function Tl(i){return i===J?{}:i===Le?[]:i}function Sm(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function EE(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,g)=>{o(c,d,g),a(c,d,g)}:o}function hh(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}function Xa(i){return!!mc(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function mc(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function zs(i,o,a){return i[o]=a}function Se(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function tt(i,o,a,c){const d=he();return Se(d,to(),o)&&(kt(),es(Tn(),d,i,o,a,c)),tt}function Un(i,o,a,c,d,g,v,I){const C=he(),x=kt(),R=i+yn,F=x.firstCreatePass?function ME(i,o,a,c,d,g,v,I,C){const x=o.consts,R=rh(o,i,4,v||null,Ns(x,I));vm(o,a,R,Ns(x,C)),Mu(o,R);const F=R.tView=Hv(2,R,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,x,C,o,a,c,d,g,v):x.data[R];$r(F,!1);const G=C[Lt].createComment("");sc(x,C,G,F),te(G,C),oh(C,C[R]=Zv(G,C,G,F)),Fc(F)&&yp(x,C,F),null!=v&&mm(C,F,I)}function nn(i,o,a){const c=he();return Se(c,to(),o)&&function ni(i,o,a,c,d,g,v,I){const C=gr(o,a);let R,x=o.inputs;!I&&null!=x&&(R=x[c])?(bm(i,a,R,c,d),Lo(o)&&function _p(i,o){const a=ir(o,i);16&a[Rt]||(a[Rt]|=32)}(a,o.index)):3&o.type&&(c=function cE(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=v?v(d,o.value||"",c):d,g.setProperty(C,c,d))}(kt(),Tn(),c,i,o,c[Lt],a,!1),nn}function u_(i,o,a,c,d){const v=d?"class":"style";bm(i,a,o.inputs[v],v,c)}function Qe(i,o,a,c){const d=he(),g=kt(),v=yn+i,I=d[Lt],C=g.firstCreatePass?function cr(i,o,a,c,d,g){const v=o.consts,C=rh(o,i,2,c,Ns(v,d));return vm(o,a,C,Ns(v,g)),null!==C.attrs&&Ei(C,C.attrs,!1),null!==C.mergedAttrs&&Ei(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(v,g,d,o,a,c):g.data[v],x=d[v]=Uf(I,o,function vd(){return xt.lFrame.currentNamespace}()),R=Fc(C);return $r(C,!0),hv(I,x,C),32!=(32&C.flags)&&sc(g,d,x,C),0===function dd(){return xt.lFrame.elementDepthCount}()&&te(x,d),function wu(){xt.lFrame.elementDepthCount++}(),R&&(yp(g,d,C),mp(g,C,d)),null!==c&&mm(d,C),Qe}function Al(){let i=sr();pd()?function Du(){xt.lFrame.isParent=!1}():(i=i.parent,$r(i,!1));const o=i;!function hd(){xt.lFrame.elementDepthCount--}();const a=kt();return a.firstCreatePass&&(Mu(a,i),pa(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Ta(i){return 0!=(8&i.flags)}(o)&&u_(a,o,he(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function no(i){return 0!=(16&i.flags)}(o)&&u_(a,o,he(),o.stylesWithoutHost,!1),Al}function bp(i,o,a,c){return Qe(i,o,a,c),Al(),bp}function vh(){return he()}function Am(i){return!!i&&"function"==typeof i.then}function l_(i){return!!i&&"function"==typeof i.subscribe}const ns=l_;function Tp(i,o,a,c){const d=he(),g=kt(),v=sr();return function eu(i,o,a,c,d,g,v){const I=Fc(c),x=i.firstCreatePass&&Yv(i),R=o[Vn],F=gc(o);let G=!0;if(3&c.type||v){const Be=gr(c,o),Je=v?v(Be):Be,ct=F.length,St=v?Ot=>v(pr(Ot[c.index])):c.index;let Re=null;if(!v&&I&&(Re=function NE(i,o,a,c){const d=i.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===c){const I=o[Oo],C=d[g+2];return I.length>C?I[C]:null}"string"==typeof v&&(g+=2)}return null}(i,o,d,c.index)),null!==Re)(Re.__ngLastListenerFn__||Re).__ngNextListenerFn__=g,Re.__ngLastListenerFn__=g,G=!1;else{g=ee(c,o,R,g,!1);const Ot=a.listen(Je,d,g);F.push(g,Ot),x&&x.push(d,St,ct,ct+1)}}else g=ee(c,o,R,g,!1);const K=c.outputs;let we;if(G&&null!==K&&(we=K[d])){const Be=we.length;if(Be)for(let Je=0;Je<Be;Je+=2){const Fn=o[we[Je]][we[Je+1]].subscribe(g),tr=F.length;F.push(g,Fn),x&&x.push(d,c.index,tr,-(tr+1))}}}(g,d,d[Lt],v,i,o,c),Tp}function xm(i,o,a,c){try{return jr(6,o,a),!1!==a(c)}catch(d){return Jv(i,d),!1}finally{jr(7,o,a)}}function ee(i,o,a,c,d){return function g(v){if(v===Function)return c;ah(i.componentOffset>-1?ir(i.index,o):o);let C=xm(o,a,c,v),x=g.__ngNextListenerFn__;for(;x;)C=xm(o,a,x,v)&&C,x=x.__ngNextListenerFn__;return d&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Sp(i=1){return function mf(i){return(xt.lFrame.contextLView=function xu(i,o){for(;i>0;)o=o[Qs],i--;return o}(i,xt.lFrame.contextLView))[Vn]}(i)}function xp(i,o){return i<<17|o<<2}function er(i){return i>>17&32767}function qs(i){return 2|i}function _c(i){return(131068&i)>>2}function Eh(i,o){return-131069&i|o<<2}function p_(i){return 1|i}function LE(i,o,a,c,d){const g=i[a+1],v=null===o;let I=c?er(g):_c(g),C=!1;for(;0!==I&&(!1===C||v);){const R=i[I+1];ib(i[I],o)&&(C=!0,i[I+1]=c?p_(R):qs(R)),I=c?er(R):_c(R)}C&&(i[a+1]=c?qs(g):p_(g))}function ib(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Rr(i,o)>=0}function na(i,o){return function un(i,o,a,c){const d=he(),g=kt(),v=function mi(i){const o=xt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);g.firstUpdatePass&&function Pi(i,o,a,c){const d=i.data;if(null===d[a+1]){const g=d[Dr()],v=function Rl(i,o){return o>=i.expandoStartIndex}(i,a);(function iu(i,o){return 0!=(i.flags&(o?8:16))})(g,c)&&null===o&&!v&&(o=!1),o=function HE(i,o,a,c){const d=function jo(i){const o=xt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=Pn(a=ra(null,i,o,a,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||i[v]!==d)if(a=ra(d,i,o,a,c),null===g){let C=function lb(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==_c(c))return i[er(c)]}(i,o,c);void 0!==C&&Array.isArray(C)&&(C=ra(null,i,o,C[1],c),C=Pn(C,o.attrs,c),function kr(i,o,a,c){i[er(a?o.classBindings:o.styleBindings)]=c}(i,o,c,C))}else g=function db(i,o,a){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=Pn(c,i[g].hostAttrs,a);return Pn(c,o.attrs,a)}(i,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,c),function nb(i,o,a,c,d,g){let v=g?o.classBindings:o.styleBindings,I=er(v),C=_c(v);i[c]=a;let R,x=!1;if(Array.isArray(a)?(R=a[1],(null===R||Rr(a,R)>0)&&(x=!0)):R=a,d)if(0!==C){const G=er(i[I+1]);i[c+1]=xp(G,I),0!==G&&(i[G+1]=Eh(i[G+1],c)),i[I+1]=function kE(i,o){return 131071&i|o<<17}(i[I+1],c)}else i[c+1]=xp(I,0),0!==I&&(i[I+1]=Eh(i[I+1],c)),I=c;else i[c+1]=xp(C,0),0===I?I=c:i[C+1]=Eh(i[C+1],c),C=c;x&&(i[c+1]=qs(i[c+1])),LE(i,R,c,!0),LE(i,R,c,!1),function rb(i,o,a,c,d){const g=d?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof o&&Rr(g,o)>=0&&(a[c+1]=p_(a[c+1]))}(o,R,i,c,g),v=xp(I,C),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,c)}}(g,i,v,c),o!==Nt&&Se(d,v,o)&&function GE(i,o,a,c,d,g,v,I){if(!(3&o.type))return;const C=i.data,x=C[I+1],R=function FE(i){return 1==(1&i)}(x)?ru(C,o,a,d,_c(x),v):void 0;Co(R)||(Co(g)||function tb(i){return 2==(2&i)}(x)&&(g=ru(C,null,a,d,I,v)),function Ug(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let g=-1===c.indexOf("-")?void 0:tn.DashCase;null==d?i.removeStyle(a,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=tn.Important),i.setStyle(a,c,d,g))}}(c,v,fs(Dr(),a),d,g))}(g,g.data[Dr()],d,d[Lt],i,d[v+1]=function Pm(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=Ee(ti(i)))),i}(o,a),c,v)}(i,o,null,!0),na}function ra(i,o,a,c,d){let g=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(g=o[I],c=Pn(c,g.hostAttrs,d),g!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function Pn(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Hr(i,v,!!a||o[++g]))}return void 0===i?null:i}function ru(i,o,a,c,d,g){const v=null===o;let I;for(;d>0;){const C=i[d],x=Array.isArray(C),R=x?C[1]:C,F=null===R;let G=a[d+1];G===Nt&&(G=F?Le:void 0);let K=F?Mr(G,c):R===c?G:void 0;if(x&&!Co(K)&&(K=Mr(C,c)),Co(K)&&(I=K,v))return I;const we=i[d+1];d=v?er(we):_c(we)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(I=Mr(C,c))}return I}function Co(i){return void 0!==i}function bo(i,o=""){const a=he(),c=kt(),d=i+yn,g=c.firstCreatePass?rh(c,d,1,o,null):c.data[d],v=a[d]=function Lf(i,o){return i.createText(o)}(a[Lt],o);sc(c,a,v,g),$r(g,!1)}function Nl(i){return To("",i,""),Nl}function To(i,o,a){const c=he(),d=function fh(i,o,a,c){return Se(i,to(),a)?o+Oe(a)+c:Nt}(c,i,o,a);return d!==Nt&&function $s(i,o,a){const c=fs(o,i);!function kd(i,o,a){i.setValue(o,a)}(i[Lt],c,a)}(c,Dr(),d),To}const kl=void 0;var gb=["en",[["a","p"],["AM","PM"],kl],[["AM","PM"],kl,kl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kl,"{1} 'at' {0}",kl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function tI(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Fl={};function D_(i){const o=function Hm(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Ic(o);if(a)return a;const c=o.split("-")[0];if(a=Ic(c),a)return a;if("en"===c)return gb;throw new ge(701,!1)}function jm(i){return D_(i)[Et.PluralCase]}function Ic(i){return i in Fl||(Fl[i]=Jt.ng&&Jt.ng.common&&Jt.ng.common.locales&&Jt.ng.common.locales[i]),Fl[i]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const is="en-US";let Gm=is;function Xm(i,o,a,c,d){if(i=q(i),Array.isArray(i))for(let g=0;g<i.length;g++)Xm(i[g],o,a,c,d);else{const g=kt(),v=he();let I=qa(i)?i:q(i.provide),C=Xg(i);const x=sr(),R=1048575&x.providerIndexes,F=x.directiveStart,G=x.providerIndexes>>20;if(qa(i)||!i.multi){const K=new ys(C,d,th),we=H_(I,o,d?R:R+G,F);-1===we?(gn(Wc(x,v),g,I),$_(g,i,o.length),o.push(I),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),a.push(K),v.push(K)):(a[we]=K,v[we]=K)}else{const K=H_(I,o,R+G,F),we=H_(I,o,R,R+G),Je=we>=0&&a[we];if(d&&!Je||!d&&!(K>=0&&a[K])){gn(Wc(x,v),g,I);const ct=function _I(i,o,a,c,d){const g=new ys(i,a,th);return g.multi=[],g.index=o,g.componentProviders=0,vI(g,d,c&&!a),g}(d?G_:xb,a.length,d,c,C);!d&&Je&&(a[we].providerFactory=ct),$_(g,i,o.length,0),o.push(I),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),a.push(ct),v.push(ct)}else $_(g,i,K>-1?K:we,vI(a[d?we:K],C,!d&&c));!d&&c&&Je&&a[we].componentProviders++}}}function $_(i,o,a,c){const d=qa(o),g=function _v(i){return!!i.useClass}(o);if(d||g){const C=(g?q(o.useClass):o).prototype.ngOnDestroy;if(C){const x=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const R=x.indexOf(a);-1===R?x.push(a,[c,C]):x[R+1].push(c,C)}else x.push(a,C)}}}function vI(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function H_(i,o,a,c){for(let d=a;d<c;d++)if(o[d]===i)return d;return-1}function xb(i,o,a,c){return Cc(this.multi,[])}function G_(i,o,a,c){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Hn(a,a[Ze],this.providerFactory.index,c);g=I.slice(0,v),Cc(d,g);for(let C=v;C<I.length;C++)g.push(I[C])}else g=[],Cc(d,g);return g}function Cc(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function wI(i,o=[]){return a=>{a.providersResolver=(c,d)=>function yI(i,o,a){const c=kt();if(c.firstCreatePass){const d=fi(i);Xm(a,c.data,c.blueprint,d,!0),Xm(o,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,o)}}class kn{}class ey{}function EI(i,o){return new So(i,o??null)}class So extends kn{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vE(this);const c=Yn(o);this._bootstrapComponents=Wa(c.bootstrap),this._r3Injector=Xw(o,a,[{provide:kn,useValue:this},{provide:sp,useValue:this.componentFactoryResolver}],Ee(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Hp extends ey{constructor(o){super(),this.moduleType=o}create(o){return new So(this.moduleType,o)}}class II extends kn{constructor(o,a,c){super(),this.componentFactoryResolver=new vE(this),this.instance=null;const d=new Wd([...o,{provide:kn,useValue:this},{provide:sp,useValue:this.componentFactoryResolver}],a||hc(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Vl(i,o,a=null){return new II(i,o,a).injector}let DI=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Rw(0,a.type),d=c.length>0?Vl([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=at({token:i,providedIn:"environment",factory:()=>new i(an(vl))}),i})();function z_(i){i.getStandaloneInjector=o=>o.get(DI).getOrCreateStandaloneInjector(i)}function RI(i,o,a){const c=Jn()+i,d=he();return d[c]===Nt?zs(d,c,a?o.call(a):o()):function Dp(i,o){return i[o]}(d,c)}function oa(i,o,a,c,d){return function sy(i,o,a,c,d,g,v){const I=o+a;return function An(i,o,a,c){const d=Se(i,o,a);return Se(i,o+1,c)||d}(i,I,d,g)?zs(i,I+2,v?c.call(v,d,g):c(d,g)):function cu(i,o){const a=i[o];return a===Nt?void 0:a}(i,I+2)}(he(),Jn(),i,o,a,c,d)}function Y_(i){return o=>{setTimeout(i,void 0,o)}}const ss=class Vb extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,g=a||(()=>null),v=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),g=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(g=Y_(g),d&&(d=Y_(d)),v&&(v=Y_(v)));const I=super.subscribe({next:d,error:g,complete:v});return o instanceof Q.w0&&o.add(I),I}};function Gl(){return this._results[Symbol.iterator]()}class aa{get changes(){return this._changes||(this._changes=new ss)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=aa.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Gl)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=function Si(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Xc(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],g=o[c];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Fh=(()=>{class i{}return i.__NG_ELEMENT_ID__=Bb,i})();const Ub=Fh,LI=class extends Ub{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tView,d=Ya(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[Po]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[Gi];return null!==v&&(d[Gi]=v.createEmbeddedView(c)),Bv(c,d,o),new uh(d)}};function Bb(){return Lh(sr(),he())}function Lh(i,o){return 4&i.type?new LI(o,i,_l(i,o)):null}let Vh=(()=>{class i{}return i.__NG_ELEMENT_ID__=VI,i})();function VI(){return UI(sr(),he())}const Q_=Vh,uy=class extends Q_{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return _l(this._hostTNode,this._hostLView)}get injector(){return new _s(this._hostTNode,this._hostLView)}get parentInjector(){const o=Id(this._hostTNode,this._hostLView);if(oo(o)){const a=ao(o,this._hostLView),c=Ps(o);return new _s(a[Ze].data[c+8],a)}return new _s(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=J_(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-fr}createEmbeddedView(o,a,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const v=o.createEmbeddedView(a||{},g);return this.insert(v,d),v}createComponent(o,a,c,d,g){const v=o&&!function Bu(i){return"function"==typeof i}(o);let I;if(v)I=a;else{const F=a||{};I=F.index,c=F.injector,d=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const C=v?o:new Ip(pt(o)),x=c||this.parentInjector;if(!g&&null==C.ngModule){const G=(v?x:this.parentInjector).get(vl,null);G&&(g=G)}const R=C.create(x,d,void 0,g);return this.insert(R.hostView,I),R}insert(o,a){const c=o._lView,d=c[Ze];if(function Bc(i){return ei(i[Dn])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=c[Dn],G=new uy(F,F[Qn],F[Dn]);G.detach(G.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function Ua(i,o,a,c){const d=fr+c,g=a.length;c>0&&(a[d-1][hi]=o),c<g-fr?(o[hi]=a[d],Tf(a,fr+c,o)):(a.push(o),o[hi]=null),o[Dn]=a;const v=o[Po];null!==v&&a!==v&&function lv(i,o){const a=i[Js];o[$n]!==o[Dn][Dn][$n]&&(i[kc]=!0),null===a?i[Js]=[o]:a.push(o)}(v,o);const I=o[Gi];null!==I&&I.insertView(i),o[Rt]|=64}(d,c,v,g);const I=Ha(g,v),C=c[Lt],x=Vd(C,v[Fo]);return null!==x&&function Fd(i,o,a,c,d,g){c[di]=d,c[Qn]=o,dl(i,c,a,1,d,g)}(d,v[Qn],C,c,x,I),o.attachToViewContainerRef(),Tf(Uh(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=J_(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Qo(this._lContainer,a);c&&(go(Uh(this._lContainer),a),Ld(c[Ze],c))}detach(o){const a=this._adjustIndex(o,-1),c=Qo(this._lContainer,a);return c&&null!=go(Uh(this._lContainer),a)?new uh(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function J_(i){return i[xs]}function Uh(i){return i[xs]||(i[xs]=[])}function UI(i,o){let a;const c=o[i.index];if(ei(c))a=c;else{let d;if(8&i.type)d=pr(c);else{const g=o[Lt];d=g.createComment("");const v=gr(i,o);Ba(g,Vd(g,v),d,function dv(i,o){return i.nextSibling(o)}(g,v),!1)}o[i.index]=a=Zv(c,o,d,i),oh(o,a)}return new uy(a,i,o)}class qp{constructor(o){this.queryList=o,this.matches=null}clone(){return new qp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Bh{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<c;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new Bh(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==ql(o,a).matches&&this.queries[a].setDirty()}}class BI{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class cy{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==a?a.push(g):a=[g])}return null!==a?new cy(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class zl{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new zl(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,a,ly(a,g)),this.matchTNodeWithReadOption(o,a,co(a,o,g,!1,!1))}else c===Fh?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,co(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===wl||d===Vh||d===Fh&&4&a.type)this.addMatch(a.index,-2);else{const g=co(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function ly(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function jI(i,o,a,c){return-1===a?function Wp(i,o){return 11&i.type?_l(i,o):4&i.type?Lh(i,o):null}(o,i):-2===a?function $I(i,o,a){return a===wl?_l(o,i):a===Fh?Lh(o,i):a===Vh?UI(o,i):void 0}(i,o,c):Hn(i,i[Ze],a,o)}function oi(i,o,a,c){const d=o[Gi].queries[c];if(null===d.matches){const g=i.data,v=a.matches,I=[];for(let C=0;C<v.length;C+=2){const x=v[C];I.push(x<0?null:jI(o,g[x],v[C+1],a.metadata.read))}d.matches=I}return d.matches}function dy(i,o,a,c){const d=i.queries.getByIndex(a),g=d.matches;if(null!==g){const v=oi(i,o,d,a);for(let I=0;I<g.length;I+=2){const C=g[I];if(C>0)c.push(v[I/2]);else{const x=g[I+1],R=o[-C];for(let F=fr;F<R.length;F++){const G=R[F];G[Po]===G[Dn]&&dy(G[Ze],G,x,c)}if(null!==R[Js]){const F=R[Js];for(let G=0;G<F.length;G++){const K=F[G];dy(K[Ze],K,x,c)}}}}}return c}function Zp(i){const o=he(),a=kt(),c=jc();bu(c+1);const d=ql(a,c);if(i.dirty&&function _u(i){return 4==(4&i[Rt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const g=d.crossesNgTemplate?dy(a,o,c,[]):oi(a,o,d,c);i.reset(g,Bw),i.notifyOnChanges()}return!0}return!1}function X_(i,o,a,c){const d=kt();if(d.firstCreatePass){const g=sr();(function bc(i,o,a){null===i.queries&&(i.queries=new cy),i.queries.track(new zl(o,a))})(d,new BI(o,a,c),g.index),function jb(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function e0(i,o,a){const c=new aa(4==(4&a));uE(i,o,c,c.destroy),null===o[Gi]&&(o[Gi]=new Bh),o[Gi].queries.push(new qp(c))}(d,he(),a)}function lu(){return function jh(i,o){return i[Gi].queries[o].queryList}(he(),jc())}function ql(i,o){return i.queries.getByIndex(o)}function $h(i){return!!Yn(i)}function Jp(...i){}const wy=new qt("Application Initializer");let Kl=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Jp,this.reject=Jp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(Am(g))a.push(g);else if(ns(g)){const v=new Promise((I,C)=>{g.subscribe({complete:I,error:C})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(an(wy,8))},i.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Wh=new qt("AppId",{providedIn:"root",factory:function Xp(){return`${eg()}${eg()}${eg()}`}});function eg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ey=new qt("Platform Initializer"),rD=new qt("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let Iy=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Dy=new qt("LocaleId",{providedIn:"root",factory:()=>Ln(Dy,ft.Optional|ft.SkipSelf)||function m0(){return typeof $localize<"u"&&$localize.locale||is}()}),tT=new qt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Cy{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let tg=(()=>{class i{compileModuleSync(a){return new Hp(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=Wa(Yn(a).declarations).reduce((v,I)=>{const C=pt(I);return C&&v.push(new Ip(C)),v},[]);return new Cy(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const sT=(()=>Promise.resolve(0))();function v0(i){typeof Zone>"u"?sT.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ai{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ss(!1),this.onMicrotaskEmpty=new ss(!1),this.onStable=new ss(!1),this.onError=new ss(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function ng(){let i=Jt.requestAnimationFrame,o=Jt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function w0(i){const o=()=>{!function rg(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Jt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,by(i),i.isCheckStableRunning=!0,Zh(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),by(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,g,v,I)=>{try{return Ty(i),a.invokeTask(d,g,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&o(),Sy(i)}},onInvoke:(a,c,d,g,v,I,C)=>{try{return Ty(i),a.invoke(d,g,v,I,C)}finally{i.shouldCoalesceRunChangeDetection&&o(),Sy(i)}},onHasTask:(a,c,d,g)=>{a.hasTask(d,g),c===d&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,by(i),Zh(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,c,d,g)=>(a.handleError(d,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ai.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(ai.isInAngularZone())throw new ge(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,_0,Jp,Jp);try{return g.runTask(v,a,c)}finally{g.cancelTask(v)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const _0={};function Zh(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function by(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Ty(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Sy(i){i._nesting--,Zh(i)}class Tc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ss,this.onMicrotaskEmpty=new ss,this.onStable=new ss,this.onError=new ss}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const E0=new qt(""),aD=new qt("");let C0,I0=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,C0||(function D0(i){C0=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ai.assertNotInAngularZone(),v0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())v0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(an(ai),an(uD),an(aD))},i.\u0275prov=at({token:i,factory:i.\u0275fac}),i})(),uD=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return C0?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Ao=!1;let xo=null;const Ay=new qt("AllowMultipleToken"),xy=new qt("PlatformDestroyListeners"),Yl=new qt("appBootstrapListener");class cD{constructor(o,a){this.name=o,this.token=a}}function Ry(i,o,a=[]){const c=`Platform: ${o}`,d=new qt(c);return(g=[])=>{let v=ig();if(!v||v.injector.get(Ay,!1)){const I=[...a,...g,{provide:d,useValue:!0}];i?i(I):function lD(i){if(xo&&!xo.get(Ay,!1))throw new ge(400,!1);xo=i;const o=i.get(T0);(function My(i){const o=i.get(Ey,null);o&&o.forEach(a=>a())})(i)}(function Ny(i=[],o){return Za.create({name:o,providers:[{provide:ip,useValue:"platform"},{provide:xy,useValue:new Set([()=>xo=null])},...i]})}(I,c))}return function uT(i){const o=ig();if(!o)throw new ge(401,!1);return o}()}}function ig(){return xo?.get(T0)??null}let T0=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function Py(i,o){let a;return a="noop"===i?new Tc:("zone.js"===i?void 0:i)||new ai(o),a}(c?.ngZone,function Oy(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:ai,useValue:d}];return d.run(()=>{const v=Za.create({providers:g,parent:this.injector,name:a.moduleType.name}),I=a.create(v),C=I.injector.get(ap,null);if(!C)throw new ge(402,!1);return d.runOutsideAngular(()=>{const x=d.onError.subscribe({next:R=>{C.handleError(R)}});I.onDestroy(()=>{Kh(this._modules,I),x.unsubscribe()})}),function ky(i,o,a){try{const c=a();return Am(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(C,d,()=>{const x=I.injector.get(Kl);return x.runInitializers(),x.donePromise.then(()=>(function Dc(i){fe(i,"Expected localeId to be defined"),"string"==typeof i&&(Gm=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Dy,is)||is),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const d=Ql({},c);return function b0(i,o,a){const c=new Hp(a);return Promise.resolve(c)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const c=a.injector.get(Mo);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ge(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(xy,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(an(Za))},i.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Ql(i,o){return Array.isArray(o)?o.reduce(Ql,i):{...i,...o}}let Mo=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new P.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new P.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{ai.assertNotInAngularZone(),v0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{ai.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ie.T)(g,v.pipe((0,se.B)()))}bootstrap(a,c){const d=a instanceof em;if(!this._injector.get(Kl).done){!d&&hr(a);throw new ge(405,Ao)}let v;v=d?a:this._injector.get(sp).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function oT(i){return i.isBoundToModule}(v)?void 0:this._injector.get(kn),x=v.create(Za.NULL,[],c||v.selector,I),R=x.location.nativeElement,F=x.injector.get(E0,null);return F?.registerApplication(R),x.onDestroy(()=>{this.detachView(x.hostView),Kh(this.components,x),F?.unregisterApplication(R)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Kh(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Yl,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Kh(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ge(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(an(ai),an(vl),an(ap))},i.\u0275prov=at({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Kh(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function dD(){return!1}let S0=(()=>{class i{}return i.__NG_ELEMENT_ID__=A0,i})();function A0(i){return function x0(i,o,a){if(Lo(i)&&!a){const c=ir(i.index,o);return new uh(c,c)}return 47&i.type?new uh(o[$n],o):null}(sr(),he(),16==(16&i))}class O0{constructor(){}supports(o){return Xa(o)}create(o){return new wD(o)}}const P0=(i,o)=>o;class wD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||P0}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,g=null;for(;a||c;){const v=!c||a&&a.currentIndex<Vy(c,d,g)?a:c,I=Vy(v,d,g),C=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const x=I-d,R=C-d;if(x!=R){for(let G=0;G<x;G++){const K=G<g.length?g[G]:g[G]=0,we=K+G;R<=we&&we<x&&(g[G]=K+1)}g[v.previousIndex]=R-x}}I!==C&&o(v,I,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Xa(o))throw new ge(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],v=this._trackByFn(I,g),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,g,v,I)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,I),c=!0),a=a._next}else d=0,function Wr(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new lT(a,c),g,d),o}_verifyReinsertion(o,a,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new ED),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ED),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class lT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class k0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class ED{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new k0,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Vy(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class ID{constructor(){}supports(o){return o instanceof Map||mc(o)}create(){return new F0}}class F0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||mc(o)))throw new ge(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const c=new dT(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class dT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Uy(){return new ug([new O0])}let ug=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Uy()),deps:[[i,new zu,new Pa]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new ge(901,!1)}}return i.\u0275prov=at({token:i,providedIn:"root",factory:Uy}),i})();function Xl(){return new By([new ID])}let By=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Xl()),deps:[[i,new zu,new Pa]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new ge(901,!1)}}return i.\u0275prov=at({token:i,providedIn:"root",factory:Xl}),i})();const V0=Ry(null,"core",[]);let fT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(an(Mo))},i.\u0275mod=X({type:i}),i.\u0275inj=ht({}),i})();function U0(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(gt,xe,k)=>{k.d(xe,{Z:()=>We});var h=k(2090),Q=k(4859),P=k(6881),ie=k(1877);class se{constructor(ge,Ne){this._delegate=ge,this.firebase=Ne,(0,P._addComponent)(ge,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(ge,Ne=P._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const je=this._delegate.container.getProvider(ge);return!je.isInitialized()&&"EXPLICIT"===(null===(Oe=je.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&je.initialize(),je.getImmediate({identifier:Ne})}_removeServiceInstance(ge,Ne=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Ne)}_addComponent(ge){(0,P._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,P._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function pe(){const ot=function Ee(ot){const ge={},Ne={__esModule:!0,initializeApp:function Pe(Fe,nt={}){const ne=P.initializeApp(Fe,nt);if((0,h.r3)(ge,ne.name))return ge[ne.name];const Dt=new ot(ne,Ne);return ge[ne.name]=Dt,Dt},app:je,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function De(Fe){const nt=Fe.name,ne=nt.replace("-compat","");if(P._registerComponent(Fe)&&"PUBLIC"===Fe.type){const Dt=(Xe=je())=>{if("function"!=typeof Xe[ne])throw me.create("invalid-app-argument",{appName:nt});return Xe[ne]()};void 0!==Fe.serviceProps&&(0,h.ZB)(Dt,Fe.serviceProps),Ne[ne]=Dt,ot.prototype[ne]=function(...Xe){return this._getService.bind(this,nt).apply(this,Fe.multipleInstances?Xe:[])}}return"PUBLIC"===Fe.type?Ne[ne]:null},removeApp:function Oe(Fe){delete ge[Fe]},useAsService:function qe(Fe,nt){return"serverAuth"===nt?null:nt},modularAPIs:P}};function je(Fe){if(!(0,h.r3)(ge,Fe=Fe||P._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Fe});return ge[Fe]}return Ne.default=Ne,Object.defineProperty(Ne,"apps",{get:function Ie(){return Object.keys(ge).map(Fe=>ge[Fe])}}),je.App=ot,Ne}(se);return ot.INTERNAL=Object.assign(Object.assign({},ot.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ge(Ne){(0,h.ZB)(ot,Ne)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),ot}(),B=new ie.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=$;!function Ae(ot){(0,P.registerVersion)("@firebase/app-compat","0.2.13",ot)}()},6881:(gt,xe,k)=>{k.r(xe),k.d(xe,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>As,_DEFAULT_ENTRY_NAME:()=>Vr,_addComponent:()=>rt,_addOrOverwriteComponent:()=>At,_apps:()=>Jt,_clearComponents:()=>Ur,_components:()=>on,_getProvider:()=>Yr,_registerComponent:()=>ci,_removeServiceInstance:()=>dr,deleteApp:()=>li,getApp:()=>$i,getApps:()=>an,initializeApp:()=>zt,onLog:()=>Ii,registerVersion:()=>Kn,setLogLevel:()=>In});var h=k(5861),Q=k(4859),P=k(1877),ie=k(2090);const se=(de,X)=>X.some(ke=>de instanceof ke);let oe,me;const $=new WeakMap,B=new WeakMap,q=new WeakMap,Ge=new WeakMap,Ae=new WeakMap;let ge={get(de,X,ke){if(de instanceof IDBTransaction){if("done"===X)return B.get(de);if("objectStoreNames"===X)return de.objectStoreNames||q.get(de);if("store"===X)return ke.objectStoreNames[1]?void 0:ke.objectStore(ke.objectStoreNames[0])}return Pe(de[X])},set:(de,X,ke)=>(de[X]=ke,!0),has:(de,X)=>de instanceof IDBTransaction&&("done"===X||"store"===X)||X in de};function je(de){return"function"==typeof de?function Oe(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...X){return de.apply(Ie(this),X),Pe($.get(this))}:function(...X){return Pe(de.apply(Ie(this),X))}:function(X,...ke){const dt=de.call(Ie(this),X,...ke);return q.set(dt,X.sort?X.sort():[X]),Pe(dt)}}(de):(de instanceof IDBTransaction&&function ot(de){if(B.has(de))return;const X=new Promise((ke,dt)=>{const wt=()=>{de.removeEventListener("complete",Vt),de.removeEventListener("error",pt),de.removeEventListener("abort",pt)},Vt=()=>{ke(),wt()},pt=()=>{dt(de.error||new DOMException("AbortError","AbortError")),wt()};de.addEventListener("complete",Vt),de.addEventListener("error",pt),de.addEventListener("abort",pt)});B.set(de,X)}(de),se(de,function Ee(){return oe||(oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,ge):de)}function Pe(de){if(de instanceof IDBRequest)return function We(de){const X=new Promise((ke,dt)=>{const wt=()=>{de.removeEventListener("success",Vt),de.removeEventListener("error",pt)},Vt=()=>{ke(Pe(de.result)),wt()},pt=()=>{dt(de.error),wt()};de.addEventListener("success",Vt),de.addEventListener("error",pt)});return X.then(ke=>{ke instanceof IDBCursor&&$.set(ke,de)}).catch(()=>{}),Ae.set(X,de),X}(de);if(Ge.has(de))return Ge.get(de);const X=je(de);return X!==de&&(Ge.set(de,X),Ae.set(X,de)),X}const Ie=de=>Ae.get(de),Fe=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],ne=new Map;function Dt(de,X){if(!(de instanceof IDBDatabase)||X in de||"string"!=typeof X)return;if(ne.get(X))return ne.get(X);const ke=X.replace(/FromIndex$/,""),dt=X!==ke,wt=nt.includes(ke);if(!(ke in(dt?IDBIndex:IDBObjectStore).prototype)||!wt&&!Fe.includes(ke))return;const Vt=function(){var pt=(0,h.Z)(function*(Xt,...Kt){const hr=this.transaction(Xt,wt?"readwrite":"readonly");let Yn=hr.store;return dt&&(Yn=Yn.index(Kt.shift())),(yield Promise.all([Yn[ke](...Kt),wt&&hr.done]))[0]});return function(Kt){return pt.apply(this,arguments)}}();return ne.set(X,Vt),Vt}!function Ne(de){ge=de(ge)}(de=>({...de,get:(X,ke,dt)=>Dt(X,ke)||de.get(X,ke,dt),has:(X,ke)=>!!Dt(X,ke)||de.has(X,ke)}));class Xe{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(ke=>{if(function Ut(de){return"VERSION"===de.getComponent()?.type}(ke)){const dt=ke.getImmediate();return`${dt.library}/${dt.version}`}return null}).filter(ke=>ke).join(" ")}}const it="@firebase/app",Zr=new P.Yd("@firebase/app"),Vr="[DEFAULT]",ji={[it]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Jt=new Map,on=new Map;function rt(de,X){try{de.container.addComponent(X)}catch(ke){Zr.debug(`Component ${X.name} failed to register with FirebaseApp ${de.name}`,ke)}}function At(de,X){de.container.addOrOverwriteComponent(X)}function ci(de){const X=de.name;if(on.has(X))return Zr.debug(`There were multiple attempts to register component ${X}.`),!1;on.set(X,de);for(const ke of Jt.values())rt(ke,de);return!0}function Yr(de,X){const ke=de.container.getProvider("heartbeat").getImmediate({optional:!0});return ke&&ke.triggerHeartbeat(),de.container.getProvider(X)}function dr(de,X,ke=Vr){Yr(de,X).clearInstance(ke)}function Ur(){on.clear()}const Qr=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class pn{constructor(X,ke,dt){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},ke),this._name=ke.name,this._automaticDataCollectionEnabled=ke.automaticDataCollectionEnabled,this._container=dt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}const As="9.23.0";function zt(de,X={}){let ke=de;"object"!=typeof X&&(X={name:X});const dt=Object.assign({name:Vr,automaticDataCollectionEnabled:!1},X),wt=dt.name;if("string"!=typeof wt||!wt)throw Qr.create("bad-app-name",{appName:String(wt)});if(ke||(ke=(0,ie.aH)()),!ke)throw Qr.create("no-options");const Vt=Jt.get(wt);if(Vt){if((0,ie.vZ)(ke,Vt.options)&&(0,ie.vZ)(dt,Vt.config))return Vt;throw Qr.create("duplicate-app",{appName:wt})}const pt=new Q.H0(wt);for(const Kt of on.values())pt.addComponent(Kt);const Xt=new pn(ke,dt,pt);return Jt.set(wt,Xt),Xt}function $i(de=Vr){const X=Jt.get(de);if(!X&&de===Vr&&(0,ie.aH)())return zt();if(!X)throw Qr.create("no-app",{appName:de});return X}function an(){return Array.from(Jt.values())}function li(de){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(de){const X=de.name;Jt.has(X)&&(Jt.delete(X),yield Promise.all(de.container.getProviders().map(ke=>ke.delete())),de.isDeleted=!0)})).apply(this,arguments)}function Kn(de,X,ke){var dt;let wt=null!==(dt=ji[de])&&void 0!==dt?dt:de;ke&&(wt+=`-${ke}`);const Vt=wt.match(/\s|\//),pt=X.match(/\s|\//);if(Vt||pt){const Xt=[`Unable to register library "${wt}" with version "${X}":`];return Vt&&Xt.push(`library name "${wt}" contains illegal characters (whitespace or "/")`),Vt&&pt&&Xt.push("and"),pt&&Xt.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void Zr.warn(Xt.join(" "))}ci(new Q.wA(`${wt}-version`,()=>({library:wt,version:X}),"VERSION"))}function Ii(de,X){if(null!==de&&"function"!=typeof de)throw Qr.create("invalid-log-argument");(0,P.Am)(de,X)}function In(de){(0,P.Ub)(de)}const Di="firebase-heartbeat-database",Br=1,V="firebase-heartbeat-store";let L=null;function z(){return L||(L=function De(de,X,{blocked:ke,upgrade:dt,blocking:wt,terminated:Vt}={}){const pt=indexedDB.open(de,X),Xt=Pe(pt);return dt&&pt.addEventListener("upgradeneeded",Kt=>{dt(Pe(pt.result),Kt.oldVersion,Kt.newVersion,Pe(pt.transaction),Kt)}),ke&&pt.addEventListener("blocked",Kt=>ke(Kt.oldVersion,Kt.newVersion,Kt)),Xt.then(Kt=>{Vt&&Kt.addEventListener("close",()=>Vt()),wt&&Kt.addEventListener("versionchange",hr=>wt(hr.oldVersion,hr.newVersion,hr))}).catch(()=>{}),Xt}(Di,Br,{upgrade:(de,X)=>{0===X&&de.createObjectStore(V)}}).catch(de=>{throw Qr.create("idb-open",{originalErrorMessage:de.message})})),L}function J(){return(J=(0,h.Z)(function*(de){try{return yield(yield z()).transaction(V).objectStore(V).get(Zt(de))}catch(X){if(X instanceof ie.ZR)Zr.warn(X.message);else{const ke=Qr.create("idb-get",{originalErrorMessage:X?.message});Zr.warn(ke.message)}}})).apply(this,arguments)}function Le(de,X){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,h.Z)(function*(de,X){try{const dt=(yield z()).transaction(V,"readwrite");yield dt.objectStore(V).put(X,Zt(de)),yield dt.done}catch(ke){if(ke instanceof ie.ZR)Zr.warn(ke.message);else{const dt=Qr.create("idb-set",{originalErrorMessage:ke?.message});Zr.warn(dt.message)}}})).apply(this,arguments)}function Zt(de){return`${de.name}!${de.options.appId}`}class ln{constructor(X){this.container=X,this._heartbeatsCache=null;const ke=this.container.getProvider("app").getImmediate();this._storage=new Ci(ke),this._heartbeatsCachePromise=this._storage.read().then(dt=>(this._heartbeatsCache=dt,dt))}triggerHeartbeat(){var X=this;return(0,h.Z)(function*(){const dt=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),wt=jt();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==wt&&!X._heartbeatsCache.heartbeats.some(Vt=>Vt.date===wt))return X._heartbeatsCache.heartbeats.push({date:wt,agent:dt}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(Vt=>{const pt=new Date(Vt.date).valueOf();return Date.now()-pt<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,h.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const ke=jt(),{heartbeatsToSend:dt,unsentEntries:wt}=function Sr(de,X=1024){const ke=[];let dt=de.slice();for(const wt of de){const Vt=ke.find(pt=>pt.agent===wt.agent);if(Vt){if(Vt.dates.push(wt.date),Hi(ke)>X){Vt.dates.pop();break}}else if(ke.push({agent:wt.agent,dates:[wt.date]}),Hi(ke)>X){ke.pop();break}dt=dt.slice(1)}return{heartbeatsToSend:ke,unsentEntries:dt}}(X._heartbeatsCache.heartbeats),Vt=(0,ie.L)(JSON.stringify({version:2,heartbeats:dt}));return X._heartbeatsCache.lastSentHeartbeatDate=ke,wt.length>0?(X._heartbeatsCache.heartbeats=wt,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Vt})()}}function jt(){return(new Date).toISOString().substring(0,10)}class Ci{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,h.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function ve(de){return J.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var ke=this;return(0,h.Z)(function*(){var dt;if(yield ke._canUseIndexedDBPromise){const Vt=yield ke.read();return Le(ke.app,{lastSentHeartbeatDate:null!==(dt=X.lastSentHeartbeatDate)&&void 0!==dt?dt:Vt.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var ke=this;return(0,h.Z)(function*(){var dt;if(yield ke._canUseIndexedDBPromise){const Vt=yield ke.read();return Le(ke.app,{lastSentHeartbeatDate:null!==(dt=X.lastSentHeartbeatDate)&&void 0!==dt?dt:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...X.heartbeats]})}})()}}function Hi(de){return(0,ie.L)(JSON.stringify({version:2,heartbeats:de})).length}!function la(de){ci(new Q.wA("platform-logger",X=>new Xe(X),"PRIVATE")),ci(new Q.wA("heartbeat",X=>new ln(X),"PRIVATE")),Kn(it,"0.9.13",de),Kn(it,"0.9.13","esm2017"),Kn("fire-js","")}("")},4859:(gt,xe,k)=>{k.d(xe,{H0:()=>Ee,wA:()=>P});var h=k(5861),Q=k(2090);class P{constructor($,B,q){this.name=$,this.instanceFactory=B,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ie="[DEFAULT]";class se{constructor($,B){this.name=$,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const B=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(B)){const q=new Q.BH;if(this.instancesDeferred.set(B,q),this.isInitialized(B)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:B});Ge&&q.resolve(Ge)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate($){var B;const q=this.normalizeInstanceIdentifier($?.identifier),Ge=null!==(B=$?.optional)&&void 0!==B&&B;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(Ae){if(Ge)return null;throw Ae}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function me(pe){return"EAGER"===pe.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[B,q]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(B);try{const Ae=this.getOrInitializeService({instanceIdentifier:Ge});q.resolve(Ae)}catch{}}}}clearInstance($=ie){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,h.Z)(function*(){const B=Array.from($.instances.values());yield Promise.all([...B.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...B.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ie){return this.instances.has($)}getOptions($=ie){return this.instancesOptions.get($)||{}}initialize($={}){const{options:B={}}=$,q=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:q,options:B});for(const[Ae,We]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(Ae)&&We.resolve(Ge);return Ge}onInit($,B){var q;const Ge=this.normalizeInstanceIdentifier(B),Ae=null!==(q=this.onInitCallbacks.get(Ge))&&void 0!==q?q:new Set;Ae.add($),this.onInitCallbacks.set(Ge,Ae);const We=this.instances.get(Ge);return We&&$(We,Ge),()=>{Ae.delete($)}}invokeOnInitCallbacks($,B){const q=this.onInitCallbacks.get(B);if(q)for(const Ge of q)try{Ge($,B)}catch{}}getOrInitializeService({instanceIdentifier:$,options:B={}}){let q=this.instances.get($);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=$,pe===ie?void 0:pe),options:B}),this.instances.set($,q),this.instancesOptions.set($,B),this.invokeOnInitCallbacks(q,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,q)}catch{}var pe;return q||null}normalizeInstanceIdentifier($=ie){return this.component?this.component.multipleInstances?$:ie:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ee{constructor($){this.name=$,this.providers=new Map}addComponent($){const B=this.getProvider($.name);if(B.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);B.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const B=new se($,this);return this.providers.set($,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(gt,xe,k)=>{k.d(xe,{Am:()=>pe,Ub:()=>Ee,Yd:()=>me,in:()=>Q});const h=[];var Q=(()=>{return($=Q||(Q={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Q;var $})();const P={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},ie=Q.INFO,se={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},oe=($,B,...q)=>{if(B<$.logLevel)return;const Ge=(new Date).toISOString(),Ae=se[B];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Ae](`[${Ge}]  ${$.name}:`,...q)};class me{constructor(B){this.name=B,this._logLevel=ie,this._logHandler=oe,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in Q))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?P[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...B),this._logHandler(this,Q.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...B),this._logHandler(this,Q.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...B),this._logHandler(this,Q.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...B),this._logHandler(this,Q.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...B),this._logHandler(this,Q.ERROR,...B)}}function Ee($){h.forEach(B=>{B.setLogLevel($)})}function pe($,B){for(const q of h){let Ge=null;B&&B.level&&(Ge=P[B.level]),q.userLogHandler=null===$?null:(Ae,We,...ot)=>{const ge=ot.map(Ne=>{if(null==Ne)return null;if("string"==typeof Ne)return Ne;if("number"==typeof Ne||"boolean"==typeof Ne)return Ne.toString();if(Ne instanceof Error)return Ne.message;try{return JSON.stringify(Ne)}catch{return null}}).filter(Ne=>Ne).join(" ");We>=(Ge??Ae.logLevel)&&$({level:Q[We].toLowerCase(),message:ge,args:ot,type:Ae.name})}}}},259:(gt,xe,k)=>{k.d(xe,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=k(6881);(0,h.registerVersion)("firebase","9.23.0","app")},9260:(gt,xe,k)=>{k.d(xe,{Z:()=>h.Z});var h=k(3942);h.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(gt,xe,k)=>{k.r(xe);var h=k(5861),Q=k(3942),P=k(2090),ie=k(6881),se=k(7582),oe=k(1877),me=k(4859);const pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q_EMAIL_SIGNIN="EMAIL_SIGNIN",q_PASSWORD_RESET="PASSWORD_RESET",q_RECOVER_EMAIL="RECOVER_EMAIL",q_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",q_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",q_VERIFY_EMAIL="VERIFY_EMAIL";const We=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},ot=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new oe.Yd("@firebase/auth");function Pe(y,...f){Oe.logLevel<=oe.in.ERROR&&Oe.error(`Auth (${ie.SDK_VERSION}): ${y}`,...f)}function Ie(y,...f){throw nt(y,...f)}function De(y,...f){return nt(y,...f)}function qe(y,f,p){const _=Object.assign(Object.assign({},ot()),{[f]:p});return new P.LL("auth","Firebase",_).create(f,{appName:y.name})}function Fe(y,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&Ie(y,"argument-error"),qe(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nt(y,...f){if("string"!=typeof y){const p=f[0],_=[...f.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return ge.create(y,...f)}function ne(y,f,...p){if(!y)throw nt(f,...p)}function Dt(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Pe(f),new Error(f)}function Xe(y,f){y||Dt(f)}function Ut(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function it(){return"http:"===Ss()||"https:"===Ss()}function Ss(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Bi{constructor(f,p){this.shortDelay=f,this.longDelay=p,Xe(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Zr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(it()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ue(y,f){Xe(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class le{static initialize(f,p,_){this.fetchImpl=f,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Dt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Dt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Dt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},re=new Bi(3e4,6e4);function Ce(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function be(y,f,p,_){return lt.apply(this,arguments)}function lt(){return(lt=(0,h.Z)(function*(y,f,p,_,T={}){return at(y,T,(0,h.Z)(function*(){let M={},U={};_&&("GET"===f?U=_:M={body:JSON.stringify(_)});const Z=(0,P.xO)(Object.assign({key:y.config.apiKey},U)).slice(1),Me=yield y._getAdditionalHeaders();return Me["Content-Type"]="application/json",y.languageCode&&(Me["X-Firebase-Locale"]=y.languageCode),le.fetch()(Cn(y,y.config.apiHost,p,Z),Object.assign({method:f,headers:Me,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function at(y,f,p){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*(y,f,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},fe),f);try{const T=new ui(y),M=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const U=yield M.json();if("needConfirmation"in U)throw Wt(y,"account-exists-with-different-credential",U);if(M.ok&&!("errorMessage"in U))return U;{const Z=M.ok?U.errorMessage:U.error.message,[Me,ze]=Z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw Wt(y,"credential-already-in-use",U);if("EMAIL_EXISTS"===Me)throw Wt(y,"email-already-in-use",U);if("USER_DISABLED"===Me)throw Wt(y,"user-disabled",U);const Ke=_[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if(ze)throw qe(y,Ke,ze);Ie(y,Ke)}}catch(T){if(T instanceof P.ZR)throw T;Ie(y,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function ht(y,f,p,_){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,h.Z)(function*(y,f,p,_,T={}){const M=yield be(y,f,p,_,T);return"mfaPendingCredential"in M&&Ie(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Cn(y,f,p,_){const T=`${f}${p}?${_}`;return y.config.emulator?ue(y.config,T):`${y.config.apiScheme}://${T}`}class ui{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(De(this.auth,"network-request-failed")),re.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wt(y,f,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const T=De(y,f,_);return T.customData._tokenResponse=p,T}function En(){return(En=(0,h.Z)(function*(y,f){return be(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function br(){return(br=(0,h.Z)(function*(y,f){return be(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(y,f){return be(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Kr(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Vr(){return(Vr=(0,h.Z)(function*(y,f=!1){const p=(0,P.m9)(y),_=yield p.getIdToken(f),T=Jt(_);ne(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const M="object"==typeof T.firebase?T.firebase:void 0,U=M?.sign_in_provider;return{claims:T,token:_,authTime:Kr(ji(T.auth_time)),issuedAtTime:Kr(ji(T.iat)),expirationTime:Kr(ji(T.exp)),signInProvider:U||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function ji(y){return 1e3*Number(y)}function Jt(y){const[f,p,_]=y.split(".");if(void 0===f||void 0===p||void 0===_)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(p);return T?JSON.parse(T):(Pe("Failed to decode base64 JWT payload"),null)}catch(T){return Pe("Caught error parsing JWT payload as JSON",T?.toString()),null}}function rt(y,f){return At.apply(this,arguments)}function At(){return(At=(0,h.Z)(function*(y,f,p=!1){if(p)return f;try{return yield f}catch(_){throw _ instanceof P.ZR&&function ci({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}class Yr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield p.iteration()}),_)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&f.schedule(!0))}f.schedule()})()}}class dr{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kr(this.lastLoginAt),this.creationTime=Kr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ur(y){return Mn.apply(this,arguments)}function Mn(){return Mn=(0,h.Z)(function*(y){var f;const p=y.auth,_=yield y.getIdToken(),T=yield rt(y,function Tr(y,f){return ft.apply(this,arguments)}(p,{idToken:_}));ne(T?.users.length,p,"internal-error");const M=T.users[0];y._notifyReloadListener(M);const U=null!==(f=M.providerUserInfo)&&void 0!==f&&f.length?function zt(y){return y.map(f=>{var{providerId:p}=f,_=(0,se._T)(f,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(M.providerUserInfo):[],Z=function As(y,f){return[...y.filter(_=>!f.some(T=>T.providerId===_.providerId)),...f]}(y.providerData,U),Ke=!!y.isAnonymous&&!(y.email&&M.passwordHash||Z?.length),ce={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:Z,metadata:new dr(M.createdAt,M.lastLoginAt),isAnonymous:Ke};Object.assign(y,ce)}),Mn.apply(this,arguments)}function pn(){return(pn=(0,h.Z)(function*(y){const f=(0,P.m9)(y);yield Ur(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function an(){return(an=(0,h.Z)(function*(y,f){const p=yield at(y,{},(0,h.Z)(function*(){const _=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:M}=y.config,U=Cn(y,T,"/v1/token",`key=${M}`),Z=yield y._getAdditionalHeaders();return Z["Content-Type"]="application/x-www-form-urlencoded",le.fetch()(U,{method:"POST",headers:Z,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class li{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ne(f.idToken,"internal-error"),ne(typeof f.idToken<"u","internal-error"),ne(typeof f.refreshToken<"u","internal-error");const p="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function on(y){const f=Jt(y);return ne(f,"internal-error"),ne(typeof f.exp<"u","internal-error"),ne(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var _=this;return(0,h.Z)(function*(){return ne(!_.accessToken||_.refreshToken,f,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(f,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var _=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:M,expiresIn:U}=yield function $i(y,f){return an.apply(this,arguments)}(f,p);_.updateTokensAndExpiration(T,M,Number(U))})()}updateTokensAndExpiration(f,p,_){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(f,p){const{refreshToken:_,accessToken:T,expirationTime:M}=p,U=new li;return _&&(ne("string"==typeof _,"internal-error",{appName:f}),U.refreshToken=_),T&&(ne("string"==typeof T,"internal-error",{appName:f}),U.accessToken=T),M&&(ne("number"==typeof M,"internal-error",{appName:f}),U.expirationTime=M),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new li,this.toJSON())}_performRefresh(){return Dt("not implemented")}}function Ln(y,f){ne("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class Kn{constructor(f){var{uid:p,auth:_,stsTokenManager:T}=f,M=(0,se._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new dr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,h.Z)(function*(){const _=yield rt(p,p.stsTokenManager.getToken(p.auth,f));return ne(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(f){return function Er(y){return Vr.apply(this,arguments)}(this,f)}reload(){return function Qr(y){return pn.apply(this,arguments)}(this)}_assign(f){this!==f&&(ne(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const p=new Kn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(f){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var _=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(f),T=!0),p&&(yield Ur(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var f=this;return(0,h.Z)(function*(){const p=yield f.getIdToken();return yield rt(f,function xn(y,f){return En.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var _,T,M,U,Z,Me,ze,Ke;const ce=null!==(_=p.displayName)&&void 0!==_?_:void 0,vn=null!==(T=p.email)&&void 0!==T?T:void 0,vt=null!==(M=p.phoneNumber)&&void 0!==M?M:void 0,Eo=null!==(U=p.photoURL)&&void 0!==U?U:void 0,cc=null!==(Z=p.tenantId)&&void 0!==Z?Z:void 0,zn=null!==(Me=p._redirectEventId)&&void 0!==Me?Me:void 0,jd=null!==(ze=p.createdAt)&&void 0!==ze?ze:void 0,Yg=null!==(Ke=p.lastLoginAt)&&void 0!==Ke?Ke:void 0,{uid:$d,emailVerified:tp,isAnonymous:Nr,providerData:lc,stsTokenManager:vr}=p;ne($d&&vr,f,"internal-error");const ea=li.fromJSON(this.name,vr);ne("string"==typeof $d,f,"internal-error"),Ln(ce,f.name),Ln(vn,f.name),ne("boolean"==typeof tp,f,"internal-error"),ne("boolean"==typeof Nr,f,"internal-error"),Ln(vt,f.name),Ln(Eo,f.name),Ln(cc,f.name),Ln(zn,f.name),Ln(jd,f.name),Ln(Yg,f.name);const Hd=new Kn({uid:$d,auth:f,email:vn,emailVerified:tp,displayName:ce,isAnonymous:Nr,photoURL:Eo,phoneNumber:vt,tenantId:cc,stsTokenManager:ea,createdAt:jd,lastLoginAt:Yg});return lc&&Array.isArray(lc)&&(Hd.providerData=lc.map(gv=>Object.assign({},gv))),zn&&(Hd._redirectEventId=zn),Hd}static _fromIdTokenResponse(f,p,_=!1){return(0,h.Z)(function*(){const T=new li;T.updateFromServerResponse(p);const M=new Kn({uid:p.localId,auth:f,stsTokenManager:T,isAnonymous:_});return yield Ur(M),M})()}}const Ii=new Map;function In(y){Xe(y instanceof Function,"Expected a class definition");let f=Ii.get(y);return f?(Xe(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Ii.set(y,f),f)}const Br=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(p,_){var T=this;return(0,h.Z)(function*(){T.storage[p]=_})()}_get(p){var _=this;return(0,h.Z)(function*(){const T=_.storage[p];return void 0===T?null:T})()}_remove(p){var _=this;return(0,h.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function V(y,f,p){return`firebase:${y}:${f}:${p}`}class L{constructor(f,p,_){this.persistence=f,this.auth=p,this.userKey=_;const{config:T,name:M}=this.auth;this.fullUserKey=V(this.userKey,T.apiKey,M),this.fullPersistenceKey=V("persistence",T.apiKey,M),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?Kn._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,h.Z)(function*(){if(p.persistence===f)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,_="authUser"){return(0,h.Z)(function*(){if(!p.length)return new L(In(Br),f,_);const T=(yield Promise.all(p.map(function(){var ze=(0,h.Z)(function*(Ke){if(yield Ke._isAvailable())return Ke});return function(Ke){return ze.apply(this,arguments)}}()))).filter(ze=>ze);let M=T[0]||In(Br);const U=V(_,f.config.apiKey,f.name);let Z=null;for(const ze of p)try{const Ke=yield ze._get(U);if(Ke){const ce=Kn._fromJSON(f,Ke);ze!==M&&(Z=ce),M=ze;break}}catch{}const Me=T.filter(ze=>ze._shouldAllowMigration);return M._shouldAllowMigration&&Me.length?(M=Me[0],Z&&(yield M._set(U,Z.toJSON())),yield Promise.all(p.map(function(){var ze=(0,h.Z)(function*(Ke){if(Ke!==M)try{yield Ke._remove(U)}catch{}});return function(Ke){return ze.apply(this,arguments)}}())),new L(M,f,_)):new L(M,f,_)})()}}function z(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ct(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ve(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(jn(f))return"Blackberry";if(bn(f))return"Webos";if(J(f))return"Safari";if((f.includes("chrome/")||Le(f))&&!f.includes("edge/"))return"Chrome";if(Zt(f))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function ve(y=(0,P.z$)()){return/firefox\//i.test(y)}function J(y=(0,P.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Le(y=(0,P.z$)()){return/crios\//i.test(y)}function Ct(y=(0,P.z$)()){return/iemobile/i.test(y)}function Zt(y=(0,P.z$)()){return/android/i.test(y)}function jn(y=(0,P.z$)()){return/blackberry/i.test(y)}function bn(y=(0,P.z$)()){return/webos/i.test(y)}function ln(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Hi(y=(0,P.z$)()){return ln(y)||Zt(y)||bn(y)||jn(y)||/windows phone/i.test(y)||Ct(y)}function de(y,f=[]){let p;switch(y){case"Browser":p=z((0,P.z$)());break;case"Worker":p=`${z((0,P.z$)())}-${y}`;break;default:p=y}const _=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${ie.SDK_VERSION}/${_}`}function ke(){return(ke=(0,h.Z)(function*(y){return(yield be(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function dt(y,f){return wt.apply(this,arguments)}function wt(){return(wt=(0,h.Z)(function*(y,f){return be(y,"GET","/v2/recaptchaConfig",Ce(y,f))})).apply(this,arguments)}function Vt(y){return void 0!==y&&void 0!==y.getResponse}function pt(y){return void 0!==y&&void 0!==y.enterprise}class Xt{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function hr(y){return new Promise((f,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=f,_.onerror=T=>{const M=De("internal-error");M.customData=T,p(M)},_.type="text/javascript",_.charset="UTF-8",function Kt(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(_)})}function Yn(y){return`__${y}${Math.floor(1e6*Math.random())}`}const No="NO_RECAPTCHA";class di{constructor(f){this.type="recaptcha-enterprise",this.auth=hn(f)}verify(f="verify",p=!1){var _=this;return(0,h.Z)(function*(){function M(){return M=(0,h.Z)(function*(Z){if(!p){if(null==Z.tenantId&&null!=Z._agentRecaptchaConfig)return Z._agentRecaptchaConfig.siteKey;if(null!=Z.tenantId&&void 0!==Z._tenantRecaptchaConfigs[Z.tenantId])return Z._tenantRecaptchaConfigs[Z.tenantId].siteKey}return new Promise(function(){var Me=(0,h.Z)(function*(ze,Ke){dt(Z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ce=>{if(void 0!==ce.recaptchaKey){const vn=new Xt(ce);return null==Z.tenantId?Z._agentRecaptchaConfig=vn:Z._tenantRecaptchaConfigs[Z.tenantId]=vn,ze(vn.siteKey)}Ke(new Error("recaptcha Enterprise site key undefined"))}).catch(ce=>{Ke(ce)})});return function(ze,Ke){return Me.apply(this,arguments)}}())}),M.apply(this,arguments)}function U(Z,Me,ze){const Ke=window.grecaptcha;pt(Ke)?Ke.enterprise.ready(()=>{Ke.enterprise.execute(Z,{action:f}).then(ce=>{Me(ce)}).catch(()=>{Me(No)})}):ze(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Z,Me)=>{(function T(Z){return M.apply(this,arguments)})(_.auth).then(ze=>{if(!p&&pt(window.grecaptcha))U(ze,Z,Me);else{if(typeof window>"u")return void Me(new Error("RecaptchaVerifier is only supported in browser"));hr("https://www.google.com/recaptcha/enterprise.js?render="+ze).then(()=>{U(ze,Z,Me)}).catch(Ke=>{Me(Ke)})}}).catch(ze=>{Me(ze)})})})()}}function Ze(y,f,p){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,h.Z)(function*(y,f,p,_=!1){const T=new di(y);let M;try{M=yield T.verify(p)}catch{M=yield T.verify(p,!0)}const U=Object.assign({},f);return Object.assign(U,_?{captchaResp:M}:{captchaResponse:M}),Object.assign(U,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(U,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),U})).apply(this,arguments)}class Dn{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const _=M=>new Promise((U,Z)=>{try{U(f(M))}catch(Me){Z(Me)}});_.onAbort=p,this.queue.push(_);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,h.Z)(function*(){if(p.auth.currentUser===f)return;const _=[];try{for(const T of p.queue)yield T(f),T.onAbort&&_.push(T.onAbort)}catch(T){_.reverse();for(const M of _)try{M()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class hi{constructor(f,p,_,T){this.app=f,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=_,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qn(this),this.idTokenSubscription=new Qn(this),this.beforeStateQueue=new Dn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(f,p){var _=this;return p&&(this._popupRedirectResolver=In(p)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,M;if(!_._deleted&&(_.persistenceManager=yield L.create(_,f),!_._deleted)){if(null!==(T=_._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(M=_.currentUser)||void 0===M?void 0:M.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,h.Z)(function*(){var _;const T=yield p.assertedPersistence.getCurrentUser();let M=T,U=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Z=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Me=M?._redirectEventId,ze=yield p.tryRedirectSignIn(f);(!Z||Z===Me)&&ze?.user&&(M=ze.user,U=!0)}if(!M)return p.directlySetCurrentUser(null);if(!M._redirectEventId){if(U)try{yield p.beforeStateQueue.runMiddleware(M)}catch(Z){M=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Z))}return M?p.reloadAndSetCurrentUserOrClear(M):p.directlySetCurrentUser(null)}return ne(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===M._redirectEventId?p.directlySetCurrentUser(M):p.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var p=this;return(0,h.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,h.Z)(function*(){try{yield Ur(f)}catch(_){if("auth/network-request-failed"!==_?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Zs(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,h.Z)(function*(){const _=f?(0,P.m9)(f):null;return _&&ne(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(f,p=!1){var _=this;return(0,h.Z)(function*(){if(!_._deleted)return f&&ne(_.tenantId===f.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(f)),_.queue((0,h.Z)(function*(){yield _.directlySetCurrentUser(f),_.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,h.Z)(function*(){yield p.assertedPersistence.setPersistence(In(f))}))}initializeRecaptchaConfig(){var f=this;return(0,h.Z)(function*(){const p=yield dt(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new Xt(p);null==f.tenantId?f._agentRecaptchaConfig=_:f._tenantRecaptchaConfigs[f.tenantId]=_,_.emailPasswordEnabled&&new di(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,p,_){return this.registerStateListener(this.authStateSubscription,f,p,_)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,_){return this.registerStateListener(this.idTokenSubscription,f,p,_)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var _=this;return(0,h.Z)(function*(){const T=yield _.getOrInitRedirectPersistenceManager(p);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,h.Z)(function*(){if(!p.redirectPersistenceManager){const _=f&&In(f)||p._popupRedirectResolver;ne(_,p,"argument-error"),p.redirectPersistenceManager=yield L.create(p,[In(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,h.Z)(function*(){var _,T;return p._isInitialized&&(yield p.queue((0,h.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===f?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,h.Z)(function*(){if(f===p.currentUser)return p.queue((0,h.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,_,T){if(this._deleted)return()=>{};const M="function"==typeof p?p:p.next.bind(p),U=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(U,this,"internal-error"),U.then(()=>M(this.currentUser)),"function"==typeof p?f.addObserver(p,_,T):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,h.Z)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=de(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var p;const _={"X-Client-Version":f.clientVersion};f.app.options.appId&&(_["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();T&&(_["X-Firebase-Client"]=T);const M=yield f._getAppCheckToken();return M&&(_["X-Firebase-AppCheck"]=M),_})()}_getAppCheckToken(){var f=this;return(0,h.Z)(function*(){var p;const _=yield null===(p=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return _?.error&&function je(y,...f){Oe.logLevel<=oe.in.WARN&&Oe.warn(`Auth (${ie.SDK_VERSION}): ${y}`,...f)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function hn(y){return(0,P.m9)(y)}class Qn{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ks(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function ha(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class cs{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return Dt("not implemented")}_getIdTokenResponse(f){return Dt("not implemented")}_linkToIdToken(f,p){return Dt("not implemented")}_getReauthenticationResolver(f){return Dt("not implemented")}}function Qs(y,f){return $n.apply(this,arguments)}function $n(){return($n=(0,h.Z)(function*(y,f){return be(y,"POST","/v1/accounts:resetPassword",Ce(y,f))})).apply(this,arguments)}function Po(y,f){return ls.apply(this,arguments)}function ls(){return(ls=(0,h.Z)(function*(y,f){return be(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ko(){return(ko=(0,h.Z)(function*(y,f){return be(y,"POST","/v1/accounts:update",Ce(y,f))})).apply(this,arguments)}function Ir(y,f){return yn.apply(this,arguments)}function yn(){return(yn=(0,h.Z)(function*(y,f){return ht(y,"POST","/v1/accounts:signInWithPassword",Ce(y,f))})).apply(this,arguments)}function Jr(y,f){return fa.apply(this,arguments)}function fa(){return(fa=(0,h.Z)(function*(y,f){return be(y,"POST","/v1/accounts:sendOobCode",Ce(y,f))})).apply(this,arguments)}function Fo(){return(Fo=(0,h.Z)(function*(y,f){return Jr(y,f)})).apply(this,arguments)}function xs(y,f){return Js.apply(this,arguments)}function Js(){return(Js=(0,h.Z)(function*(y,f){return Jr(y,f)})).apply(this,arguments)}function fr(y,f){return fu.apply(this,arguments)}function fu(){return(fu=(0,h.Z)(function*(y,f){return Jr(y,f)})).apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(y,f){return Jr(y,f)})).apply(this,arguments)}function Lo(){return(Lo=(0,h.Z)(function*(y,f){return ht(y,"POST","/v1/accounts:signInWithEmailLink",Ce(y,f))})).apply(this,arguments)}function fi(){return(fi=(0,h.Z)(function*(y,f){return ht(y,"POST","/v1/accounts:signInWithEmailLink",Ce(y,f))})).apply(this,arguments)}class pu extends cs{constructor(f,p,_,T=null){super("password",_),this._email=f,this._password=p,this._tenantId=T}static _fromEmailAndPassword(f,p){return new pu(f,p,"password")}static _fromEmailAndCode(f,p,_=null){return new pu(f,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,h.Z)(function*(){var _;switch(p.signInMethod){case"password":const T={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const M=yield Ze(f,T,"signInWithPassword");return Ir(f,M)}return Ir(f,T).catch(function(){var M=(0,h.Z)(function*(U){if("auth/missing-recaptcha-token"===U.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Z=yield Ze(f,T,"signInWithPassword");return Ir(f,Z)}return Promise.reject(U)});return function(U){return M.apply(this,arguments)}}());case"emailLink":return function pa(y,f){return Lo.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:Ie(f,"internal-error")}})()}_linkToIdToken(f,p){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return Po(f,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Fc(y,f){return fi.apply(this,arguments)}(f,{idToken:p,email:_._email,oobCode:_._password});default:Ie(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function bi(y,f){return rd.apply(this,arguments)}function rd(){return(rd=(0,h.Z)(function*(y,f){return ht(y,"POST","/v1/accounts:signInWithIdp",Ce(y,f))})).apply(this,arguments)}class ds extends cs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new ds(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):Ie("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:T}=p,M=(0,se._T)(p,["providerId","signInMethod"]);if(!_||!T)return null;const U=new ds(_,T);return U.idToken=M.idToken||void 0,U.accessToken=M.accessToken||void 0,U.secret=M.secret,U.nonce=M.nonce,U.pendingToken=M.pendingToken||null,U}_getIdTokenResponse(f){return bi(f,this.buildRequest())}_linkToIdToken(f,p){const _=this.buildRequest();return _.idToken=p,bi(f,_)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,bi(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,P.xO)(p)}return f}}function Lc(){return(Lc=(0,h.Z)(function*(y,f){return be(y,"POST","/v1/accounts:sendVerificationCode",Ce(y,f))})).apply(this,arguments)}function id(){return(id=(0,h.Z)(function*(y,f){return ht(y,"POST","/v1/accounts:signInWithPhoneNumber",Ce(y,f))})).apply(this,arguments)}function gu(){return(gu=(0,h.Z)(function*(y,f){const p=yield ht(y,"POST","/v1/accounts:signInWithPhoneNumber",Ce(y,f));if(p.temporaryProof)throw Wt(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const sd={USER_NOT_FOUND:"user-not-found"};function mu(){return(mu=(0,h.Z)(function*(y,f){return ht(y,"POST","/v1/accounts:signInWithPhoneNumber",Ce(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),sd)})).apply(this,arguments)}class pi extends cs{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new pi({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new pi({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function bg(y,f){return id.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function Tg(y,f){return gu.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function rv(y,f){return mu.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:_,verificationCode:T}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:_,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:M}=f;return _||p||T||M?new pi({verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:M}):null}}class Vo{constructor(f){var p,_,T,M,U,Z;const Me=(0,P.zd)((0,P.pd)(f)),ze=null!==(p=Me.apiKey)&&void 0!==p?p:null,Ke=null!==(_=Me.oobCode)&&void 0!==_?_:null,ce=function ff(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Me.mode)&&void 0!==T?T:null);ne(ze&&Ke&&ce,"argument-error"),this.apiKey=ze,this.operation=ce,this.code=Ke,this.continueUrl=null!==(M=Me.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(U=Me.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(Z=Me.tenantId)&&void 0!==Z?Z:null}static parseLink(f){const p=function od(y){const f=(0,P.zd)((0,P.pd)(y)).link,p=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,_=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(_?(0,P.zd)((0,P.pd)(_)).link:null)||_||p||f||y}(f);try{return new Vo(p)}catch{return null}}}let pf=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return pu._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const T=Vo.parseLink(_);return ne(T,"argument-error"),pu._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class hs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class zi extends hs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Xs extends zi{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return ne("providerId"in p&&"signInMethod"in p,"argument-error"),ds._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ne(f.idToken||f.accessToken,"argument-error"),ds._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Xs.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Xs.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:M,nonce:U,providerId:Z}=f;if(!_&&!T&&!p&&!M||!Z)return null;try{return new Xs(Z)._credential({idToken:p,accessToken:_,nonce:U,pendingToken:M})}catch{return null}}}let Vc=(()=>{class y extends zi{constructor(){super("facebook.com")}static credential(p){return ds._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ga=(()=>{class y extends zi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return ds._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:T}=p;if(!_&&!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ad=(()=>{class y extends zi{constructor(){super("github.com")}static credential(p){return ds._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ms extends cs{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return bi(f,this.buildRequest())}_linkToIdToken(f,p){const _=this.buildRequest();return _.idToken=p,bi(f,_)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,bi(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:T,pendingToken:M}=p;return _&&T&&M&&_===T?new Ms(_,M):null}static _create(f,p){return new Ms(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class yu extends hs{constructor(f){ne(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return yu.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return yu.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=Ms.fromJSON(f);return ne(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:_}=f;if(!p||!_)return null;try{return Ms._create(_,p)}catch{return null}}}let vu=(()=>{class y extends zi{constructor(){super("twitter.com")}static credential(p,_){return ds._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=p;if(!_||!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Rs(y,f){return jr.apply(this,arguments)}function jr(){return(jr=(0,h.Z)(function*(y,f){return ht(y,"POST","/v1/accounts:signUp",Ce(y,f))})).apply(this,arguments)}class Ar{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,_,T=!1){return(0,h.Z)(function*(){const M=yield Kn._fromIdTokenResponse(f,_,T),U=ma(_);return new Ar({user:M,providerId:U,_tokenResponse:_,operationType:p})})()}static _forOperation(f,p,_){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(_,!0);const T=ma(_);return new Ar({user:f,providerId:T,_tokenResponse:_,operationType:p})})()}}function ma(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Uo(){return(Uo=(0,h.Z)(function*(y){var f;const p=hn(y);if(yield p._initializationPromise,null!==(f=p.currentUser)&&void 0!==f&&f.isAnonymous)return new Ar({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield Rs(p,{returnSecureToken:!0}),T=yield Ar._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class fs extends P.ZR{constructor(f,p,_,T){var M;super(p.code,p.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,fs.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(f,p,_,T){return new fs(f,p,_,T)}}function gr(y,f,p,_){return("reauthenticate"===f?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?fs._fromErrorAndOperation(y,M,f,_):M})}function ud(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function xr(){return xr=(0,h.Z)(function*(y,f){const p=(0,P.m9)(y);yield ps(!0,p,f);const{providerUserInfo:_}=yield function wr(y,f){return br.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),T=ud(_||[]);return p.providerData=p.providerData.filter(M=>T.has(M.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),xr.apply(this,arguments)}function ir(y,f){return _u.apply(this,arguments)}function _u(){return(_u=(0,h.Z)(function*(y,f,p=!1){const _=yield rt(y,f._linkToIdToken(y.auth,yield y.getIdToken()),p);return Ar._forOperation(y,"link",_)})).apply(this,arguments)}function ps(y,f,p){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,h.Z)(function*(y,f,p){yield Ur(f);const T=!1===y?"provider-already-linked":"no-such-provider";ne(ud(f.providerData).has(p)===y,f.auth,T)})).apply(this,arguments)}function Ns(y,f){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,h.Z)(function*(y,f,p=!1){const{auth:_}=y,T="reauthenticate";try{const M=yield rt(y,gr(_,T,f,y),p);ne(M.idToken,_,"internal-error");const U=Jt(M.idToken);ne(U,_,"internal-error");const{sub:Z}=U;return ne(y.uid===Z,_,"user-mismatch"),Ar._forOperation(y,T,M)}catch(M){throw"auth/user-not-found"===M?.code&&Ie(_,"user-mismatch"),M}})).apply(this,arguments)}function ya(y,f){return xt.apply(this,arguments)}function xt(){return(xt=(0,h.Z)(function*(y,f,p=!1){const _="signIn",T=yield gr(y,_,f),M=yield Ar._fromIdTokenResponse(y,_,T);return p||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function va(y,f){return ld.apply(this,arguments)}function ld(){return(ld=(0,h.Z)(function*(y,f){return ya(hn(y),f)})).apply(this,arguments)}function dd(y,f){return wu.apply(this,arguments)}function wu(){return(wu=(0,h.Z)(function*(y,f){const p=(0,P.m9)(y);return yield ps(!1,p,f.providerId),ir(p,f)})).apply(this,arguments)}function hd(y,f){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,h.Z)(function*(y,f){return Ns((0,P.m9)(y),f)})).apply(this,arguments)}function fd(){return(fd=(0,h.Z)(function*(y,f){return ht(y,"POST","/v1/accounts:signInWithCustomToken",Ce(y,f))})).apply(this,arguments)}function kt(){return kt=(0,h.Z)(function*(y,f){const p=hn(y),_=yield function Sg(y,f){return fd.apply(this,arguments)}(p,{token:f,returnSecureToken:!0}),T=yield Ar._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(T.user),T}),kt.apply(this,arguments)}class _a{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?wa._fromServerResponse(f,p):"totpInfo"in p?sr._fromServerResponse(f,p):Ie(f,"internal-error")}}class wa extends _a{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new wa(p)}}class sr extends _a{constructor(f){super("totp",f)}static _fromServerResponse(f,p){return new sr(p)}}function eo(y,f,p){var _;ne((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),ne(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ne(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(ne(p.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function $r(){return $r=(0,h.Z)(function*(y,f,p){var _;const T=hn(y),M={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const U=yield Ze(T,M,"getOobCode",!0);p&&eo(T,U,p),yield xs(T,U)}else p&&eo(T,M,p),yield xs(T,M).catch(function(){var U=(0,h.Z)(function*(Z){if("auth/missing-recaptcha-token"!==Z.code)return Promise.reject(Z);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Me=yield Ze(T,M,"getOobCode",!0);p&&eo(T,Me,p),yield xs(T,Me)}});return function(Z){return U.apply(this,arguments)}}())}),$r.apply(this,arguments)}function Du(){return(Du=(0,h.Z)(function*(y,f,p){yield Qs((0,P.m9)(y),{oobCode:f,newPassword:p})})).apply(this,arguments)}function gs(){return gs=(0,h.Z)(function*(y,f){yield function Gi(y,f){return ko.apply(this,arguments)}((0,P.m9)(y),{oobCode:f})}),gs.apply(this,arguments)}function Ea(y,f){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,h.Z)(function*(y,f){const p=(0,P.m9)(y),_=yield Qs(p,{oobCode:f}),T=_.requestType;switch(ne(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(_.mfaInfo,p,"internal-error");default:ne(_.email,p,"internal-error")}let M=null;return _.mfaInfo&&(M=_a._fromServerResponse(hn(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:M},operation:T}})).apply(this,arguments)}function qi(){return(qi=(0,h.Z)(function*(y,f){const{data:p}=yield Ea((0,P.m9)(y),f);return p.email})).apply(this,arguments)}function mi(){return mi=(0,h.Z)(function*(y,f,p){var _;const T=hn(y),M={returnSecureToken:!0,email:f,password:p,clientType:"CLIENT_TYPE_WEB"};let U;if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const ze=yield Ze(T,M,"signUpPassword");U=Rs(T,ze)}else U=Rs(T,M).catch(function(){var ze=(0,h.Z)(function*(Ke){if("auth/missing-recaptcha-token"===Ke.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ce=yield Ze(T,M,"signUpPassword");return Rs(T,ce)}return Promise.reject(Ke)});return function(Ke){return ze.apply(this,arguments)}}());const Z=yield U.catch(ze=>Promise.reject(ze)),Me=yield Ar._fromIdTokenResponse(T,"signIn",Z);return yield T._updateCurrentUser(Me.user),Me}),mi.apply(this,arguments)}function Cu(){return Cu=(0,h.Z)(function*(y,f,p){var _;const T=hn(y),M={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function U(Z,Me){ne(Me.handleCodeInApp,T,"argument-error"),Me&&eo(T,Z,Me)}if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Z=yield Ze(T,M,"getOobCode",!0);U(Z,p),yield fr(T,Z)}else U(M,p),yield fr(T,M).catch(function(){var Z=(0,h.Z)(function*(Me){if("auth/missing-recaptcha-token"!==Me.code)return Promise.reject(Me);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ze=yield Ze(T,M,"getOobCode",!0);U(ze,p),yield fr(T,ze)}});return function(Me){return Z.apply(this,arguments)}}())}),Cu.apply(this,arguments)}function jo(){return(jo=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y),T=pf.credentialWithLink(f,p||Ut());return ne(T._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),va(_,T)})).apply(this,arguments)}function bu(){return(bu=(0,h.Z)(function*(y,f){return be(y,"POST","/v1/accounts:createAuthUri",Ce(y,f))})).apply(this,arguments)}function Tu(){return Tu=(0,h.Z)(function*(y,f){const _={identifier:f,continueUri:it()?Ut():"http://localhost"},{signinMethods:T}=yield function jc(y,f){return bu.apply(this,arguments)}((0,P.m9)(y),_);return T||[]}),Tu.apply(this,arguments)}function Da(){return Da=(0,h.Z)(function*(y,f){const p=(0,P.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&eo(p.auth,T,f);const{email:M}=yield function kc(y,f){return Fo.apply(this,arguments)}(p.auth,T);M!==y.email&&(yield y.reload())}),Da.apply(this,arguments)}function Ca(){return Ca=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};p&&eo(_.auth,M,p);const{email:U}=yield function Xr(y,f){return ei.apply(this,arguments)}(_.auth,M);U!==y.email&&(yield y.reload())}),Ca.apply(this,arguments)}function Au(){return(Au=(0,h.Z)(function*(y,f){return be(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function xu(){return xu=(0,h.Z)(function*(y,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const _=(0,P.m9)(y),M={idToken:yield _.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},U=yield rt(_,function yd(y,f){return Au.apply(this,arguments)}(_.auth,M));_.displayName=U.displayName||null,_.photoURL=U.photoUrl||null;const Z=_.providerData.find(({providerId:Me})=>"password"===Me);Z&&(Z.displayName=_.displayName,Z.photoURL=_.photoURL),yield _._updateTokensIfNecessary(U)}),xu.apply(this,arguments)}function Tn(y,f,p){return ba.apply(this,arguments)}function ba(){return(ba=(0,h.Z)(function*(y,f,p){const{auth:_}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(M.email=f),p&&(M.password=p);const U=yield rt(y,Po(_,M));yield y._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class Os{constructor(f,p,_={}){this.isNewUser=f,this.providerId=p,this.profile=_}}class vf extends Os{constructor(f,p,_,T){super(f,p,_),this.username=T}}class vd extends Os{constructor(f,p){super(f,"facebook.com",p)}}class Mg extends vf{constructor(f,p){super(f,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Mu extends Os{constructor(f,p){super(f,"google.com",p)}}class Hc extends vf{constructor(f,p,_){super(f,"twitter.com",p,_)}}function Gc(y){const{user:f,_tokenResponse:p}=y;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function yf(y){var f,p;if(!y)return null;const{providerId:_}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const U=null===(p=null===(f=Jt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(U)return new Os(M,"anonymous"!==U&&"custom"!==U?U:null)}if(!_)return null;switch(_){case"facebook.com":return new vd(M,T);case"github.com":return new Mg(M,T);case"google.com":return new Mu(M,T);case"twitter.com":return new Hc(M,T,y.screenName||null);case"custom":case"anonymous":return new Os(M,null);default:return new Os(M,_,T)}}(p)}class no{constructor(f,p,_){this.type=f,this.credential=p,this.auth=_}static _fromIdtoken(f,p){return new no("enroll",f,p)}static _fromMfaPendingCredential(f){return new no("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,_;if(f?.multiFactorSession){if(null!==(p=f.multiFactorSession)&&void 0!==p&&p.pendingCredential)return no._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(_=f.multiFactorSession)&&void 0!==_&&_.idToken)return no._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ro{constructor(f,p,_){this.session=f,this.hints=p,this.signInResolver=_}static _fromError(f,p){const _=hn(f),T=p.customData._serverResponse,M=(T.mfaInfo||[]).map(Z=>_a._fromServerResponse(_,Z));ne(T.mfaPendingCredential,_,"internal-error");const U=no._fromMfaPendingCredential(T.mfaPendingCredential);return new ro(U,M,function(){var Z=(0,h.Z)(function*(Me){const ze=yield Me._process(_,U);delete T.mfaInfo,delete T.mfaPendingCredential;const Ke=Object.assign(Object.assign({},T),{idToken:ze.idToken,refreshToken:ze.refreshToken});switch(p.operationType){case"signIn":const ce=yield Ar._fromIdTokenResponse(_,p.operationType,Ke);return yield _._updateCurrentUser(ce.user),ce;case"reauthenticate":return ne(p.user,_,"internal-error"),Ar._forOperation(p.user,p.operationType,Ke);default:Ie(_,"internal-error")}});return function(Me){return Z.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,h.Z)(function*(){return p.signInResolver(f)})()}}class oo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>_a._fromServerResponse(f.auth,_)))})}static _fromUser(f){return new oo(f)}getSession(){var f=this;return(0,h.Z)(function*(){return no._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,p){var _=this;return(0,h.Z)(function*(){const T=f,M=yield _.getSession(),U=yield rt(_.user,T._process(_.user.auth,M,p));return yield _.user._updateTokensIfNecessary(U),_.user.reload()})()}unenroll(f){var p=this;return(0,h.Z)(function*(){const _="string"==typeof f?f:f.uid,T=yield p.user.getIdToken();try{const M=yield rt(p.user,function Ou(y,f){return be(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ce(y,f))}(p.user.auth,{idToken:T,mfaEnrollmentId:_}));p.enrolledFactors=p.enrolledFactors.filter(({uid:U})=>U!==_),yield p.user._updateTokensIfNecessary(M),yield p.user.reload()}catch(M){throw M}})()}}const Ps=new WeakMap,ao="__sak";class Pu{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(ao,"1"),this.storage.removeItem(ao),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const uo=(()=>{class y extends Pu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Sa(){const y=(0,P.z$)();return J(y)||ln(y)}()&&function la(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Hi(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),M=this.localCache[_];T!==M&&p(_,M,T)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((Z,Me,ze)=>{this.notifyListeners(Z,ze)});const T=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Z=this.storage.getItem(T);if(p.newValue!==Z)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!_)return}const M=()=>{const Z=this.storage.getItem(T);!_&&this.localCache[T]===Z||this.notifyListeners(T,Z)},U=this.storage.getItem(T);!function Ci(){return(0,P.w1)()&&10===document.documentMode}()||U===p.newValue||p.newValue===p.oldValue?M():setTimeout(M,10)}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const M of Array.from(T))M(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var T=()=>super._set,M=this;return(0,h.Z)(function*(){yield T().call(M,p,_),M.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,T=this;return(0,h.Z)(function*(){const M=yield _().call(T,p);return T.localCache[p]=JSON.stringify(M),M})()}_remove(p){var _=()=>super._remove,T=this;return(0,h.Z)(function*(){yield _().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),vs=(()=>{class y extends Pu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let zo=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(M=>M.isListeningto(p));if(_)return _;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,h.Z)(function*(){const T=p,{eventId:M,eventType:U,data:Z}=T.data,Me=_.handlersMap[U];if(!Me?.size)return;T.ports[0].postMessage({status:"ack",eventId:M,eventType:U});const ze=Array.from(Me).map(function(){var ce=(0,h.Z)(function*(vn){return vn(T.origin,Z)});return function(vn){return ce.apply(this,arguments)}}()),Ke=yield function Wc(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return f.apply(this,arguments)}}()))}(ze);T.ports[0].postMessage({status:"done",eventId:M,eventType:U,response:Ke})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function qo(y="",f=10){let p="";for(let _=0;_<f;_++)p+=Math.floor(10*Math.random());return y+p}class Id{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,_=50){var T=this;return(0,h.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let U,Z;return new Promise((Me,ze)=>{const Ke=qo("",20);M.port1.start();const ce=setTimeout(()=>{ze(new Error("unsupported_event"))},_);Z={messageChannel:M,onMessage(vn){const vt=vn;if(vt.data.eventId===Ke)switch(vt.data.status){case"ack":clearTimeout(ce),U=setTimeout(()=>{ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),Me(vt.data.response);break;default:clearTimeout(ce),clearTimeout(U),ze(new Error("invalid_response"))}}},T.handlers.add(Z),M.port1.addEventListener("message",Z.onMessage),T.target.postMessage({eventType:f,eventId:Ke,data:p},[M.port2])}).finally(()=>{Z&&T.removeMessageHandler(Z)})})()}}function gn(){return window}function Fu(){return typeof gn().WorkerGlobalScope<"u"&&"function"==typeof gn().importScripts}function Lu(){return(Lu=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const co="firebaseLocalStorageDb",Hn=1,Kc="firebaseLocalStorage",Aa="fbase_key";class xa{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function _s(y,f){return y.transaction([Kc],f?"readwrite":"readonly").objectStore(Kc)}function Uu(){const y=indexedDB.open(co,Hn);return new Promise((f,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Kc,{keyPath:Aa})}catch(T){p(T)}}),y.addEventListener("success",(0,h.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Kc)?f(_):(_.close(),yield function Ef(){const y=indexedDB.deleteDatabase(co);return new xa(y).toPromise()}(),f(yield Uu()))}))})}function lo(y,f,p){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,h.Z)(function*(y,f,p){const _=_s(y,!0).put({[Aa]:f,value:p});return new xa(_).toPromise()})).apply(this,arguments)}function Wo(){return(Wo=(0,h.Z)(function*(y,f){const p=_s(y,!1).get(f),_=yield new xa(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function ks(y,f){const p=_s(y,!0).delete(f);return new xa(p).toPromise()}const ho=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,h.Z)(function*(){return p.db||(p.db=yield Uu()),p.db})()}_withRetries(p){var _=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const M=yield _._openDb();return yield p(M)}catch(M){if(T++>3)throw M;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,h.Z)(function*(){return Fu()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,h.Z)(function*(){p.receiver=zo._getInstance(function or(){return Fu()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,h.Z)(function*(T,M){return{keyProcessed:(yield p._poll()).includes(M.key)}});return function(T,M){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,h.Z)(function*(T,M){return["keyChanged"]});return function(T,M){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,h.Z)(function*(){var _,T;if(p.activeServiceWorker=yield function Zc(){return Lu.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Id(p.activeServiceWorker);const M=yield p.sender._send("ping",{},800);M&&null!==(_=M[0])&&void 0!==_&&_.fulfilled&&null!==(T=M[0])&&void 0!==T&&T.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,h.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Vu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Uu();return yield lo(p,ao,"1"),yield ks(p,ao),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,h.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(M=>lo(M,p,_)),T.localCache[p]=_,T.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,h.Z)(function*(){const T=yield _._withRetries(M=>function Ma(y,f){return Wo.apply(this,arguments)}(M,p));return _.localCache[p]=T,T})()}_remove(p){var _=this;return(0,h.Z)(function*(){return _._withPendingWrite((0,h.Z)(function*(){return yield _._withRetries(T=>ks(T,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,h.Z)(function*(){const _=yield p._withRetries(U=>{const Z=_s(U,!1).getAll();return new xa(Z).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const T=[],M=new Set;for(const{fbase_key:U,value:Z}of _)M.add(U),JSON.stringify(p.localCache[U])!==JSON.stringify(Z)&&(p.notifyListeners(U,Z),T.push(U));for(const U of Object.keys(p.localCache))p.localCache[U]&&!M.has(U)&&(p.notifyListeners(U,null),T.push(U));return T})()}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const M of Array.from(T))M(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),Na=1e12;class Qc{constructor(f){this.auth=f,this.counter=Na,this._widgets=new Map}render(f,p){const _=this.counter;return this._widgets.set(_,new Jc(f,this.auth.name,p||{})),this.counter++,_}reset(f){var p;const _=f||Na;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(f){var p;return(null===(p=this._widgets.get(f||Na))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,h.Z)(function*(){var _;return null===(_=p._widgets.get(f||Na))||void 0===_||_.execute(),""})()}}class Jc{constructor(f,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;ne(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ov(y){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cf=Yn("rcb"),av=new Bi(3e4,6e4);class uv{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=gn().grecaptcha)||void 0===f||!f.render)}load(f,p=""){return ne(function bf(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),f,"argument-error"),this.shouldResolveImmediately(p)&&Vt(gn().grecaptcha)?Promise.resolve(gn().grecaptcha):new Promise((_,T)=>{const M=gn().setTimeout(()=>{T(De(f,"network-request-failed"))},av.get());gn()[Cf]=()=>{gn().clearTimeout(M),delete gn()[Cf];const Z=gn().grecaptcha;if(!Z||!Vt(Z))return void T(De(f,"internal-error"));const Me=Z.render;Z.render=(ze,Ke)=>{const ce=Me(ze,Ke);return this.counter++,ce},this.hostLanguage=p,_(Z)},hr(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Cf,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(M),T(De(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!(null===(p=gn().grecaptcha)||void 0===p||!p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ar{load(f){return(0,h.Z)(function*(){return new Qc(f)})()}clearedOneInstance(){}}const Oa="recaptcha",Bu={theme:"light",type:"image"};class Xc{constructor(f,p=Object.assign({},Bu),_){this.parameters=p,this.type=Oa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hn(_),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;ne(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ar:new uv,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),_=f.getAssertedRecaptcha();return _.getResponse(p)||new Promise(M=>{const U=Z=>{Z&&(f.tokenChangeListeners.delete(U),M(Z))};f.tokenChangeListeners.add(U),f.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof f)f(p);else if("string"==typeof f){const _=gn()[f];"function"==typeof _&&_(p)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){ne(it()&&!Fu(),f.auth,"internal-error"),yield function Si(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function X(y){return ke.apply(this,arguments)}(f.auth);ne(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Wi{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=pi._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function go(){return(go=(0,h.Z)(function*(y,f,p){const _=hn(y),T=yield Hu(_,f,(0,P.m9)(p));return new Wi(T,M=>va(_,M))})).apply(this,arguments)}function $u(){return($u=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y);yield ps(!1,_,"phone");const T=yield Hu(_.auth,f,(0,P.m9)(p));return new Wi(T,M=>dd(_,M))})).apply(this,arguments)}function el(){return(el=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y),T=yield Hu(_.auth,f,(0,P.m9)(p));return new Wi(T,M=>hd(_,M))})).apply(this,arguments)}function Hu(y,f,p){return Hr.apply(this,arguments)}function Hr(){return Hr=(0,h.Z)(function*(y,f,p){var _;const T=yield p.verify();try{let M;if(ne("string"==typeof T,y,"argument-error"),ne(p.type===Oa,y,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const U=M.session;if("phoneNumber"in M)return ne("enroll"===U.type,y,"internal-error"),(yield function Go(y,f){return be(y,"POST","/v2/accounts/mfaEnrollment:start",Ce(y,f))}(y,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ne("signin"===U.type,y,"internal-error");const Z=(null===(_=M.multiFactorHint)||void 0===_?void 0:_.uid)||M.multiFactorUid;return ne(Z,y,"missing-multi-factor-info"),(yield function fo(y,f){return be(y,"POST","/v2/accounts/mfaSignIn:start",Ce(y,f))}(y,{mfaPendingCredential:U.credential,mfaEnrollmentId:Z,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield function Cg(y,f){return Lc.apply(this,arguments)}(y,{phoneNumber:M.phoneNumber,recaptchaToken:T});return U}}finally{p._reset()}}),Hr.apply(this,arguments)}function Rr(){return(Rr=(0,h.Z)(function*(y,f){yield ir((0,P.m9)(y),f)})).apply(this,arguments)}let Ai=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=hn(p)}verifyPhoneNumber(p,_){return Hu(this.auth,p,(0,P.m9)(_))}static credential(p,_){return pi._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:T}=p;return _&&T?pi._fromTokenResponse(_,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function en(y,f){return f?In(f):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class et extends cs{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return bi(f,this._buildIdpRequest())}_linkToIdToken(f,p){return bi(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return bi(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function Zi(y){return ya(y.auth,new et(y),y.bypassAuthState)}function bd(y){const{auth:f,user:p}=y;return ne(p,f,"internal-error"),Ns(p,new et(y),y.bypassAuthState)}function mo(y){return yo.apply(this,arguments)}function yo(){return(yo=(0,h.Z)(function*(y){const{auth:f,user:p}=y;return ne(p,f,"internal-error"),ir(p,new et(y),y.bypassAuthState)})).apply(this,arguments)}class mr{constructor(f,p,_,T,M=!1){this.auth=f,this.resolver=_,this.user=T,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,h.Z)(function*(_,T){f.pendingPromise={resolve:_,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(_,T){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,h.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:M,tenantId:U,error:Z,type:Me}=f;if(Z)return void p.reject(Z);const ze={auth:p.auth,requestUri:_,sessionId:T,tenantId:U||void 0,postBody:M||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Me)(ze))}catch(Ke){p.reject(Ke)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Zi;case"linkViaPopup":case"linkViaRedirect":return mo;case"reauthViaPopup":case"reauthViaRedirect":return bd;default:Ie(this.auth,"internal-error")}}resolve(f){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const mn=new Bi(2e3,1e4);function yt(){return(yt=(0,h.Z)(function*(y,f,p){const _=hn(y);Fe(y,f,hs);const T=en(_,p);return new Wu(_,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Gu(){return(Gu=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y);Fe(_.auth,f,hs);const T=en(_.auth,p);return new Wu(_.auth,"reauthViaPopup",f,T,_).executeNotNull()})).apply(this,arguments)}function qu(){return(qu=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y);Fe(_.auth,f,hs);const T=en(_.auth,p);return new Wu(_.auth,"linkViaPopup",f,T,_).executeNotNull()})).apply(this,arguments)}let Wu=(()=>{class y extends mr{constructor(p,_,T,M,U){super(p,_,M,U),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,h.Z)(function*(){const _=yield p.execute();return ne(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,h.Z)(function*(){Xe(1===p.filter.length,"Popup operations only handle one event");const _=qo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(De(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,mn.get())};p()}}return y.currentPopupAction=null,y})();const Ki="pendingRedirect",yr=new Map;class Fs extends mr{constructor(f,p,_=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,h.Z)(function*(){let _=yr.get(p.auth._key());if(!_){try{const M=(yield function Ls(y,f){return ka.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;_=()=>Promise.resolve(M)}catch(T){_=()=>Promise.reject(T)}yr.set(p.auth._key(),_)}return p.bypassAuthState||yr.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,_=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(_,f);if("unknown"!==f.type){if(f.eventId){const T=yield _.auth._redirectUserForId(f.eventId);if(T)return _.user=T,p().call(_,f);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function ka(){return(ka=(0,h.Z)(function*(y,f){const p=Yu(f),_=Ku(y);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(p));return yield _._remove(p),T})).apply(this,arguments)}function Vs(y,f){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,h.Z)(function*(y,f){return Ku(y)._set(Yu(f),"true")})).apply(this,arguments)}function Yi(y,f){yr.set(y._key(),f)}function Ku(y){return In(y._redirectPersistence)}function Yu(y){return V(Ki,y.config.apiKey,y.name)}function tl(y,f,p){return function ur(y,f,p){return Qu.apply(this,arguments)}(y,f,p)}function Qu(){return(Qu=(0,h.Z)(function*(y,f,p){const _=hn(y);Fe(y,f,hs),yield _._initializationPromise;const T=en(_,p);return yield Vs(T,_),T._openRedirect(_,f,"signInViaRedirect")})).apply(this,arguments)}function Ju(y,f,p){return function Xu(y,f,p){return nl.apply(this,arguments)}(y,f,p)}function nl(){return(nl=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y);Fe(_.auth,f,hs),yield _.auth._initializationPromise;const T=en(_.auth,p);yield Vs(T,_.auth);const M=yield Fa(_);return T._openRedirect(_.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function Af(y,f,p){return function rl(y,f,p){return xf.apply(this,arguments)}(y,f,p)}function xf(){return(xf=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y);Fe(_.auth,f,hs),yield _.auth._initializationPromise;const T=en(_.auth,p);yield ps(!1,_,f.providerId),yield Vs(T,_.auth);const M=yield Fa(_);return T._openRedirect(_.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function Td(){return(Td=(0,h.Z)(function*(y,f){return yield hn(y)._initializationPromise,ec(y,f,!1)})).apply(this,arguments)}function ec(y,f){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,h.Z)(function*(y,f,p=!1){const _=hn(y),T=en(_,f),U=yield new Fs(_,T,p).execute();return U&&!p&&(delete U.user._redirectEventId,yield _._persistUserIfCurrent(U.user),yield _._setRedirectUser(null,f)),U})).apply(this,arguments)}function Fa(y){return il.apply(this,arguments)}function il(){return(il=(0,h.Z)(function*(y){const f=qo(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class La{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(f,_)&&(p=!0,this.sendToConsumer(f,_),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Nf(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xd(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var _;if(f.error&&!xd(f)){const T=(null===(_=f.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(De(this.auth,T))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const _=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&_}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ad(f))}saveEventToCache(f){this.cachedEventUids.add(Ad(f)),this.lastProcessedEventTime=Date.now()}}function Ad(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function xd({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function ye(y){return vo.apply(this,arguments)}function vo(){return(vo=(0,h.Z)(function*(y,f={}){return be(y,"GET","/v1/projects",f)})).apply(this,arguments)}const sl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yt=/^https?/;function xi(){return(xi=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield ye(y);for(const p of f)try{if(tc(p))return}catch{}Ie(y,"unauthorized-domain")})).apply(this,arguments)}function tc(y){const f=Ut(),{protocol:p,hostname:_}=new URL(f);if(y.startsWith("chrome-extension://")){const U=new URL(y);return""===U.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&U.hostname===_}if(!Yt.test(p))return!1;if(sl.test(y))return _===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const Md=new Bi(3e4,6e4);function tn(){const y=gn().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let wo=null;const Of=new Bi(5e3,15e3),Rd="__/auth/iframe",Nd="emulator/auth/iframe",Od={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kf(y){const f=y.config;ne(f.authDomain,y,"auth-domain-config-required");const p=f.emulator?ue(f,Nd):`https://${y.config.authDomain}/${Rd}`,_={apiKey:f.apiKey,appName:y.name,v:ie.SDK_VERSION},T=Pf.get(y.config.apiHost);T&&(_.eid=T);const M=y._getFrameworks();return M.length&&(_.fw=M.join(",")),`${p}?${(0,P.xO)(_).slice(1)}`}function D(){return D=(0,h.Z)(function*(y){const f=yield function ws(y){return wo=wo||function _o(y){return new Promise((f,p)=>{var _,T,M;function U(){tn(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{tn(),p(De(y,"network-request-failed"))},timeout:Md.get()})}if(null!==(T=null===(_=gn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)f(gapi.iframes.getContext());else{if(null===(M=gn().gapi)||void 0===M||!M.load){const Z=Yn("iframefcb");return gn()[Z]=()=>{gapi.load?U():p(De(y,"network-request-failed"))},hr(`https://apis.google.com/js/api.js?onload=${Z}`).catch(Me=>p(Me))}U()}}).catch(f=>{throw wo=null,f})}(y),wo}(y),p=gn().gapi;return ne(p,y,"internal-error"),f.open({where:document.body,url:kf(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Od,dontclear:!0},_=>new Promise(function(){var T=(0,h.Z)(function*(M,U){yield _.restyle({setHideOnLeave:!1});const Z=De(y,"network-request-failed"),Me=gn().setTimeout(()=>{U(Z)},Of.get());function ze(){gn().clearTimeout(Me),M(_)}_.ping(ze).then(ze,()=>{U(Z)})});return function(M,U){return T.apply(this,arguments)}}()))}),D.apply(this,arguments)}const S={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},O=500,j=600,W="_blank",te="http://localhost";class $e{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Mt="__/auth/handler",Tt="emulator/auth/handler",yi=encodeURIComponent("fac");function Gn(y,f,p,_,T,M){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,h.Z)(function*(y,f,p,_,T,M){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const U={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:ie.SDK_VERSION,eventId:T};if(f instanceof hs){f.setDefaultLanguage(y.languageCode),U.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(U.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ke,ce]of Object.entries(M||{}))U[Ke]=ce}if(f instanceof zi){const Ke=f.getScopes().filter(ce=>""!==ce);Ke.length>0&&(U.scopes=Ke.join(","))}y.tenantId&&(U.tid=y.tenantId);const Z=U;for(const Ke of Object.keys(Z))void 0===Z[Ke]&&delete Z[Ke];const Me=yield y._getAppCheckToken(),ze=Me?`#${yi}=${encodeURIComponent(Me)}`:"";return`${function Va({config:y}){return y.emulator?ue(y,Tt):`https://${y.authDomain}/${Mt}`}(y)}?${(0,P.xO)(Z).slice(1)}${ze}`})).apply(this,arguments)}const Xi="webStorageSupport",Mi=class vi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vs,this._completeRedirectFn=ec,this._overrideRedirectResult=Yi}_openPopup(f,p,_,T){var M=this;return(0,h.Z)(function*(){var U;Xe(null===(U=M.eventManagers[f._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const Z=yield Gn(f,p,_,Ut(),T);return function He(y,f,p,_=O,T=j){const M=Math.max((window.screen.availHeight-T)/2,0).toString(),U=Math.max((window.screen.availWidth-_)/2,0).toString();let Z="";const Me=Object.assign(Object.assign({},S),{width:_.toString(),height:T.toString(),top:M,left:U}),ze=(0,P.z$)().toLowerCase();p&&(Z=Le(ze)?W:p),ve(ze)&&(f=f||te,Me.scrollbars="yes");const Ke=Object.entries(Me).reduce((vn,[vt,Eo])=>`${vn}${vt}=${Eo},`,"");if(function Sr(y=(0,P.z$)()){var f;return ln(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(ze)&&"_self"!==Z)return function st(y,f){const p=document.createElement("a");p.href=y,p.target=f;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(f||"",Z),new $e(null);const ce=window.open(f||"",Z,Ke);ne(ce,y,"popup-blocked");try{ce.focus()}catch{}return new $e(ce)}(f,Z,qo())})()}_openRedirect(f,p,_,T){var M=this;return(0,h.Z)(function*(){return yield M._originValidation(f),function Dd(y){gn().location.href=y}(yield Gn(f,p,_,Ut(),T)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:T,promise:M}=this.eventManagers[p];return T?Promise.resolve(T):(Xe(M,"If manager is not set, promise should be"),M)}const _=this.initAndGetManager(f);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(f){var p=this;return(0,h.Z)(function*(){const _=yield function E(y){return D.apply(this,arguments)}(f),T=new La(f);return _.register("authEvent",M=>(ne(M?.authEvent,f,"invalid-auth-event"),{status:T.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:T},p.iframes[f._key()]=_,T})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(Xi,{type:Xi},T=>{var M;const U=null===(M=T?.[0])||void 0===M?void 0:M[Xi];void 0!==U&&p(!!U),Ie(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Qi(y){return xi.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return Hi()||J()||ln()}};class nc{constructor(f){this.factorId=f}_process(f,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,_);case"signin":return this._finalizeSignIn(f,p.credential);default:return Dt("unexpected MultiFactorSessionType")}}}class Ff extends nc{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Ff(f)}_finalizeEnroll(f,p,_){return function qc(y,f){return be(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ce(y,f))}(f,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function Df(y,f){return be(y,"POST","/v2/accounts/mfaSignIn:finalize",Ce(y,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ol=(()=>{class y{constructor(){}static assertion(p){return Ff._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Pd="@firebase/auth";class Lf{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,h.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(_=>{f(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);p&&(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ua(){return window}(0,P.Pz)("authIdTokenMaxAge"),function Vf(y){(0,ie._registerComponent)(new me.wA("auth",(f,{options:p})=>{const _=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),M=f.getProvider("app-check-internal"),{apiKey:U,authDomain:Z}=_.options;ne(U&&!U.includes(":"),"invalid-api-key",{appName:_.name});const Me={apiKey:U,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:de(y)},ze=new hi(_,T,M,Me);return function Vn(y,f){const p=f?.persistence||[],_=(Array.isArray(p)?p:[p]).map(In);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(_,f?.popupRedirectResolver)}(ze,p),ze},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,_)=>{f.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new me.wA("auth-internal",f=>{const p=hn(f.getProvider("auth").getImmediate());return new Lf(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(Pd,"0.23.2",function kd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ie.registerVersion)(Pd,"0.23.2","esm2017")}("Browser");const lv=2e3;function Qo(){return Qo=(0,h.Z)(function*(y,f,p){var _;const{BuildInfo:T}=Ua();Xe(f.sessionId,"AuthEvent did not contain a session ID");const M=yield function Ba(y){return cl.apply(this,arguments)}(f.sessionId),U={};return ln()?U.ibi=T.packageName:Zt()?U.apn=T.packageName:Ie(y,"operation-not-supported-in-this-environment"),T.displayName&&(U.appDisplayName=T.displayName),U.sessionId=M,Gn(y,p,f.type,void 0,null!==(_=f.eventId)&&void 0!==_?_:void 0,U)}),Qo.apply(this,arguments)}function rc(){return(rc=(0,h.Z)(function*(y){const{BuildInfo:f}=Ua(),p={};ln()?p.iosBundleId=f.packageName:Zt()?p.androidPackageName=f.packageName:Ie(y,"operation-not-supported-in-this-environment"),yield ye(y,p)})).apply(this,arguments)}function ic(){return(ic=(0,h.Z)(function*(y,f,p){const{cordova:_}=Ua();let T=()=>{};try{yield new Promise((M,U)=>{let Z=null;function Me(){var ce;M();const vn=null===(ce=_.plugins.browsertab)||void 0===ce?void 0:ce.close;"function"==typeof vn&&vn(),"function"==typeof p?.close&&p.close()}function ze(){Z||(Z=window.setTimeout(()=>{U(De(y,"redirect-cancelled-by-user"))},lv))}function Ke(){"visible"===document?.visibilityState&&ze()}f.addPassiveListener(Me),document.addEventListener("resume",ze,!1),Zt()&&document.addEventListener("visibilitychange",Ke,!1),T=()=>{f.removePassiveListener(Me),document.removeEventListener("resume",ze,!1),document.removeEventListener("visibilitychange",Ke,!1),Z&&window.clearTimeout(Z)}})}finally{T()}})).apply(this,arguments)}function cl(){return(cl=(0,h.Z)(function*(y){const f=function ja(y){if(Xe(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),p=new Uint8Array(f);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(y),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const kg=20;class Iw extends La{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function zf(y){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,h.Z)(function*(y){const f=yield Bd()._get(sc(y));return f&&(yield Bd()._remove(sc(y))),f})).apply(this,arguments)}function qf(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<kg;p++){const _=Math.floor(Math.random()*f.length);y.push(f.charAt(_))}return y.join("")}function Bd(){return In(uo)}function sc(y){return V("authEvent",y.config.apiKey,y.name)}function Ha(y){if(!y?.includes("?"))return{};const[f,...p]=y.split("?");return(0,P.zd)(p.join("?"))}const dl=class Zf{constructor(){this._redirectPersistence=vs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ec,this._overrideRedirectResult=Yi}_initialize(f){var p=this;return(0,h.Z)(function*(){const _=f._key();let T=p.eventManagers.get(_);return T||(T=new Iw(f),p.eventManagers.set(_,T),p.attachCallbackListeners(f,T)),T})()}_openPopup(f){Ie(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,_,T){var M=this;return(0,h.Z)(function*(){!function Gf(y){var f,p,_,T,M,U,Z,Me,ze,Ke;const ce=Ua();ne("function"==typeof(null===(f=ce?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof(null===(p=ce?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(M=null===(T=null===(_=ce?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Me=null===(Z=null===(U=ce?.cordova)||void 0===U?void 0:U.plugins)||void 0===Z?void 0:Z.browsertab)||void 0===Me?void 0:Me.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Ke=null===(ze=ce?.cordova)||void 0===ze?void 0:ze.InAppBrowser)||void 0===Ke?void 0:Ke.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const U=yield M._initialize(f);yield U.initialized(),U.resetRedirect(),function Zu(){yr.clear()}(),yield M._originValidation(f);const Z=function Vd(y,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:qf(),postBody:null,tenantId:y.tenantId,error:De(y,"no-auth-event")}}(f,_,T);yield function dv(y,f){return Bd()._set(sc(y),f)}(f,Z);const Me=yield function Pg(y,f,p){return Qo.apply(this,arguments)}(f,Z,p),ze=yield function $f(y){const{cordova:f}=Ua();return new Promise(p=>{f.plugins.browsertab.isAvailable(_=>{let T=null;_?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function jt(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Me);return function Hf(y,f,p){return ic.apply(this,arguments)}(f,U,ze)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ld(y){return rc.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:_,handleOpenURL:T,BuildInfo:M}=Ua(),U=setTimeout((0,h.Z)(function*(){yield zf(f),p.onEvent(Lg())}),500),Z=function(){var Ke=(0,h.Z)(function*(ce){clearTimeout(U);const vn=yield zf(f);let vt=null;vn&&ce?.url&&(vt=function Fg(y,f){var p,_;const T=function Wf(y){const f=Ha(y),p=f.link?decodeURIComponent(f.link):void 0,_=Ha(p).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Ha(T).link||T||_||p||y}(f);if(T.includes("/__/auth/callback")){const M=Ha(T),U=M.firebaseError?function $a(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,Z=null===(_=null===(p=U?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Me=Z?De(Z):null;return Me?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(vn,ce.url)),p.onEvent(vt||Lg())});return function(vn){return Ke.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,Z);const Me=T,ze=`${M.packageName.toLowerCase()}://`;Ua().handleOpenURL=function(){var Ke=(0,h.Z)(function*(ce){if(ce.toLowerCase().startsWith(ze)&&Z({url:ce}),"function"==typeof Me)try{Me(ce)}catch(vn){console.error(vn)}});return function(ce){return Ke.apply(this,arguments)}}()}};function Lg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:De("no-auth-event")}}const Bg=1e3;function Ga(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function hl(y=(0,P.z$)()){return!("file:"!==Ga()&&"ionic:"!==Ga()&&"capacitor:"!==Ga()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Cw(){try{const y=self.localStorage,f=qo();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Dw(y=(0,P.z$)()){return function fl(){return(0,P.w1)()&&11===document?.documentMode}()||function Yf(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch{return Qf()&&(0,P.hl)()}return!1}function Qf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function oc(){return(function hv(){return"http:"===Ga()||"https:"===Ga()}()||(0,P.ru)()||hl())&&!function jg(){return(0,P.b$)()||(0,P.UG)()}()&&Cw()&&!Qf()}function $g(){return hl()&&typeof document<"u"}function Jo(){return(Jo=(0,h.Z)(function*(){return!!$g()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},Bg);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Ri={LOCAL:"local",NONE:"none",SESSION:"session"},Xo=ne,Hg="persistence";function zg(y){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,h.Z)(function*(y){yield y._initializationPromise;const f=pv(),p=V(Hg,y.config.apiKey,y.name);f&&f.setItem(p,y._getPersistence())})).apply(this,arguments)}function pv(){var y;try{return(null===(y=function pl(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const bw=ne;class ti{constructor(){this.browserResolver=In(Mi),this.cordovaResolver=In(dl),this.underlyingResolver=null,this._redirectPersistence=vs,this._completeRedirectFn=ec,this._overrideRedirectResult=Yi}_initialize(f){var p=this;return(0,h.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,_,T){var M=this;return(0,h.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,p,_,T)})()}_openRedirect(f,p,_,T){var M=this;return(0,h.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,p,_,T)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return $g()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bw(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const p=yield function Jf(){return Jo.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function gl(y){return y.unwrap()}function CC(y){return Sw(y)}function Sw(y){const{_tokenResponse:f}=y instanceof P.ZR?y.customData:y;if(!f)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ai.credentialFromResult(y);const p=f.providerId;if(!p||p===pe.PASSWORD)return null;let _;switch(p){case pe.GOOGLE:_=ga;break;case pe.FACEBOOK:_=Vc;break;case pe.GITHUB:_=ad;break;case pe.TWITTER:_=vu;break;default:const{oauthIdToken:T,oauthAccessToken:M,oauthTokenSecret:U,pendingToken:Z,nonce:Me}=f;return M||U||T||Z?Z?p.startsWith("saml.")?Ms._create(p,Z):ds._fromParams({providerId:p,signInMethod:p,pendingToken:Z,idToken:T,accessToken:M}):new Xs(p).credential({idToken:T,accessToken:M,rawNonce:Me}):null}return y instanceof P.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function _i(y,f){return f.catch(p=>{throw p instanceof P.ZR&&function bC(y,f){var p;const _=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new Wg(y,function Nu(y,f){var p;const _=(0,P.m9)(y),T=f;return ne(f.customData.operationType,_,"argument-error"),ne(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),ro._fromError(_,T)}(y,f));else if(_){const T=Sw(f),M=f;T&&(M.credential=T,M.tenantId=_.tenantId||void 0,M.email=_.email||void 0,M.phoneNumber=_.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:CC(p),additionalUserInfo:Gc(p),user:Us.getOrCreate(T)}})}function qg(y,f){return ml.apply(this,arguments)}function ml(){return(ml=(0,h.Z)(function*(y,f){const p=yield f;return{verificationId:p.verificationId,confirm:_=>_i(y,p.confirm(_))}})).apply(this,arguments)}class Wg{constructor(f,p){this.resolver=p,this.auth=function Tw(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return _i(gl(this.auth),this.resolver.resolveSignIn(f))}}class Us{constructor(f){this._delegate=f,this.multiFactor=function wd(y){const f=(0,P.m9)(y);return Ps.has(f)||Ps.set(f,oo._fromUser(f)),Ps.get(f)}(f)}static getOrCreate(f){return Us.USER_MAP.has(f)||Us.USER_MAP.set(f,new Us(f)),Us.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,h.Z)(function*(){return _i(p.auth,dd(p._delegate,f))})()}linkWithPhoneNumber(f,p){var _=this;return(0,h.Z)(function*(){return qg(_.auth,function ju(y,f,p){return $u.apply(this,arguments)}(_._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,h.Z)(function*(){return _i(p.auth,function zu(y,f,p){return qu.apply(this,arguments)}(p._delegate,f,ti))})()}linkWithRedirect(f){var p=this;return(0,h.Z)(function*(){return yield zg(hn(p.auth)),Af(p._delegate,f,ti)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,h.Z)(function*(){return _i(p.auth,hd(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return qg(this.auth,function Sf(y,f,p){return el.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return _i(this.auth,function Pa(y,f,p){return Gu.apply(this,arguments)}(this._delegate,f,ti))}reauthenticateWithRedirect(f){var p=this;return(0,h.Z)(function*(){return yield zg(hn(p.auth)),Ju(p._delegate,f,ti)})()}sendEmailVerification(f){return function Su(y,f){return Da.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,h.Z)(function*(){return yield function cd(y,f){return xr.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function Dr(y,f){return Tn((0,P.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function ms(y,f){return Tn((0,P.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Mr(y,f){return Rr.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function mf(y,f){return xu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function $c(y,f,p){return Ca.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Us.USER_MAP=new WeakMap;const ac=ne;let ep=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;ac(T,"invalid-api-key",{appName:p.name}),ac(T,"invalid-api-key",{appName:p.name});const M=typeof window<"u"?ti:void 0;this._delegate=_.initialize({options:{persistence:Bs(T,p.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(We),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Us.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function da(y,f,p){const _=hn(y);ne(_._canInitEmulator,_,"emulator-config-failed"),ne(/^https?:\/\//.test(f),_,"invalid-emulator-scheme");const T=!!p?.disableWarnings,M=Ks(f),{host:U,port:Z}=function Lt(y){const f=Ks(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(_);if(T){const M=T[1];return{host:M,port:ha(_.substr(M.length+1))}}{const[M,U]=_.split(":");return{host:M,port:ha(U)}}}(f);_.config.emulator={url:`${M}//${U}${null===Z?"":`:${Z}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:U,port:Z,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Ys(){function y(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function Ag(y,f){return gs.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Ea(this._delegate,p)}confirmPasswordReset(p,_){return function pd(y,f,p){return Du.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var T=this;return(0,h.Z)(function*(){return _i(T._delegate,function to(y,f,p){return mi.apply(this,arguments)}(T._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function md(y,f){return Tu.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function xg(y,f){return"EMAIL_SIGNIN"===Vo.parseLink(f)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,h.Z)(function*(){ac(oc(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function Mf(y,f){return Td.apply(this,arguments)}(p._delegate,ti);return _?_i(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Kf(y,f){hn(y)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,_,T){const{next:M,error:U,complete:Z}=yl(p,_,T);return this._delegate.onAuthStateChanged(M,U,Z)}onIdTokenChanged(p,_,T){const{next:M,error:U,complete:Z}=yl(p,_,T);return this._delegate.onIdTokenChanged(M,U,Z)}sendSignInLinkToEmail(p,_){return function Ia(y,f,p){return Cu.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function Iu(y,f,p){return $r.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,h.Z)(function*(){let T;switch(function Gg(y,f){Xo(Object.values(Ri).includes(f),y,"invalid-persistence-type"),(0,P.b$)()?Xo(f!==Ri.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?Xo(f===Ri.NONE,y,"unsupported-persistence-type"):Qf()?Xo(f===Ri.NONE||f===Ri.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):Xo(f===Ri.NONE||Cw(),y,"unsupported-persistence-type")}(_._delegate,p),p){case Ri.SESSION:T=vs;break;case Ri.LOCAL:T=(yield In(ho)._isAvailable())?ho:uo;break;case Ri.NONE:T=Br;break;default:return Ie("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return _i(this._delegate,function pr(y){return Uo.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return _i(this._delegate,va(this._delegate,p))}signInWithCustomToken(p){return _i(this._delegate,function he(y,f){return kt.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return _i(this._delegate,function gd(y,f,p){return va((0,P.m9)(y),pf.credential(f,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return _i(this._delegate,function Xn(y,f,p){return jo.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return qg(this._delegate,function Tf(y,f,p){return go.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,h.Z)(function*(){return ac(oc(),_._delegate,"operation-not-supported-in-this-environment"),_i(_._delegate,function Sn(y,f,p){return yt.apply(this,arguments)}(_._delegate,p,ti))})()}signInWithRedirect(p){var _=this;return(0,h.Z)(function*(){return ac(oc(),_._delegate,"operation-not-supported-in-this-environment"),yield zg(_._delegate),tl(_._delegate,p,ti)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function gi(y,f){return qi.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ri,y})();function yl(y,f,p){let _=y;"function"!=typeof y&&({next:_,error:f,complete:p}=y);const T=_;return{next:U=>T(U&&Us.getOrCreate(U)),error:f,complete:p}}function Bs(y,f){const p=function fv(y,f){const p=pv();if(!p)return[];const _=V(Hg,y,f);switch(p.getItem(_)){case Ri.NONE:return[Br];case Ri.LOCAL:return[ho,vs];case Ri.SESSION:return[vs];default:return[]}}(y,f);if(typeof self<"u"&&!p.includes(ho)&&p.push(ho),typeof window<"u")for(const _ of[uo,vs])p.includes(_)||p.push(_);return p.includes(Br)||p.push(Br),p}class js{constructor(){this.providerId="phone",this._delegate=new Ai(gl(Q.Z.auth()))}static credential(f,p){return Ai.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}js.PHONE_SIGN_IN_METHOD=Ai.PHONE_SIGN_IN_METHOD,js.PROVIDER_ID=Ai.PROVIDER_ID;const Zg=ne;class Kg{constructor(f,p,_=Q.Z.app()){var T;Zg(null===(T=_.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Xc(f,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Aw(y){y.INTERNAL.registerComponent(new me.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),_=f.getProvider("auth");return new ep(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:q_EMAIL_SIGNIN,PASSWORD_RESET:q_PASSWORD_RESET,RECOVER_EMAIL:q_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:q_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:q_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:q_VERIFY_EMAIL}},EmailAuthProvider:pf,FacebookAuthProvider:Vc,GithubAuthProvider:ad,GoogleAuthProvider:ga,OAuthProvider:Xs,SAMLAuthProvider:yu,PhoneAuthProvider:js,PhoneMultiFactorGenerator:ol,RecaptchaVerifier:Kg,TwitterAuthProvider:vu,Auth:ep,AuthCredential:cs,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(Q.Z)},5861:(gt,xe,k)=>{function h(P,ie,se,oe,me,Ee,pe){try{var $=P[Ee](pe),B=$.value}catch(q){return void se(q)}$.done?ie(B):Promise.resolve(B).then(oe,me)}function Q(P){return function(){var ie=this,se=arguments;return new Promise(function(oe,me){var Ee=P.apply(ie,se);function pe(B){h(Ee,oe,me,pe,$,"next",B)}function $(B){h(Ee,oe,me,pe,$,"throw",B)}pe(void 0)})}}k.d(xe,{Z:()=>Q})},7582:(gt,xe,k)=>{function ie(ue,le){var fe={};for(var re in ue)Object.prototype.hasOwnProperty.call(ue,re)&&le.indexOf(re)<0&&(fe[re]=ue[re]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var Ce=0;for(re=Object.getOwnPropertySymbols(ue);Ce<re.length;Ce++)le.indexOf(re[Ce])<0&&Object.prototype.propertyIsEnumerable.call(ue,re[Ce])&&(fe[re[Ce]]=ue[re[Ce]])}return fe}function q(ue,le,fe,re){return new(fe||(fe=Promise))(function(be,lt){function at(Gt){try{ht(re.next(Gt))}catch(Cn){lt(Cn)}}function fn(Gt){try{ht(re.throw(Gt))}catch(Cn){lt(Cn)}}function ht(Gt){Gt.done?be(Gt.value):function Ce(be){return be instanceof fe?be:new fe(function(lt){lt(be)})}(Gt.value).then(at,fn)}ht((re=re.apply(ue,le||[])).next())})}function Pe(ue){return this instanceof Pe?(this.v=ue,this):new Pe(ue)}function Ie(ue,le,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,re=fe.apply(ue,le||[]),be=[];return Ce={},at("next"),at("throw"),at("return",function lt(Wt){return function(xn){return Promise.resolve(xn).then(Wt,Cn)}}),Ce[Symbol.asyncIterator]=function(){return this},Ce;function at(Wt,xn){re[Wt]&&(Ce[Wt]=function(En){return new Promise(function(wr,br){be.push([Wt,En,wr,br])>1||fn(Wt,En)})},xn&&(Ce[Wt]=xn(Ce[Wt])))}function fn(Wt,xn){try{!function ht(Wt){Wt.value instanceof Pe?Promise.resolve(Wt.value.v).then(Gt,Cn):ui(be[0][2],Wt)}(re[Wt](xn))}catch(En){ui(be[0][3],En)}}function Gt(Wt){fn("next",Wt)}function Cn(Wt){fn("throw",Wt)}function ui(Wt,xn){Wt(xn),be.shift(),be.length&&fn(be[0][0],be[0][1])}}function qe(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,le=ue[Symbol.asyncIterator];return le?le.call(ue):(ue=function ot(ue){var le="function"==typeof Symbol&&Symbol.iterator,fe=le&&ue[le],re=0;if(fe)return fe.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&re>=ue.length&&(ue=void 0),{value:ue&&ue[re++],done:!ue}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),fe={},re("next"),re("throw"),re("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function re(be){fe[be]=ue[be]&&function(lt){return new Promise(function(at,fn){!function Ce(be,lt,at,fn){Promise.resolve(fn).then(function(ht){be({value:ht,done:at})},lt)}(at,fn,(lt=ue[be](lt)).done,lt.value)})}}}k.d(xe,{FC:()=>Ie,KL:()=>qe,_T:()=>ie,mG:()=>q,qq:()=>Pe}),"function"==typeof SuppressedError&&SuppressedError}},gt=>{gt(gt.s=5272)}]);